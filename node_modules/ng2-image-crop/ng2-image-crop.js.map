{"version":3,"file":"ng2-image-crop.js","sources":["ts/ng2-image-crop.ts","ts/src/image-cropper.module.ts","ts/src/component/image-cropper.component.ts","ts/src/utils/resize.utils.ts","ts/src/utils/exif.utils.ts"],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport {ImageCropperModule,OutputType,ImageCropperComponent,CropperPosition,ImageCroppedEvent} from './index';\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ImageCropperComponent } from './component/image-cropper.component';\nexport class ImageCropperModule {static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        ImageCropperComponent\n    ],\n    exports: [\n        ImageCropperComponent\n    ]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ImageCropperModule_tsickle_Closure_declarations() {\n/** @type {?} */\nImageCropperModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nImageCropperModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import {\n    Component, ElementRef, EventEmitter, HostBinding, HostListener, Input, OnChanges, Output,\n    SimpleChanges, ChangeDetectorRef, ChangeDetectionStrategy, NgZone, ViewChild\n} from '@angular/core';\nimport { DomSanitizer, SafeUrl, SafeStyle } from '@angular/platform-browser';\nimport { MoveStart, Dimensions, CropperPosition, ImageCroppedEvent } from '../interfaces';\nimport { resetExifOrientation, transformBase64BasedOnExifRotation } from '../utils/exif.utils';\nimport { resizeCanvas, fitImageToAspectRatio } from '../utils/resize.utils';\n\nexport type OutputType = 'base64' | 'file' | 'both';\nexport class ImageCropperComponent implements OnChanges {\nprivate originalImage: any;\nprivate originalBase64: string;\nprivate moveStart: MoveStart;\nprivate maxSize: Dimensions;\nprivate originalSize: Dimensions;\nprivate setImageMaxSizeRetries = 0;\nprivate cropperScaledMinWidth = 20;\nprivate cropperScaledMinHeight = 20;\n\n    safeImgDataUrl: SafeUrl | string;\n    marginLeft: SafeStyle | string = '0px';\n    imageVisible = false;\n\n     sourceImage: ElementRef;\n/**\n * @param {?} file\n * @return {?}\n */\nset imageFileChanged(file: any) {\n        this.initCropper();\n        if (file) {\n            this.loadImageFile(file);\n        }\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nset imageChangedEvent(event: any) {\n        this.initCropper();\n        if (event && event.target && event.target.files && event.target.files.length > 0) {\n            this.loadImageFile(event.target.files[0]);\n        }\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nset imageBase64(imageBase64: string) {\n        this.initCropper();\n        this.checkExifAndLoadBase64Image(imageBase64);\n    }\n\n     format: 'png' | 'jpeg' | 'bmp' | 'webp' | 'ico' = 'png';\n     outputType: OutputType = 'both';\n     maintainAspectRatio = true;\n     aspectRatio = 1;\n     resizeToWidth = 0;\n     resizeToHeight = 0;\n     cropperMinWidth = 0;\n     cropperMinHeight = 0;\n     roundCropper = false;\n     onlyScaleDown = false;\n     imageQuality = 92;\n     autoCrop = true;\n     backgroundColor: string;\n     containWithinAspectRatio = false;\n     cropper: CropperPosition = {\n        x1: -100,\n        y1: -100,\n        x2: 10000,\n        y2: 10000\n    };\n    \n     alignImage: 'left' | 'center' = 'center';\n\n\n     startCropImage = new EventEmitter<void>();\n     imageCropped = new EventEmitter<ImageCroppedEvent>();\n     imageCroppedBase64 = new EventEmitter<string>();\n     imageCroppedFile = new EventEmitter<Blob>();\n     imageLoaded = new EventEmitter<void>();\n     cropperReady = new EventEmitter<void>();\n     loadImageFailed = new EventEmitter<void>();\n/**\n * @param {?} sanitizer\n * @param {?} cd\n * @param {?} zone\n */\nconstructor(private sanitizer: DomSanitizer,\nprivate cd: ChangeDetectorRef,\nprivate zone: NgZone) {\n        this.initCropper();\n    }\n/**\n * @param {?} changes\n * @return {?}\n */\nngOnChanges(changes: SimpleChanges): void {\n        if (changes.cropper) {\n            this.setMaxSize();\n            this.setCropperScaledMinSize();\n            this.checkCropperPosition(false);\n            this.doAutoCrop();\n            this.cd.markForCheck();\n        }\n        if (changes.aspectRatio && this.imageVisible) {\n            this.resetCropperPosition();\n        }\n    }\n/**\n * @return {?}\n */\nprivate initCropper(): void {\n        this.imageVisible = false;\n        this.originalImage = null;\n        this.safeImgDataUrl = 'data:image/png;base64,iVBORw0KGg'\n            + 'oAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAU'\n            + 'AAarVyFEAAAAASUVORK5CYII=';\n        this.moveStart = {\n            active: false,\n            type: null,\n            position: null,\n            x1: 0,\n            y1: 0,\n            x2: 0,\n            y2: 0,\n            clientX: 0,\n            clientY: 0\n        };\n        this.maxSize = {\n            width: 0,\n            height: 0\n        };\n        this.originalSize = {\n            width: 0,\n            height: 0\n        };\n        this.cropper.x1 = -100;\n        this.cropper.y1 = -100;\n        this.cropper.x2 = 10000;\n        this.cropper.y2 = 10000;\n    }\n/**\n * @param {?} file\n * @return {?}\n */\nprivate loadImageFile(file: any): void {\n        const /** @type {?} */ fileReader = new FileReader();\n        fileReader.onload = (event: any) => {\n            const /** @type {?} */ imageType = file.type;\n            if (this.isValidImageType(imageType)) {\n                this.checkExifAndLoadBase64Image(event.target.result);\n            } else {\n                this.loadImageFailed.emit();\n            }\n        };\n        fileReader.readAsDataURL(file);\n    }\n/**\n * @param {?} type\n * @return {?}\n */\nprivate isValidImageType(type: string): boolean {\n        return /image\\/(png|jpg|jpeg|bmp|gif|tiff)/.test(type);\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nprivate checkExifAndLoadBase64Image(imageBase64: string): void {\n        resetExifOrientation(imageBase64)\n            .then((resultBase64: string) => this.fitImageToAspectRatio(resultBase64))\n            .then((resultBase64: string) => this.loadBase64Image(resultBase64))\n            .catch(() => this.loadImageFailed.emit());\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nprivate fitImageToAspectRatio(imageBase64: string): Promise<string> {\n        return this.containWithinAspectRatio\n            ? fitImageToAspectRatio(imageBase64, this.aspectRatio)\n            : Promise.resolve(imageBase64);\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nprivate loadBase64Image(imageBase64: string): void {\n        this.originalBase64 = imageBase64;\n        this.safeImgDataUrl = this.sanitizer.bypassSecurityTrustResourceUrl(imageBase64);\n        this.originalImage = new Image();\n        this.originalImage.onload = () => {\n            this.originalSize.width = this.originalImage.width;\n            this.originalSize.height = this.originalImage.height;\n            this.cd.markForCheck();\n        };\n        this.originalImage.src = imageBase64;\n    }\n/**\n * @return {?}\n */\nimageLoadedInView(): void {\n        if (this.originalImage != null) {\n            this.imageLoaded.emit();\n            this.setImageMaxSizeRetries = 0;\n            setTimeout(() => this.checkImageMaxSizeRecursively());\n        }\n    }\n/**\n * @return {?}\n */\nprivate checkImageMaxSizeRecursively(): void {\n        if (this.setImageMaxSizeRetries > 40) {\n            this.loadImageFailed.emit();\n        } else if (this.sourceImage && this.sourceImage.nativeElement && this.sourceImage.nativeElement.offsetWidth > 0) {\n            this.setMaxSize();\n            this.setCropperScaledMinSize();\n            this.resetCropperPosition();\n            this.cropperReady.emit();\n            this.cd.markForCheck();\n        } else {\n            this.setImageMaxSizeRetries++;\n            setTimeout(() => {\n                this.checkImageMaxSizeRecursively();\n            }, 50);\n        }\n    }\n/**\n * @return {?}\n */\nonResize(): void {\n        this.resizeCropperPosition();\n        this.setMaxSize();\n        this.setCropperScaledMinSize();\n    }\n/**\n * @return {?}\n */\nrotateLeft() {\n        this.transformBase64(8);\n    }\n/**\n * @return {?}\n */\nrotateRight() {\n        this.transformBase64(6);\n    }\n/**\n * @return {?}\n */\nflipHorizontal() {\n        this.transformBase64(2);\n    }\n/**\n * @return {?}\n */\nflipVertical() {\n        this.transformBase64(4);\n    }\n/**\n * @param {?} exifOrientation\n * @return {?}\n */\nprivate transformBase64(exifOrientation: number): void {\n        if (this.originalBase64) {\n            transformBase64BasedOnExifRotation(this.originalBase64, exifOrientation)\n                .then((resultBase64: string) => this.fitImageToAspectRatio(resultBase64))\n                .then((rotatedBase64: string) => this.loadBase64Image(rotatedBase64));\n        }\n    }\n/**\n * @return {?}\n */\nprivate resizeCropperPosition(): void {\n        const /** @type {?} */ sourceImageElement = this.sourceImage.nativeElement;\n        if (this.maxSize.width !== sourceImageElement.offsetWidth || this.maxSize.height !== sourceImageElement.offsetHeight) {\n            this.cropper.x1 = this.cropper.x1 * sourceImageElement.offsetWidth / this.maxSize.width;\n            this.cropper.x2 = this.cropper.x2 * sourceImageElement.offsetWidth / this.maxSize.width;\n            this.cropper.y1 = this.cropper.y1 * sourceImageElement.offsetHeight / this.maxSize.height;\n            this.cropper.y2 = this.cropper.y2 * sourceImageElement.offsetHeight / this.maxSize.height;\n        }\n    }\n/**\n * @return {?}\n */\nprivate resetCropperPosition(): void {\n        const /** @type {?} */ sourceImageElement = this.sourceImage.nativeElement;\n        if (!this.maintainAspectRatio) {\n            this.cropper.x1 = 0;\n            this.cropper.x2 = sourceImageElement.offsetWidth;\n            this.cropper.y1 = 0;\n            this.cropper.y2 = sourceImageElement.offsetHeight;\n        } else if (sourceImageElement.offsetWidth / this.aspectRatio < sourceImageElement.offsetHeight) {\n            this.cropper.x1 = 0;\n            this.cropper.x2 = sourceImageElement.offsetWidth;\n            const /** @type {?} */ cropperHeight = sourceImageElement.offsetWidth / this.aspectRatio;\n            this.cropper.y1 = (sourceImageElement.offsetHeight - cropperHeight) / 2;\n            this.cropper.y2 = this.cropper.y1 + cropperHeight;\n        } else {\n            this.cropper.y1 = 0;\n            this.cropper.y2 = sourceImageElement.offsetHeight;\n            const /** @type {?} */ cropperWidth = sourceImageElement.offsetHeight * this.aspectRatio;\n            this.cropper.x1 = (sourceImageElement.offsetWidth - cropperWidth) / 2;\n            this.cropper.x2 = this.cropper.x1 + cropperWidth;\n        }\n        this.doAutoCrop();\n        this.imageVisible = true;\n    }\n/**\n * @param {?} event\n * @param {?} moveType\n * @param {?=} position\n * @return {?}\n */\nstartMove(event: any, moveType: string, position: string | null = null): void {\n        event.preventDefault();\n        this.moveStart = {\n            active: true,\n            type: moveType,\n            position,\n            clientX: this.getClientX(event),\n            clientY: this.getClientY(event),\n            ...this.cropper\n        };\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nmoveImg(event: any): void {\n        if (this.moveStart.active) {\n            event.stopPropagation();\n            event.preventDefault();\n            if (this.moveStart.type === 'move') {\n                this.move(event);\n                this.checkCropperPosition(true);\n            } else if (this.moveStart.type === 'resize') {\n                this.resize(event);\n                this.checkCropperPosition(false);\n            }\n            this.cd.detectChanges();\n        }\n    }\n/**\n * @return {?}\n */\nprivate setMaxSize(): void {\n        const /** @type {?} */ sourceImageElement = this.sourceImage.nativeElement;\n        this.maxSize.width = sourceImageElement.offsetWidth;\n        this.maxSize.height = sourceImageElement.offsetHeight;\n        this.marginLeft = this.sanitizer.bypassSecurityTrustStyle('calc(50% - ' + this.maxSize.width / 2 + 'px)');\n    }\n/**\n * @return {?}\n */\nprivate setCropperScaledMinSize(): void {\n        if (this.originalImage) {\n            this.setCropperScaledMinWidth();\n            this.setCropperScaledMinHeight();\n        } else {\n            this.cropperScaledMinWidth = 20;\n            this.cropperScaledMinHeight = 20;\n        }\n    }\n/**\n * @return {?}\n */\nprivate setCropperScaledMinWidth(): void {\n        this.cropperScaledMinWidth = this.cropperMinWidth > 0\n            ? Math.max(20, this.cropperMinWidth / this.originalImage.width * this.maxSize.width)\n            : 20;\n    }\n/**\n * @return {?}\n */\nprivate setCropperScaledMinHeight(): void {\n        if (this.maintainAspectRatio) {\n            this.cropperScaledMinHeight = Math.max(20, this.cropperScaledMinWidth / this.aspectRatio);\n        } else if (this.cropperMinHeight > 0) {\n            this.cropperScaledMinHeight = Math.max(20, this.cropperMinHeight / this.originalImage.height * this.maxSize.height);\n        } else {\n            this.cropperScaledMinHeight = 20;\n        }\n    }\n/**\n * @param {?=} maintainSize\n * @return {?}\n */\nprivate checkCropperPosition(maintainSize = false): void {\n        if (this.cropper.x1 < 0) {\n            this.cropper.x2 -= maintainSize ? this.cropper.x1 : 0;\n            this.cropper.x1 = 0;\n        }\n        if (this.cropper.y1 < 0) {\n            this.cropper.y2 -= maintainSize ? this.cropper.y1 : 0;\n            this.cropper.y1 = 0;\n        }\n        if (this.cropper.x2 > this.maxSize.width) {\n            this.cropper.x1 -= maintainSize ? (this.cropper.x2 - this.maxSize.width) : 0;\n            this.cropper.x2 = this.maxSize.width;\n        }\n        if (this.cropper.y2 > this.maxSize.height) {\n            this.cropper.y1 -= maintainSize ? (this.cropper.y2 - this.maxSize.height) : 0;\n            this.cropper.y2 = this.maxSize.height;\n        }\n    }\n/**\n * @return {?}\n */\nmoveStop(): void {\n        if (this.moveStart.active) {\n            this.moveStart.active = false;\n            this.doAutoCrop();\n        }\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate move(event: any) {\n        const /** @type {?} */ diffX = this.getClientX(event) - this.moveStart.clientX;\n        const /** @type {?} */ diffY = this.getClientY(event) - this.moveStart.clientY;\n\n        this.cropper.x1 = this.moveStart.x1 + diffX;\n        this.cropper.y1 = this.moveStart.y1 + diffY;\n        this.cropper.x2 = this.moveStart.x2 + diffX;\n        this.cropper.y2 = this.moveStart.y2 + diffY;\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate resize(event: any): void {\n        const /** @type {?} */ diffX = this.getClientX(event) - this.moveStart.clientX;\n        const /** @type {?} */ diffY = this.getClientY(event) - this.moveStart.clientY;\n        switch (this.moveStart.position) {\n            case 'left':\n                this.cropper.x1 = Math.min(this.moveStart.x1 + diffX, this.cropper.x2 - this.cropperScaledMinWidth);\n                break;\n            case 'topleft':\n                this.cropper.x1 = Math.min(this.moveStart.x1 + diffX, this.cropper.x2 - this.cropperScaledMinWidth);\n                this.cropper.y1 = Math.min(this.moveStart.y1 + diffY, this.cropper.y2 - this.cropperScaledMinHeight);\n                break;\n            case 'top':\n                this.cropper.y1 = Math.min(this.moveStart.y1 + diffY, this.cropper.y2 - this.cropperScaledMinHeight);\n                break;\n            case 'topright':\n                this.cropper.x2 = Math.max(this.moveStart.x2 + diffX, this.cropper.x1 + this.cropperScaledMinWidth);\n                this.cropper.y1 = Math.min(this.moveStart.y1 + diffY, this.cropper.y2 - this.cropperScaledMinHeight);\n                break;\n            case 'right':\n                this.cropper.x2 = Math.max(this.moveStart.x2 + diffX, this.cropper.x1 + this.cropperScaledMinWidth);\n                break;\n            case 'bottomright':\n                this.cropper.x2 = Math.max(this.moveStart.x2 + diffX, this.cropper.x1 + this.cropperScaledMinWidth);\n                this.cropper.y2 = Math.max(this.moveStart.y2 + diffY, this.cropper.y1 + this.cropperScaledMinHeight);\n                break;\n            case 'bottom':\n                this.cropper.y2 = Math.max(this.moveStart.y2 + diffY, this.cropper.y1 + this.cropperScaledMinHeight);\n                break;\n            case 'bottomleft':\n                this.cropper.x1 = Math.min(this.moveStart.x1 + diffX, this.cropper.x2 - this.cropperScaledMinWidth);\n                this.cropper.y2 = Math.max(this.moveStart.y2 + diffY, this.cropper.y1 + this.cropperScaledMinHeight);\n                break;\n        }\n\n        if (this.maintainAspectRatio) {\n            this.checkAspectRatio();\n        }\n    }\n/**\n * @return {?}\n */\nprivate checkAspectRatio(): void {\n        let /** @type {?} */ overflowX = 0;\n        let /** @type {?} */ overflowY = 0;\n\n        switch (this.moveStart.position) {\n            case 'top':\n                this.cropper.x2 = this.cropper.x1 + (this.cropper.y2 - this.cropper.y1) * this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(0 - this.cropper.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y1 += (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'bottom':\n                this.cropper.x2 = this.cropper.x1 + (this.cropper.y2 - this.cropper.y1) * this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(this.cropper.y2 - this.maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y2 -= (overflowY * this.aspectRatio) > overflowX ? overflowY : (overflowX / this.aspectRatio);\n                }\n                break;\n            case 'topleft':\n                this.cropper.y1 = this.cropper.y2 - (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(0 - this.cropper.x1, 0);\n                overflowY = Math.max(0 - this.cropper.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x1 += (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y1 += (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'topright':\n                this.cropper.y1 = this.cropper.y2 - (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(0 - this.cropper.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y1 += (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'right':\n            case 'bottomright':\n                this.cropper.y2 = this.cropper.y1 + (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(this.cropper.y2 - this.maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y2 -= (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'left':\n            case 'bottomleft':\n                this.cropper.y2 = this.cropper.y1 + (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(0 - this.cropper.x1, 0);\n                overflowY = Math.max(this.cropper.y2 - this.maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x1 += (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y2 -= (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n        }\n    }\n/**\n * @return {?}\n */\nprivate doAutoCrop(): void {\n        if (this.autoCrop) {\n            this.crop();\n        }\n    }\n/**\n * @param {?=} outputType\n * @return {?}\n */\ncrop(outputType: OutputType = this.outputType): ImageCroppedEvent | Promise<ImageCroppedEvent> | null {\n        if (this.sourceImage.nativeElement && this.originalImage != null) {\n            this.startCropImage.emit();\n            const /** @type {?} */ imagePosition = this.getImagePosition();\n            const /** @type {?} */ width = imagePosition.x2 - imagePosition.x1;\n            const /** @type {?} */ height = imagePosition.y2 - imagePosition.y1;\n\n            const /** @type {?} */ cropCanvas = /** @type {?} */(( document.createElement('canvas') as HTMLCanvasElement));\n            cropCanvas.width = width;\n            cropCanvas.height = height;\n\n            const /** @type {?} */ ctx = cropCanvas.getContext('2d');\n            if (ctx) {\n                if (this.backgroundColor != null) {\n                    ctx.fillStyle = this.backgroundColor;\n                    ctx.fillRect(0, 0, width, height);\n                }\n                ctx.drawImage(\n                    this.originalImage,\n                    imagePosition.x1,\n                    imagePosition.y1,\n                    width,\n                    height,\n                    0,\n                    0,\n                    width,\n                    height\n                );\n                const /** @type {?} */ output = {width, height, imagePosition, cropperPosition: {...this.cropper}};\n                const /** @type {?} */ resizeRatio = this.getResizeRatio(width, height);\n                if (resizeRatio !== 1) {\n                    output.width = Math.round(width * resizeRatio);\n                    output.height = this.maintainAspectRatio\n                        ? Math.round(output.width / this.aspectRatio)\n                        : Math.round(height * resizeRatio);\n                    resizeCanvas(cropCanvas, output.width, output.height);\n                }\n                return this.cropToOutputType(outputType, cropCanvas, output);\n            }\n        }\n        return null;\n    }\n/**\n * @return {?}\n */\nprivate getImagePosition(): CropperPosition {\n        const /** @type {?} */ sourceImageElement = this.sourceImage.nativeElement;\n        const /** @type {?} */ ratio = this.originalSize.width / sourceImageElement.offsetWidth;\n        return {\n            x1: Math.round(this.cropper.x1 * ratio),\n            y1: Math.round(this.cropper.y1 * ratio),\n            x2: Math.min(Math.round(this.cropper.x2 * ratio), this.originalSize.width),\n            y2: Math.min(Math.round(this.cropper.y2 * ratio), this.originalSize.height)\n        };\n    }\n/**\n * @param {?} outputType\n * @param {?} cropCanvas\n * @param {?} output\n * @return {?}\n */\nprivate cropToOutputType(outputType: OutputType, cropCanvas: HTMLCanvasElement, output: ImageCroppedEvent): ImageCroppedEvent | Promise<ImageCroppedEvent> {\n        switch (outputType) {\n            case 'file':\n                return this.cropToFile(cropCanvas)\n                    .then((result: Blob | null) => {\n                        output.file = result;\n                        this.imageCropped.emit(output);\n                        return output;\n                    });\n            case 'both':\n                output.base64 = this.cropToBase64(cropCanvas);\n                return this.cropToFile(cropCanvas)\n                    .then((result: Blob | null) => {\n                        output.file = result;\n                        this.imageCropped.emit(output);\n                        return output;\n                    });\n            default:\n                output.base64 = this.cropToBase64(cropCanvas);\n                this.imageCropped.emit(output);\n                return output;\n        }\n    }\n/**\n * @param {?} cropCanvas\n * @return {?}\n */\nprivate cropToBase64(cropCanvas: HTMLCanvasElement): string {\n        const /** @type {?} */ imageBase64 = cropCanvas.toDataURL('image/' + this.format, this.getQuality());\n        this.imageCroppedBase64.emit(imageBase64);\n        return imageBase64;\n    }\n/**\n * @param {?} cropCanvas\n * @return {?}\n */\nprivate cropToFile(cropCanvas: HTMLCanvasElement): Promise<Blob | null> {\n        return this.getCanvasBlob(cropCanvas)\n            .then((result: Blob | null) => {\n                if (result) {\n                    this.imageCroppedFile.emit(result);\n                }\n                return result;\n            });\n    }\n/**\n * @param {?} cropCanvas\n * @return {?}\n */\nprivate getCanvasBlob(cropCanvas: HTMLCanvasElement): Promise<Blob | null> {\n        return new Promise((resolve) => {\n            cropCanvas.toBlob(\n                (result: Blob | null) => this.zone.run(() => resolve(result)),\n                'image/' + this.format,\n                this.getQuality()\n            );\n        });\n    }\n/**\n * @return {?}\n */\nprivate getQuality(): number {\n        return Math.min(1, Math.max(0, this.imageQuality / 100));\n    }\n/**\n * @param {?} width\n * @param {?} height\n * @return {?}\n */\nprivate getResizeRatio(width: number, height: number): number {\n        if (this.resizeToWidth > 0) {\n            if (!this.onlyScaleDown || width > this.resizeToWidth) {\n                return this.resizeToWidth / width;\n            }\n        } else if (this.resizeToHeight > 0) {\n            if (!this.onlyScaleDown || height > this.resizeToHeight) {\n                return this.resizeToHeight / height;\n            }\n        }\n        return 1;\n\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate getClientX(event: any): number {\n        return event.clientX || event.touches && event.touches[0] && event.touches[0].clientX;\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate getClientY(event: any): number {\n        return event.clientY || event.touches && event.touches[0] && event.touches[0].clientY;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n    selector: 'image-cropper',\n    template: `\n      <div [style.background]=\"imageVisible && backgroundColor\">\n          <img\n              #sourceImage\n              class=\"source-image\"\n              [src]=\"safeImgDataUrl\"\n              [style.visibility]=\"imageVisible ? 'visible' : 'hidden'\"\n              (load)=\"imageLoadedInView()\"\n          />\n          <div class=\"cropper\"\n               *ngIf=\"imageVisible\"\n               [class.rounded]=\"roundCropper\"\n               [style.top.px]=\"cropper.y1\"\n               [style.left.px]=\"cropper.x1\"\n               [style.width.px]=\"cropper.x2 - cropper.x1\"\n               [style.height.px]=\"cropper.y2 - cropper.y1\"\n               [style.margin-left]=\"alignImage === 'center' ? marginLeft : null\"\n               [style.visibility]=\"imageVisible ? 'visible' : 'hidden'\"\n          >\n              <div\n                      (mousedown)=\"startMove($event, 'move')\"\n                      (touchstart)=\"startMove($event, 'move')\"\n                      class=\"move\"\n              >&nbsp;</div>\n              <span\n                      class=\"resize topleft\"\n                      (mousedown)=\"startMove($event, 'resize', 'topleft')\"\n                      (touchstart)=\"startMove($event, 'resize', 'topleft')\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize top\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize topright\"\n                      (mousedown)=\"startMove($event, 'resize', 'topright')\"\n                      (touchstart)=\"startMove($event, 'resize', 'topright')\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize right\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize bottomright\"\n                      (mousedown)=\"startMove($event, 'resize', 'bottomright')\"\n                      (touchstart)=\"startMove($event, 'resize', 'bottomright')\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize bottom\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize bottomleft\"\n                      (mousedown)=\"startMove($event, 'resize', 'bottomleft')\"\n                      (touchstart)=\"startMove($event, 'resize', 'bottomleft')\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize left\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize-bar top\"\n                      (mousedown)=\"startMove($event, 'resize', 'top')\"\n                      (touchstart)=\"startMove($event, 'resize', 'top')\"\n              ></span>\n              <span\n                      class=\"resize-bar right\"\n                      (mousedown)=\"startMove($event, 'resize', 'right')\"\n                      (touchstart)=\"startMove($event, 'resize', 'right')\"\n              ></span>\n              <span\n                      class=\"resize-bar bottom\"\n                      (mousedown)=\"startMove($event, 'resize', 'bottom')\"\n                      (touchstart)=\"startMove($event, 'resize', 'bottom')\"\n              ></span>\n              <span\n                      class=\"resize-bar left\"\n                      (mousedown)=\"startMove($event, 'resize', 'left')\"\n                      (touchstart)=\"startMove($event, 'resize', 'left')\"\n              ></span>\n          </div>\n      </div>\n    `,\n    styles: [`\n      :host {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        position: relative;\n        width: 100%;\n        max-width: 100%;\n        max-height: 100%;\n        overflow: hidden;\n        padding: 5px;\n        text-align: center;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none; }\n        :host > div {\n          position: relative;\n          width: 100%; }\n          :host > div img.source-image {\n            max-width: 100%;\n            max-height: 100%; }\n        :host .cropper {\n          position: absolute;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          color: #53535C;\n          background: transparent;\n          outline-color: rgba(255, 255, 255, 0.3);\n          outline-width: 100vw;\n          outline-style: solid;\n          -ms-touch-action: none;\n              touch-action: none; }\n          @media (orientation: portrait) {\n            :host .cropper {\n              outline-width: 100vh; } }\n          :host .cropper:after {\n            position: absolute;\n            content: '';\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            pointer-events: none;\n            border: dashed 1px;\n            opacity: .75;\n            color: inherit;\n            z-index: 1; }\n          :host .cropper .move {\n            width: 100%;\n            cursor: move;\n            border: 1px solid rgba(255, 255, 255, 0.5); }\n          :host .cropper .resize {\n            position: absolute;\n            display: inline-block;\n            line-height: 6px;\n            padding: 8px;\n            opacity: .85;\n            z-index: 1; }\n            :host .cropper .resize .square {\n              display: inline-block;\n              background: #53535C;\n              width: 6px;\n              height: 6px;\n              border: 1px solid rgba(255, 255, 255, 0.5);\n              -webkit-box-sizing: content-box;\n                      box-sizing: content-box; }\n            :host .cropper .resize.topleft {\n              top: -12px;\n              left: -12px;\n              cursor: nwse-resize; }\n            :host .cropper .resize.top {\n              top: -12px;\n              left: calc(50% - 12px);\n              cursor: ns-resize; }\n            :host .cropper .resize.topright {\n              top: -12px;\n              right: -12px;\n              cursor: nesw-resize; }\n            :host .cropper .resize.right {\n              top: calc(50% - 12px);\n              right: -12px;\n              cursor: ew-resize; }\n            :host .cropper .resize.bottomright {\n              bottom: -12px;\n              right: -12px;\n              cursor: nwse-resize; }\n            :host .cropper .resize.bottom {\n              bottom: -12px;\n              left: calc(50% - 12px);\n              cursor: ns-resize; }\n            :host .cropper .resize.bottomleft {\n              bottom: -12px;\n              left: -12px;\n              cursor: nesw-resize; }\n            :host .cropper .resize.left {\n              top: calc(50% - 12px);\n              left: -12px;\n              cursor: ew-resize; }\n          :host .cropper .resize-bar {\n            position: absolute;\n            z-index: 1; }\n            :host .cropper .resize-bar.top {\n              top: -11px;\n              left: 11px;\n              width: calc(100% - 22px);\n              height: 22px;\n              cursor: ns-resize; }\n            :host .cropper .resize-bar.right {\n              top: 11px;\n              right: -11px;\n              height: calc(100% - 22px);\n              width: 22px;\n              cursor: ew-resize; }\n            :host .cropper .resize-bar.bottom {\n              bottom: -11px;\n              left: 11px;\n              width: calc(100% - 22px);\n              height: 22px;\n              cursor: ns-resize; }\n            :host .cropper .resize-bar.left {\n              top: 11px;\n              left: -11px;\n              height: calc(100% - 22px);\n              width: 22px;\n              cursor: ew-resize; }\n          :host .cropper.rounded {\n            outline-color: transparent; }\n            :host .cropper.rounded:after {\n              border-radius: 100%;\n              -webkit-box-shadow: 0 0 0 100vw rgba(255, 255, 255, 0.3);\n                      box-shadow: 0 0 0 100vw rgba(255, 255, 255, 0.3); }\n              @media (orientation: portrait) {\n                :host .cropper.rounded:after {\n                  -webkit-box-shadow: 0 0 0 100vh rgba(255, 255, 255, 0.3);\n                          box-shadow: 0 0 0 100vh rgba(255, 255, 255, 0.3); } }\n            :host .cropper.rounded .move {\n              border-radius: 100%; }\n    `],\n    changeDetection: ChangeDetectionStrategy.OnPush\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: DomSanitizer, },\n{type: ChangeDetectorRef, },\n{type: NgZone, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'sourceImage': [{ type: ViewChild, args: ['sourceImage', ] },],\n'imageFileChanged': [{ type: Input },],\n'imageChangedEvent': [{ type: Input },],\n'imageBase64': [{ type: Input },],\n'format': [{ type: Input },],\n'outputType': [{ type: Input },],\n'maintainAspectRatio': [{ type: Input },],\n'aspectRatio': [{ type: Input },],\n'resizeToWidth': [{ type: Input },],\n'resizeToHeight': [{ type: Input },],\n'cropperMinWidth': [{ type: Input },],\n'cropperMinHeight': [{ type: Input },],\n'roundCropper': [{ type: Input },],\n'onlyScaleDown': [{ type: Input },],\n'imageQuality': [{ type: Input },],\n'autoCrop': [{ type: Input },],\n'backgroundColor': [{ type: Input },],\n'containWithinAspectRatio': [{ type: Input },],\n'cropper': [{ type: Input },],\n'alignImage': [{ type: HostBinding, args: ['style.text-align', ] },{ type: Input },],\n'startCropImage': [{ type: Output },],\n'imageCropped': [{ type: Output },],\n'imageCroppedBase64': [{ type: Output },],\n'imageCroppedFile': [{ type: Output },],\n'imageLoaded': [{ type: Output },],\n'cropperReady': [{ type: Output },],\n'loadImageFailed': [{ type: Output },],\n'onResize': [{ type: HostListener, args: ['window:resize', ] },],\n'moveImg': [{ type: HostListener, args: ['document:mousemove', ['$event'], ] },{ type: HostListener, args: ['document:touchmove', ['$event'], ] },],\n'moveStop': [{ type: HostListener, args: ['document:mouseup', ] },{ type: HostListener, args: ['document:touchend', ] },],\n};\n}\n\nfunction ImageCropperComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nImageCropperComponent.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nImageCropperComponent.ctorParameters;\n/** @type {?} */\nImageCropperComponent.propDecorators;\n/** @type {?} */\nImageCropperComponent.prototype.originalImage;\n/** @type {?} */\nImageCropperComponent.prototype.originalBase64;\n/** @type {?} */\nImageCropperComponent.prototype.moveStart;\n/** @type {?} */\nImageCropperComponent.prototype.maxSize;\n/** @type {?} */\nImageCropperComponent.prototype.originalSize;\n/** @type {?} */\nImageCropperComponent.prototype.setImageMaxSizeRetries;\n/** @type {?} */\nImageCropperComponent.prototype.cropperScaledMinWidth;\n/** @type {?} */\nImageCropperComponent.prototype.cropperScaledMinHeight;\n/** @type {?} */\nImageCropperComponent.prototype.safeImgDataUrl;\n/** @type {?} */\nImageCropperComponent.prototype.marginLeft;\n/** @type {?} */\nImageCropperComponent.prototype.imageVisible;\n/** @type {?} */\nImageCropperComponent.prototype.sourceImage;\n/** @type {?} */\nImageCropperComponent.prototype.format;\n/** @type {?} */\nImageCropperComponent.prototype.outputType;\n/** @type {?} */\nImageCropperComponent.prototype.maintainAspectRatio;\n/** @type {?} */\nImageCropperComponent.prototype.aspectRatio;\n/** @type {?} */\nImageCropperComponent.prototype.resizeToWidth;\n/** @type {?} */\nImageCropperComponent.prototype.resizeToHeight;\n/** @type {?} */\nImageCropperComponent.prototype.cropperMinWidth;\n/** @type {?} */\nImageCropperComponent.prototype.cropperMinHeight;\n/** @type {?} */\nImageCropperComponent.prototype.roundCropper;\n/** @type {?} */\nImageCropperComponent.prototype.onlyScaleDown;\n/** @type {?} */\nImageCropperComponent.prototype.imageQuality;\n/** @type {?} */\nImageCropperComponent.prototype.autoCrop;\n/** @type {?} */\nImageCropperComponent.prototype.backgroundColor;\n/** @type {?} */\nImageCropperComponent.prototype.containWithinAspectRatio;\n/** @type {?} */\nImageCropperComponent.prototype.cropper;\n/** @type {?} */\nImageCropperComponent.prototype.alignImage;\n/** @type {?} */\nImageCropperComponent.prototype.startCropImage;\n/** @type {?} */\nImageCropperComponent.prototype.imageCropped;\n/** @type {?} */\nImageCropperComponent.prototype.imageCroppedBase64;\n/** @type {?} */\nImageCropperComponent.prototype.imageCroppedFile;\n/** @type {?} */\nImageCropperComponent.prototype.imageLoaded;\n/** @type {?} */\nImageCropperComponent.prototype.cropperReady;\n/** @type {?} */\nImageCropperComponent.prototype.loadImageFailed;\n/** @type {?} */\nImageCropperComponent.prototype.sanitizer;\n/** @type {?} */\nImageCropperComponent.prototype.cd;\n/** @type {?} */\nImageCropperComponent.prototype.zone;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","\n/**\n * @param {?} canvas\n * @param {?} width\n * @param {?} height\n * @param {?=} resizeCanvas\n * @return {?}\n */\nexport function resizeCanvas(canvas: HTMLCanvasElement, width: number, height: number, resizeCanvas = true) {\n    const /** @type {?} */ width_source = canvas.width;\n    const /** @type {?} */ height_source = canvas.height;\n    width = Math.round(width);\n    height = Math.round(height);\n\n    const /** @type {?} */ ratio_w = width_source / width;\n    const /** @type {?} */ ratio_h = height_source / height;\n    const /** @type {?} */ ratio_w_half = Math.ceil(ratio_w / 2);\n    const /** @type {?} */ ratio_h_half = Math.ceil(ratio_h / 2);\n\n    const /** @type {?} */ ctx = canvas.getContext('2d');\n    if (ctx) {\n        const /** @type {?} */ img = ctx.getImageData(0, 0, width_source, height_source);\n        const /** @type {?} */ img2 = ctx.createImageData(width, height);\n        const /** @type {?} */ data = img.data;\n        const /** @type {?} */ data2 = img2.data;\n\n        for (let /** @type {?} */ j = 0; j < height; j++) {\n            for (let /** @type {?} */ i = 0; i < width; i++) {\n                const /** @type {?} */ x2 = (i + j * width) * 4;\n                const /** @type {?} */ center_y = j * ratio_h;\n                let /** @type {?} */ weight = 0;\n                let /** @type {?} */ weights = 0;\n                let /** @type {?} */ weights_alpha = 0;\n                let /** @type {?} */ gx_r = 0;\n                let /** @type {?} */ gx_g = 0;\n                let /** @type {?} */ gx_b = 0;\n                let /** @type {?} */ gx_a = 0;\n\n                const /** @type {?} */ xx_start = Math.floor(i * ratio_w);\n                const /** @type {?} */ yy_start = Math.floor(j * ratio_h);\n                let /** @type {?} */ xx_stop = Math.ceil((i + 1) * ratio_w);\n                let /** @type {?} */ yy_stop = Math.ceil((j + 1) * ratio_h);\n                xx_stop = Math.min(xx_stop, width_source);\n                yy_stop = Math.min(yy_stop, height_source);\n\n                for (let /** @type {?} */ yy = yy_start; yy < yy_stop; yy++) {\n                    const /** @type {?} */ dy = Math.abs(center_y - yy) / ratio_h_half;\n                    const /** @type {?} */ center_x = i * ratio_w;\n                    const /** @type {?} */ w0 = dy * dy; //pre-calc part of w\n                    for (let /** @type {?} */ xx = xx_start; xx < xx_stop; xx++) {\n                        const /** @type {?} */ dx = Math.abs(center_x - xx) / ratio_w_half;\n                        const /** @type {?} */ w = Math.sqrt(w0 + dx * dx);\n                        if (w >= 1) {\n                            //pixel too far\n                            continue;\n                        }\n                        //hermite filter\n                        weight = 2 * w * w * w - 3 * w * w + 1;\n                        const /** @type {?} */ pos_x = 4 * (xx + yy * width_source);\n                        //alpha\n                        gx_a += weight * data[pos_x + 3];\n                        weights_alpha += weight;\n                        //colors\n                        if (data[pos_x + 3] < 255)\n                            weight = weight * data[pos_x + 3] / 250;\n                        gx_r += weight * data[pos_x];\n                        gx_g += weight * data[pos_x + 1];\n                        gx_b += weight * data[pos_x + 2];\n                        weights += weight;\n                    }\n                }\n                data2[x2] = gx_r / weights;\n                data2[x2 + 1] = gx_g / weights;\n                data2[x2 + 2] = gx_b / weights;\n                data2[x2 + 3] = gx_a / weights_alpha;\n            }\n        }\n        //clear and resize canvas\n        if (resizeCanvas) {\n            canvas.width = width;\n            canvas.height = height;\n        }\n        else {\n            ctx.clearRect(0, 0, width_source, height_source);\n        }\n\n        //draw\n        ctx.putImageData(img2, 0, 0);\n    }\n}\n/**\n * @param {?} srcBase64\n * @param {?} aspectRatio\n * @return {?}\n */\nexport function fitImageToAspectRatio(srcBase64: string, aspectRatio: number): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const /** @type {?} */ img = new Image();\n        img.onload = function () {\n            const /** @type {?} */ canvas = document.createElement('canvas');\n            const /** @type {?} */ ctx = canvas.getContext('2d');\n\n            if (ctx) {\n                const /** @type {?} */ minWidthToContain = img.height * aspectRatio;\n                const /** @type {?} */ minHeightToContain = img.width / aspectRatio;\n                canvas.width = Math.max(img.width, minWidthToContain);\n                canvas.height = Math.max(img.height, minHeightToContain);\n                const /** @type {?} */ dx = (canvas.width - img.width) / 2;\n                const /** @type {?} */ dy = (canvas.height - img.height) / 2;\n                ctx.drawImage(img, dx, dy);\n                resolve(canvas.toDataURL());\n            } else {\n                reject(new Error('No context'));\n            }\n        };\n        img.src = srcBase64;\n    });\n}\n","\n/**\n * @param {?} srcBase64\n * @return {?}\n */\nexport function resetExifOrientation(srcBase64: string): Promise<string> {\n    try {\n        const /** @type {?} */ exifRotation = getExifRotation(srcBase64);\n        if (exifRotation > 1) {\n            return transformBase64BasedOnExifRotation(srcBase64, exifRotation);\n        } else {\n            return Promise.resolve(srcBase64);\n        }\n    } catch ( /** @type {?} */ex) {\n        return Promise.reject(ex);\n    }\n}\n/**\n * @param {?} srcBase64\n * @param {?} exifRotation\n * @return {?}\n */\nexport function transformBase64BasedOnExifRotation(srcBase64: string, exifRotation: number): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const /** @type {?} */ img = new Image();\n        img.onload = function () {\n            const /** @type {?} */ width = img.width;\n            const /** @type {?} */ height = img.height;\n            const /** @type {?} */ canvas = document.createElement('canvas');\n            const /** @type {?} */ ctx = canvas.getContext('2d');\n\n            if (ctx) {\n                if (4 < exifRotation && exifRotation < 9) {\n                    canvas.width = height;\n                    canvas.height = width;\n                } else {\n                    canvas.width = width;\n                    canvas.height = height;\n                }\n                transformCanvas(ctx, exifRotation, width, height);\n                ctx.drawImage(img, 0, 0);\n                resolve(canvas.toDataURL());\n            } else {\n                reject(new Error('No context'));\n            }\n        };\n        img.src = srcBase64;\n    });\n}\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nfunction getExifRotation(imageBase64: string): number {\n    const /** @type {?} */ view = new DataView(base64ToArrayBuffer(imageBase64));\n    if (view.getUint16(0, false) != 0xFFD8) {\n        return -2;\n    }\n    const /** @type {?} */ length = view.byteLength;\n    let /** @type {?} */ offset = 2;\n    while (offset < length) {\n        if (view.getUint16(offset + 2, false) <= 8) return -1;\n        const /** @type {?} */ marker = view.getUint16(offset, false);\n        offset += 2;\n        if (marker == 0xFFE1) {\n            if (view.getUint32(offset += 2, false) != 0x45786966) {\n                return -1;\n            }\n\n            const /** @type {?} */ little = view.getUint16(offset += 6, false) == 0x4949;\n            offset += view.getUint32(offset + 4, little);\n            const /** @type {?} */ tags = view.getUint16(offset, little);\n            offset += 2;\n            for (let /** @type {?} */ i = 0; i < tags; i++) {\n                if (view.getUint16(offset + (i * 12), little) == 0x0112) {\n                    return view.getUint16(offset + (i * 12) + 8, little);\n                }\n            }\n        }\n        else if ((marker & 0xFF00) != 0xFF00) {\n            break;\n        }\n        else {\n            offset += view.getUint16(offset, false);\n        }\n    }\n    return -1;\n}\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nfunction base64ToArrayBuffer(imageBase64: string) {\n    imageBase64 = imageBase64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n    const /** @type {?} */ binaryString = atob(imageBase64);\n    const /** @type {?} */ len = binaryString.length;\n    const /** @type {?} */ bytes = new Uint8Array(len);\n    for (let /** @type {?} */ i = 0; i < len; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n}\n/**\n * @param {?} ctx\n * @param {?} orientation\n * @param {?} width\n * @param {?} height\n * @return {?}\n */\nfunction transformCanvas(ctx: any, orientation: number, width: number, height: number) {\n    switch (orientation) {\n        case 2:\n            ctx.transform(-1, 0, 0, 1, width, 0);\n            break;\n        case 3:\n            ctx.transform(-1, 0, 0, -1, width, height);\n            break;\n        case 4:\n            ctx.transform(1, 0, 0, -1, 0, height);\n            break;\n        case 5:\n            ctx.transform(0, 1, 1, 0, 0, 0);\n            break;\n        case 6:\n            ctx.transform(0, 1, -1, 0, height, 0);\n            break;\n        case 7:\n            ctx.transform(0, -1, -1, 0, height, width);\n            break;\n        case 8:\n            ctx.transform(0, -1, 1, 0, 0, width);\n            break;\n    }\n}\n"],"names":[],"mappings":"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"}
