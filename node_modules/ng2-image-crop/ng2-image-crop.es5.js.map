{"version":3,"file":"ng2-image-crop.es5.js","sources":["ts/ng2-image-crop.ts","ts/src/image-cropper.module.ts","ts/src/component/image-cropper.component.ts","ts/src/utils/resize.utils.ts","ts/src/utils/exif.utils.ts"],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport {ImageCropperModule,OutputType,ImageCropperComponent,CropperPosition,ImageCroppedEvent} from './index';\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ImageCropperComponent } from './component/image-cropper.component';\nexport class ImageCropperModule {static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        ImageCropperComponent\n    ],\n    exports: [\n        ImageCropperComponent\n    ]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ImageCropperModule_tsickle_Closure_declarations() {\n/** @type {?} */\nImageCropperModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nImageCropperModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import {\n    Component, ElementRef, EventEmitter, HostBinding, HostListener, Input, OnChanges, Output,\n    SimpleChanges, ChangeDetectorRef, ChangeDetectionStrategy, NgZone, ViewChild\n} from '@angular/core';\nimport { DomSanitizer, SafeUrl, SafeStyle } from '@angular/platform-browser';\nimport { MoveStart, Dimensions, CropperPosition, ImageCroppedEvent } from '../interfaces';\nimport { resetExifOrientation, transformBase64BasedOnExifRotation } from '../utils/exif.utils';\nimport { resizeCanvas, fitImageToAspectRatio } from '../utils/resize.utils';\n\nexport type OutputType = 'base64' | 'file' | 'both';\nexport class ImageCropperComponent implements OnChanges {\nprivate originalImage: any;\nprivate originalBase64: string;\nprivate moveStart: MoveStart;\nprivate maxSize: Dimensions;\nprivate originalSize: Dimensions;\nprivate setImageMaxSizeRetries = 0;\nprivate cropperScaledMinWidth = 20;\nprivate cropperScaledMinHeight = 20;\n\n    safeImgDataUrl: SafeUrl | string;\n    marginLeft: SafeStyle | string = '0px';\n    imageVisible = false;\n\n     sourceImage: ElementRef;\n/**\n * @param {?} file\n * @return {?}\n */\nset imageFileChanged(file: any) {\n        this.initCropper();\n        if (file) {\n            this.loadImageFile(file);\n        }\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nset imageChangedEvent(event: any) {\n        this.initCropper();\n        if (event && event.target && event.target.files && event.target.files.length > 0) {\n            this.loadImageFile(event.target.files[0]);\n        }\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nset imageBase64(imageBase64: string) {\n        this.initCropper();\n        this.checkExifAndLoadBase64Image(imageBase64);\n    }\n\n     format: 'png' | 'jpeg' | 'bmp' | 'webp' | 'ico' = 'png';\n     outputType: OutputType = 'both';\n     maintainAspectRatio = true;\n     aspectRatio = 1;\n     resizeToWidth = 0;\n     resizeToHeight = 0;\n     cropperMinWidth = 0;\n     cropperMinHeight = 0;\n     roundCropper = false;\n     onlyScaleDown = false;\n     imageQuality = 92;\n     autoCrop = true;\n     backgroundColor: string;\n     containWithinAspectRatio = false;\n     cropper: CropperPosition = {\n        x1: -100,\n        y1: -100,\n        x2: 10000,\n        y2: 10000\n    };\n    \n     alignImage: 'left' | 'center' = 'center';\n\n\n     startCropImage = new EventEmitter<void>();\n     imageCropped = new EventEmitter<ImageCroppedEvent>();\n     imageCroppedBase64 = new EventEmitter<string>();\n     imageCroppedFile = new EventEmitter<Blob>();\n     imageLoaded = new EventEmitter<void>();\n     cropperReady = new EventEmitter<void>();\n     loadImageFailed = new EventEmitter<void>();\n/**\n * @param {?} sanitizer\n * @param {?} cd\n * @param {?} zone\n */\nconstructor(private sanitizer: DomSanitizer,\nprivate cd: ChangeDetectorRef,\nprivate zone: NgZone) {\n        this.initCropper();\n    }\n/**\n * @param {?} changes\n * @return {?}\n */\nngOnChanges(changes: SimpleChanges): void {\n        if (changes.cropper) {\n            this.setMaxSize();\n            this.setCropperScaledMinSize();\n            this.checkCropperPosition(false);\n            this.doAutoCrop();\n            this.cd.markForCheck();\n        }\n        if (changes.aspectRatio && this.imageVisible) {\n            this.resetCropperPosition();\n        }\n    }\n/**\n * @return {?}\n */\nprivate initCropper(): void {\n        this.imageVisible = false;\n        this.originalImage = null;\n        this.safeImgDataUrl = 'data:image/png;base64,iVBORw0KGg'\n            + 'oAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAU'\n            + 'AAarVyFEAAAAASUVORK5CYII=';\n        this.moveStart = {\n            active: false,\n            type: null,\n            position: null,\n            x1: 0,\n            y1: 0,\n            x2: 0,\n            y2: 0,\n            clientX: 0,\n            clientY: 0\n        };\n        this.maxSize = {\n            width: 0,\n            height: 0\n        };\n        this.originalSize = {\n            width: 0,\n            height: 0\n        };\n        this.cropper.x1 = -100;\n        this.cropper.y1 = -100;\n        this.cropper.x2 = 10000;\n        this.cropper.y2 = 10000;\n    }\n/**\n * @param {?} file\n * @return {?}\n */\nprivate loadImageFile(file: any): void {\n        const /** @type {?} */ fileReader = new FileReader();\n        fileReader.onload = (event: any) => {\n            const /** @type {?} */ imageType = file.type;\n            if (this.isValidImageType(imageType)) {\n                this.checkExifAndLoadBase64Image(event.target.result);\n            } else {\n                this.loadImageFailed.emit();\n            }\n        };\n        fileReader.readAsDataURL(file);\n    }\n/**\n * @param {?} type\n * @return {?}\n */\nprivate isValidImageType(type: string): boolean {\n        return /image\\/(png|jpg|jpeg|bmp|gif|tiff)/.test(type);\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nprivate checkExifAndLoadBase64Image(imageBase64: string): void {\n        resetExifOrientation(imageBase64)\n            .then((resultBase64: string) => this.fitImageToAspectRatio(resultBase64))\n            .then((resultBase64: string) => this.loadBase64Image(resultBase64))\n            .catch(() => this.loadImageFailed.emit());\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nprivate fitImageToAspectRatio(imageBase64: string): Promise<string> {\n        return this.containWithinAspectRatio\n            ? fitImageToAspectRatio(imageBase64, this.aspectRatio)\n            : Promise.resolve(imageBase64);\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nprivate loadBase64Image(imageBase64: string): void {\n        this.originalBase64 = imageBase64;\n        this.safeImgDataUrl = this.sanitizer.bypassSecurityTrustResourceUrl(imageBase64);\n        this.originalImage = new Image();\n        this.originalImage.onload = () => {\n            this.originalSize.width = this.originalImage.width;\n            this.originalSize.height = this.originalImage.height;\n            this.cd.markForCheck();\n        };\n        this.originalImage.src = imageBase64;\n    }\n/**\n * @return {?}\n */\nimageLoadedInView(): void {\n        if (this.originalImage != null) {\n            this.imageLoaded.emit();\n            this.setImageMaxSizeRetries = 0;\n            setTimeout(() => this.checkImageMaxSizeRecursively());\n        }\n    }\n/**\n * @return {?}\n */\nprivate checkImageMaxSizeRecursively(): void {\n        if (this.setImageMaxSizeRetries > 40) {\n            this.loadImageFailed.emit();\n        } else if (this.sourceImage && this.sourceImage.nativeElement && this.sourceImage.nativeElement.offsetWidth > 0) {\n            this.setMaxSize();\n            this.setCropperScaledMinSize();\n            this.resetCropperPosition();\n            this.cropperReady.emit();\n            this.cd.markForCheck();\n        } else {\n            this.setImageMaxSizeRetries++;\n            setTimeout(() => {\n                this.checkImageMaxSizeRecursively();\n            }, 50);\n        }\n    }\n/**\n * @return {?}\n */\nonResize(): void {\n        this.resizeCropperPosition();\n        this.setMaxSize();\n        this.setCropperScaledMinSize();\n    }\n/**\n * @return {?}\n */\nrotateLeft() {\n        this.transformBase64(8);\n    }\n/**\n * @return {?}\n */\nrotateRight() {\n        this.transformBase64(6);\n    }\n/**\n * @return {?}\n */\nflipHorizontal() {\n        this.transformBase64(2);\n    }\n/**\n * @return {?}\n */\nflipVertical() {\n        this.transformBase64(4);\n    }\n/**\n * @param {?} exifOrientation\n * @return {?}\n */\nprivate transformBase64(exifOrientation: number): void {\n        if (this.originalBase64) {\n            transformBase64BasedOnExifRotation(this.originalBase64, exifOrientation)\n                .then((resultBase64: string) => this.fitImageToAspectRatio(resultBase64))\n                .then((rotatedBase64: string) => this.loadBase64Image(rotatedBase64));\n        }\n    }\n/**\n * @return {?}\n */\nprivate resizeCropperPosition(): void {\n        const /** @type {?} */ sourceImageElement = this.sourceImage.nativeElement;\n        if (this.maxSize.width !== sourceImageElement.offsetWidth || this.maxSize.height !== sourceImageElement.offsetHeight) {\n            this.cropper.x1 = this.cropper.x1 * sourceImageElement.offsetWidth / this.maxSize.width;\n            this.cropper.x2 = this.cropper.x2 * sourceImageElement.offsetWidth / this.maxSize.width;\n            this.cropper.y1 = this.cropper.y1 * sourceImageElement.offsetHeight / this.maxSize.height;\n            this.cropper.y2 = this.cropper.y2 * sourceImageElement.offsetHeight / this.maxSize.height;\n        }\n    }\n/**\n * @return {?}\n */\nprivate resetCropperPosition(): void {\n        const /** @type {?} */ sourceImageElement = this.sourceImage.nativeElement;\n        if (!this.maintainAspectRatio) {\n            this.cropper.x1 = 0;\n            this.cropper.x2 = sourceImageElement.offsetWidth;\n            this.cropper.y1 = 0;\n            this.cropper.y2 = sourceImageElement.offsetHeight;\n        } else if (sourceImageElement.offsetWidth / this.aspectRatio < sourceImageElement.offsetHeight) {\n            this.cropper.x1 = 0;\n            this.cropper.x2 = sourceImageElement.offsetWidth;\n            const /** @type {?} */ cropperHeight = sourceImageElement.offsetWidth / this.aspectRatio;\n            this.cropper.y1 = (sourceImageElement.offsetHeight - cropperHeight) / 2;\n            this.cropper.y2 = this.cropper.y1 + cropperHeight;\n        } else {\n            this.cropper.y1 = 0;\n            this.cropper.y2 = sourceImageElement.offsetHeight;\n            const /** @type {?} */ cropperWidth = sourceImageElement.offsetHeight * this.aspectRatio;\n            this.cropper.x1 = (sourceImageElement.offsetWidth - cropperWidth) / 2;\n            this.cropper.x2 = this.cropper.x1 + cropperWidth;\n        }\n        this.doAutoCrop();\n        this.imageVisible = true;\n    }\n/**\n * @param {?} event\n * @param {?} moveType\n * @param {?=} position\n * @return {?}\n */\nstartMove(event: any, moveType: string, position: string | null = null): void {\n        event.preventDefault();\n        this.moveStart = {\n            active: true,\n            type: moveType,\n            position,\n            clientX: this.getClientX(event),\n            clientY: this.getClientY(event),\n            ...this.cropper\n        };\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nmoveImg(event: any): void {\n        if (this.moveStart.active) {\n            event.stopPropagation();\n            event.preventDefault();\n            if (this.moveStart.type === 'move') {\n                this.move(event);\n                this.checkCropperPosition(true);\n            } else if (this.moveStart.type === 'resize') {\n                this.resize(event);\n                this.checkCropperPosition(false);\n            }\n            this.cd.detectChanges();\n        }\n    }\n/**\n * @return {?}\n */\nprivate setMaxSize(): void {\n        const /** @type {?} */ sourceImageElement = this.sourceImage.nativeElement;\n        this.maxSize.width = sourceImageElement.offsetWidth;\n        this.maxSize.height = sourceImageElement.offsetHeight;\n        this.marginLeft = this.sanitizer.bypassSecurityTrustStyle('calc(50% - ' + this.maxSize.width / 2 + 'px)');\n    }\n/**\n * @return {?}\n */\nprivate setCropperScaledMinSize(): void {\n        if (this.originalImage) {\n            this.setCropperScaledMinWidth();\n            this.setCropperScaledMinHeight();\n        } else {\n            this.cropperScaledMinWidth = 20;\n            this.cropperScaledMinHeight = 20;\n        }\n    }\n/**\n * @return {?}\n */\nprivate setCropperScaledMinWidth(): void {\n        this.cropperScaledMinWidth = this.cropperMinWidth > 0\n            ? Math.max(20, this.cropperMinWidth / this.originalImage.width * this.maxSize.width)\n            : 20;\n    }\n/**\n * @return {?}\n */\nprivate setCropperScaledMinHeight(): void {\n        if (this.maintainAspectRatio) {\n            this.cropperScaledMinHeight = Math.max(20, this.cropperScaledMinWidth / this.aspectRatio);\n        } else if (this.cropperMinHeight > 0) {\n            this.cropperScaledMinHeight = Math.max(20, this.cropperMinHeight / this.originalImage.height * this.maxSize.height);\n        } else {\n            this.cropperScaledMinHeight = 20;\n        }\n    }\n/**\n * @param {?=} maintainSize\n * @return {?}\n */\nprivate checkCropperPosition(maintainSize = false): void {\n        if (this.cropper.x1 < 0) {\n            this.cropper.x2 -= maintainSize ? this.cropper.x1 : 0;\n            this.cropper.x1 = 0;\n        }\n        if (this.cropper.y1 < 0) {\n            this.cropper.y2 -= maintainSize ? this.cropper.y1 : 0;\n            this.cropper.y1 = 0;\n        }\n        if (this.cropper.x2 > this.maxSize.width) {\n            this.cropper.x1 -= maintainSize ? (this.cropper.x2 - this.maxSize.width) : 0;\n            this.cropper.x2 = this.maxSize.width;\n        }\n        if (this.cropper.y2 > this.maxSize.height) {\n            this.cropper.y1 -= maintainSize ? (this.cropper.y2 - this.maxSize.height) : 0;\n            this.cropper.y2 = this.maxSize.height;\n        }\n    }\n/**\n * @return {?}\n */\nmoveStop(): void {\n        if (this.moveStart.active) {\n            this.moveStart.active = false;\n            this.doAutoCrop();\n        }\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate move(event: any) {\n        const /** @type {?} */ diffX = this.getClientX(event) - this.moveStart.clientX;\n        const /** @type {?} */ diffY = this.getClientY(event) - this.moveStart.clientY;\n\n        this.cropper.x1 = this.moveStart.x1 + diffX;\n        this.cropper.y1 = this.moveStart.y1 + diffY;\n        this.cropper.x2 = this.moveStart.x2 + diffX;\n        this.cropper.y2 = this.moveStart.y2 + diffY;\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate resize(event: any): void {\n        const /** @type {?} */ diffX = this.getClientX(event) - this.moveStart.clientX;\n        const /** @type {?} */ diffY = this.getClientY(event) - this.moveStart.clientY;\n        switch (this.moveStart.position) {\n            case 'left':\n                this.cropper.x1 = Math.min(this.moveStart.x1 + diffX, this.cropper.x2 - this.cropperScaledMinWidth);\n                break;\n            case 'topleft':\n                this.cropper.x1 = Math.min(this.moveStart.x1 + diffX, this.cropper.x2 - this.cropperScaledMinWidth);\n                this.cropper.y1 = Math.min(this.moveStart.y1 + diffY, this.cropper.y2 - this.cropperScaledMinHeight);\n                break;\n            case 'top':\n                this.cropper.y1 = Math.min(this.moveStart.y1 + diffY, this.cropper.y2 - this.cropperScaledMinHeight);\n                break;\n            case 'topright':\n                this.cropper.x2 = Math.max(this.moveStart.x2 + diffX, this.cropper.x1 + this.cropperScaledMinWidth);\n                this.cropper.y1 = Math.min(this.moveStart.y1 + diffY, this.cropper.y2 - this.cropperScaledMinHeight);\n                break;\n            case 'right':\n                this.cropper.x2 = Math.max(this.moveStart.x2 + diffX, this.cropper.x1 + this.cropperScaledMinWidth);\n                break;\n            case 'bottomright':\n                this.cropper.x2 = Math.max(this.moveStart.x2 + diffX, this.cropper.x1 + this.cropperScaledMinWidth);\n                this.cropper.y2 = Math.max(this.moveStart.y2 + diffY, this.cropper.y1 + this.cropperScaledMinHeight);\n                break;\n            case 'bottom':\n                this.cropper.y2 = Math.max(this.moveStart.y2 + diffY, this.cropper.y1 + this.cropperScaledMinHeight);\n                break;\n            case 'bottomleft':\n                this.cropper.x1 = Math.min(this.moveStart.x1 + diffX, this.cropper.x2 - this.cropperScaledMinWidth);\n                this.cropper.y2 = Math.max(this.moveStart.y2 + diffY, this.cropper.y1 + this.cropperScaledMinHeight);\n                break;\n        }\n\n        if (this.maintainAspectRatio) {\n            this.checkAspectRatio();\n        }\n    }\n/**\n * @return {?}\n */\nprivate checkAspectRatio(): void {\n        let /** @type {?} */ overflowX = 0;\n        let /** @type {?} */ overflowY = 0;\n\n        switch (this.moveStart.position) {\n            case 'top':\n                this.cropper.x2 = this.cropper.x1 + (this.cropper.y2 - this.cropper.y1) * this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(0 - this.cropper.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y1 += (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'bottom':\n                this.cropper.x2 = this.cropper.x1 + (this.cropper.y2 - this.cropper.y1) * this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(this.cropper.y2 - this.maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y2 -= (overflowY * this.aspectRatio) > overflowX ? overflowY : (overflowX / this.aspectRatio);\n                }\n                break;\n            case 'topleft':\n                this.cropper.y1 = this.cropper.y2 - (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(0 - this.cropper.x1, 0);\n                overflowY = Math.max(0 - this.cropper.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x1 += (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y1 += (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'topright':\n                this.cropper.y1 = this.cropper.y2 - (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(0 - this.cropper.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y1 += (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'right':\n            case 'bottomright':\n                this.cropper.y2 = this.cropper.y1 + (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(this.cropper.y2 - this.maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y2 -= (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'left':\n            case 'bottomleft':\n                this.cropper.y2 = this.cropper.y1 + (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(0 - this.cropper.x1, 0);\n                overflowY = Math.max(this.cropper.y2 - this.maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x1 += (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y2 -= (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n        }\n    }\n/**\n * @return {?}\n */\nprivate doAutoCrop(): void {\n        if (this.autoCrop) {\n            this.crop();\n        }\n    }\n/**\n * @param {?=} outputType\n * @return {?}\n */\ncrop(outputType: OutputType = this.outputType): ImageCroppedEvent | Promise<ImageCroppedEvent> | null {\n        if (this.sourceImage.nativeElement && this.originalImage != null) {\n            this.startCropImage.emit();\n            const /** @type {?} */ imagePosition = this.getImagePosition();\n            const /** @type {?} */ width = imagePosition.x2 - imagePosition.x1;\n            const /** @type {?} */ height = imagePosition.y2 - imagePosition.y1;\n\n            const /** @type {?} */ cropCanvas = /** @type {?} */(( document.createElement('canvas') as HTMLCanvasElement));\n            cropCanvas.width = width;\n            cropCanvas.height = height;\n\n            const /** @type {?} */ ctx = cropCanvas.getContext('2d');\n            if (ctx) {\n                if (this.backgroundColor != null) {\n                    ctx.fillStyle = this.backgroundColor;\n                    ctx.fillRect(0, 0, width, height);\n                }\n                ctx.drawImage(\n                    this.originalImage,\n                    imagePosition.x1,\n                    imagePosition.y1,\n                    width,\n                    height,\n                    0,\n                    0,\n                    width,\n                    height\n                );\n                const /** @type {?} */ output = {width, height, imagePosition, cropperPosition: {...this.cropper}};\n                const /** @type {?} */ resizeRatio = this.getResizeRatio(width, height);\n                if (resizeRatio !== 1) {\n                    output.width = Math.round(width * resizeRatio);\n                    output.height = this.maintainAspectRatio\n                        ? Math.round(output.width / this.aspectRatio)\n                        : Math.round(height * resizeRatio);\n                    resizeCanvas(cropCanvas, output.width, output.height);\n                }\n                return this.cropToOutputType(outputType, cropCanvas, output);\n            }\n        }\n        return null;\n    }\n/**\n * @return {?}\n */\nprivate getImagePosition(): CropperPosition {\n        const /** @type {?} */ sourceImageElement = this.sourceImage.nativeElement;\n        const /** @type {?} */ ratio = this.originalSize.width / sourceImageElement.offsetWidth;\n        return {\n            x1: Math.round(this.cropper.x1 * ratio),\n            y1: Math.round(this.cropper.y1 * ratio),\n            x2: Math.min(Math.round(this.cropper.x2 * ratio), this.originalSize.width),\n            y2: Math.min(Math.round(this.cropper.y2 * ratio), this.originalSize.height)\n        };\n    }\n/**\n * @param {?} outputType\n * @param {?} cropCanvas\n * @param {?} output\n * @return {?}\n */\nprivate cropToOutputType(outputType: OutputType, cropCanvas: HTMLCanvasElement, output: ImageCroppedEvent): ImageCroppedEvent | Promise<ImageCroppedEvent> {\n        switch (outputType) {\n            case 'file':\n                return this.cropToFile(cropCanvas)\n                    .then((result: Blob | null) => {\n                        output.file = result;\n                        this.imageCropped.emit(output);\n                        return output;\n                    });\n            case 'both':\n                output.base64 = this.cropToBase64(cropCanvas);\n                return this.cropToFile(cropCanvas)\n                    .then((result: Blob | null) => {\n                        output.file = result;\n                        this.imageCropped.emit(output);\n                        return output;\n                    });\n            default:\n                output.base64 = this.cropToBase64(cropCanvas);\n                this.imageCropped.emit(output);\n                return output;\n        }\n    }\n/**\n * @param {?} cropCanvas\n * @return {?}\n */\nprivate cropToBase64(cropCanvas: HTMLCanvasElement): string {\n        const /** @type {?} */ imageBase64 = cropCanvas.toDataURL('image/' + this.format, this.getQuality());\n        this.imageCroppedBase64.emit(imageBase64);\n        return imageBase64;\n    }\n/**\n * @param {?} cropCanvas\n * @return {?}\n */\nprivate cropToFile(cropCanvas: HTMLCanvasElement): Promise<Blob | null> {\n        return this.getCanvasBlob(cropCanvas)\n            .then((result: Blob | null) => {\n                if (result) {\n                    this.imageCroppedFile.emit(result);\n                }\n                return result;\n            });\n    }\n/**\n * @param {?} cropCanvas\n * @return {?}\n */\nprivate getCanvasBlob(cropCanvas: HTMLCanvasElement): Promise<Blob | null> {\n        return new Promise((resolve) => {\n            cropCanvas.toBlob(\n                (result: Blob | null) => this.zone.run(() => resolve(result)),\n                'image/' + this.format,\n                this.getQuality()\n            );\n        });\n    }\n/**\n * @return {?}\n */\nprivate getQuality(): number {\n        return Math.min(1, Math.max(0, this.imageQuality / 100));\n    }\n/**\n * @param {?} width\n * @param {?} height\n * @return {?}\n */\nprivate getResizeRatio(width: number, height: number): number {\n        if (this.resizeToWidth > 0) {\n            if (!this.onlyScaleDown || width > this.resizeToWidth) {\n                return this.resizeToWidth / width;\n            }\n        } else if (this.resizeToHeight > 0) {\n            if (!this.onlyScaleDown || height > this.resizeToHeight) {\n                return this.resizeToHeight / height;\n            }\n        }\n        return 1;\n\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate getClientX(event: any): number {\n        return event.clientX || event.touches && event.touches[0] && event.touches[0].clientX;\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate getClientY(event: any): number {\n        return event.clientY || event.touches && event.touches[0] && event.touches[0].clientY;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n    selector: 'image-cropper',\n    template: `\n      <div [style.background]=\"imageVisible && backgroundColor\">\n          <img\n              #sourceImage\n              class=\"source-image\"\n              [src]=\"safeImgDataUrl\"\n              [style.visibility]=\"imageVisible ? 'visible' : 'hidden'\"\n              (load)=\"imageLoadedInView()\"\n          />\n          <div class=\"cropper\"\n               *ngIf=\"imageVisible\"\n               [class.rounded]=\"roundCropper\"\n               [style.top.px]=\"cropper.y1\"\n               [style.left.px]=\"cropper.x1\"\n               [style.width.px]=\"cropper.x2 - cropper.x1\"\n               [style.height.px]=\"cropper.y2 - cropper.y1\"\n               [style.margin-left]=\"alignImage === 'center' ? marginLeft : null\"\n               [style.visibility]=\"imageVisible ? 'visible' : 'hidden'\"\n          >\n              <div\n                      (mousedown)=\"startMove($event, 'move')\"\n                      (touchstart)=\"startMove($event, 'move')\"\n                      class=\"move\"\n              >&nbsp;</div>\n              <span\n                      class=\"resize topleft\"\n                      (mousedown)=\"startMove($event, 'resize', 'topleft')\"\n                      (touchstart)=\"startMove($event, 'resize', 'topleft')\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize top\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize topright\"\n                      (mousedown)=\"startMove($event, 'resize', 'topright')\"\n                      (touchstart)=\"startMove($event, 'resize', 'topright')\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize right\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize bottomright\"\n                      (mousedown)=\"startMove($event, 'resize', 'bottomright')\"\n                      (touchstart)=\"startMove($event, 'resize', 'bottomright')\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize bottom\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize bottomleft\"\n                      (mousedown)=\"startMove($event, 'resize', 'bottomleft')\"\n                      (touchstart)=\"startMove($event, 'resize', 'bottomleft')\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize left\"\n              ><span class=\"square\"></span></span>\n              <span\n                      class=\"resize-bar top\"\n                      (mousedown)=\"startMove($event, 'resize', 'top')\"\n                      (touchstart)=\"startMove($event, 'resize', 'top')\"\n              ></span>\n              <span\n                      class=\"resize-bar right\"\n                      (mousedown)=\"startMove($event, 'resize', 'right')\"\n                      (touchstart)=\"startMove($event, 'resize', 'right')\"\n              ></span>\n              <span\n                      class=\"resize-bar bottom\"\n                      (mousedown)=\"startMove($event, 'resize', 'bottom')\"\n                      (touchstart)=\"startMove($event, 'resize', 'bottom')\"\n              ></span>\n              <span\n                      class=\"resize-bar left\"\n                      (mousedown)=\"startMove($event, 'resize', 'left')\"\n                      (touchstart)=\"startMove($event, 'resize', 'left')\"\n              ></span>\n          </div>\n      </div>\n    `,\n    styles: [`\n      :host {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        position: relative;\n        width: 100%;\n        max-width: 100%;\n        max-height: 100%;\n        overflow: hidden;\n        padding: 5px;\n        text-align: center;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none; }\n        :host > div {\n          position: relative;\n          width: 100%; }\n          :host > div img.source-image {\n            max-width: 100%;\n            max-height: 100%; }\n        :host .cropper {\n          position: absolute;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          color: #53535C;\n          background: transparent;\n          outline-color: rgba(255, 255, 255, 0.3);\n          outline-width: 100vw;\n          outline-style: solid;\n          -ms-touch-action: none;\n              touch-action: none; }\n          @media (orientation: portrait) {\n            :host .cropper {\n              outline-width: 100vh; } }\n          :host .cropper:after {\n            position: absolute;\n            content: '';\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            pointer-events: none;\n            border: dashed 1px;\n            opacity: .75;\n            color: inherit;\n            z-index: 1; }\n          :host .cropper .move {\n            width: 100%;\n            cursor: move;\n            border: 1px solid rgba(255, 255, 255, 0.5); }\n          :host .cropper .resize {\n            position: absolute;\n            display: inline-block;\n            line-height: 6px;\n            padding: 8px;\n            opacity: .85;\n            z-index: 1; }\n            :host .cropper .resize .square {\n              display: inline-block;\n              background: #53535C;\n              width: 6px;\n              height: 6px;\n              border: 1px solid rgba(255, 255, 255, 0.5);\n              -webkit-box-sizing: content-box;\n                      box-sizing: content-box; }\n            :host .cropper .resize.topleft {\n              top: -12px;\n              left: -12px;\n              cursor: nwse-resize; }\n            :host .cropper .resize.top {\n              top: -12px;\n              left: calc(50% - 12px);\n              cursor: ns-resize; }\n            :host .cropper .resize.topright {\n              top: -12px;\n              right: -12px;\n              cursor: nesw-resize; }\n            :host .cropper .resize.right {\n              top: calc(50% - 12px);\n              right: -12px;\n              cursor: ew-resize; }\n            :host .cropper .resize.bottomright {\n              bottom: -12px;\n              right: -12px;\n              cursor: nwse-resize; }\n            :host .cropper .resize.bottom {\n              bottom: -12px;\n              left: calc(50% - 12px);\n              cursor: ns-resize; }\n            :host .cropper .resize.bottomleft {\n              bottom: -12px;\n              left: -12px;\n              cursor: nesw-resize; }\n            :host .cropper .resize.left {\n              top: calc(50% - 12px);\n              left: -12px;\n              cursor: ew-resize; }\n          :host .cropper .resize-bar {\n            position: absolute;\n            z-index: 1; }\n            :host .cropper .resize-bar.top {\n              top: -11px;\n              left: 11px;\n              width: calc(100% - 22px);\n              height: 22px;\n              cursor: ns-resize; }\n            :host .cropper .resize-bar.right {\n              top: 11px;\n              right: -11px;\n              height: calc(100% - 22px);\n              width: 22px;\n              cursor: ew-resize; }\n            :host .cropper .resize-bar.bottom {\n              bottom: -11px;\n              left: 11px;\n              width: calc(100% - 22px);\n              height: 22px;\n              cursor: ns-resize; }\n            :host .cropper .resize-bar.left {\n              top: 11px;\n              left: -11px;\n              height: calc(100% - 22px);\n              width: 22px;\n              cursor: ew-resize; }\n          :host .cropper.rounded {\n            outline-color: transparent; }\n            :host .cropper.rounded:after {\n              border-radius: 100%;\n              -webkit-box-shadow: 0 0 0 100vw rgba(255, 255, 255, 0.3);\n                      box-shadow: 0 0 0 100vw rgba(255, 255, 255, 0.3); }\n              @media (orientation: portrait) {\n                :host .cropper.rounded:after {\n                  -webkit-box-shadow: 0 0 0 100vh rgba(255, 255, 255, 0.3);\n                          box-shadow: 0 0 0 100vh rgba(255, 255, 255, 0.3); } }\n            :host .cropper.rounded .move {\n              border-radius: 100%; }\n    `],\n    changeDetection: ChangeDetectionStrategy.OnPush\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: DomSanitizer, },\n{type: ChangeDetectorRef, },\n{type: NgZone, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'sourceImage': [{ type: ViewChild, args: ['sourceImage', ] },],\n'imageFileChanged': [{ type: Input },],\n'imageChangedEvent': [{ type: Input },],\n'imageBase64': [{ type: Input },],\n'format': [{ type: Input },],\n'outputType': [{ type: Input },],\n'maintainAspectRatio': [{ type: Input },],\n'aspectRatio': [{ type: Input },],\n'resizeToWidth': [{ type: Input },],\n'resizeToHeight': [{ type: Input },],\n'cropperMinWidth': [{ type: Input },],\n'cropperMinHeight': [{ type: Input },],\n'roundCropper': [{ type: Input },],\n'onlyScaleDown': [{ type: Input },],\n'imageQuality': [{ type: Input },],\n'autoCrop': [{ type: Input },],\n'backgroundColor': [{ type: Input },],\n'containWithinAspectRatio': [{ type: Input },],\n'cropper': [{ type: Input },],\n'alignImage': [{ type: HostBinding, args: ['style.text-align', ] },{ type: Input },],\n'startCropImage': [{ type: Output },],\n'imageCropped': [{ type: Output },],\n'imageCroppedBase64': [{ type: Output },],\n'imageCroppedFile': [{ type: Output },],\n'imageLoaded': [{ type: Output },],\n'cropperReady': [{ type: Output },],\n'loadImageFailed': [{ type: Output },],\n'onResize': [{ type: HostListener, args: ['window:resize', ] },],\n'moveImg': [{ type: HostListener, args: ['document:mousemove', ['$event'], ] },{ type: HostListener, args: ['document:touchmove', ['$event'], ] },],\n'moveStop': [{ type: HostListener, args: ['document:mouseup', ] },{ type: HostListener, args: ['document:touchend', ] },],\n};\n}\n\nfunction ImageCropperComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nImageCropperComponent.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nImageCropperComponent.ctorParameters;\n/** @type {?} */\nImageCropperComponent.propDecorators;\n/** @type {?} */\nImageCropperComponent.prototype.originalImage;\n/** @type {?} */\nImageCropperComponent.prototype.originalBase64;\n/** @type {?} */\nImageCropperComponent.prototype.moveStart;\n/** @type {?} */\nImageCropperComponent.prototype.maxSize;\n/** @type {?} */\nImageCropperComponent.prototype.originalSize;\n/** @type {?} */\nImageCropperComponent.prototype.setImageMaxSizeRetries;\n/** @type {?} */\nImageCropperComponent.prototype.cropperScaledMinWidth;\n/** @type {?} */\nImageCropperComponent.prototype.cropperScaledMinHeight;\n/** @type {?} */\nImageCropperComponent.prototype.safeImgDataUrl;\n/** @type {?} */\nImageCropperComponent.prototype.marginLeft;\n/** @type {?} */\nImageCropperComponent.prototype.imageVisible;\n/** @type {?} */\nImageCropperComponent.prototype.sourceImage;\n/** @type {?} */\nImageCropperComponent.prototype.format;\n/** @type {?} */\nImageCropperComponent.prototype.outputType;\n/** @type {?} */\nImageCropperComponent.prototype.maintainAspectRatio;\n/** @type {?} */\nImageCropperComponent.prototype.aspectRatio;\n/** @type {?} */\nImageCropperComponent.prototype.resizeToWidth;\n/** @type {?} */\nImageCropperComponent.prototype.resizeToHeight;\n/** @type {?} */\nImageCropperComponent.prototype.cropperMinWidth;\n/** @type {?} */\nImageCropperComponent.prototype.cropperMinHeight;\n/** @type {?} */\nImageCropperComponent.prototype.roundCropper;\n/** @type {?} */\nImageCropperComponent.prototype.onlyScaleDown;\n/** @type {?} */\nImageCropperComponent.prototype.imageQuality;\n/** @type {?} */\nImageCropperComponent.prototype.autoCrop;\n/** @type {?} */\nImageCropperComponent.prototype.backgroundColor;\n/** @type {?} */\nImageCropperComponent.prototype.containWithinAspectRatio;\n/** @type {?} */\nImageCropperComponent.prototype.cropper;\n/** @type {?} */\nImageCropperComponent.prototype.alignImage;\n/** @type {?} */\nImageCropperComponent.prototype.startCropImage;\n/** @type {?} */\nImageCropperComponent.prototype.imageCropped;\n/** @type {?} */\nImageCropperComponent.prototype.imageCroppedBase64;\n/** @type {?} */\nImageCropperComponent.prototype.imageCroppedFile;\n/** @type {?} */\nImageCropperComponent.prototype.imageLoaded;\n/** @type {?} */\nImageCropperComponent.prototype.cropperReady;\n/** @type {?} */\nImageCropperComponent.prototype.loadImageFailed;\n/** @type {?} */\nImageCropperComponent.prototype.sanitizer;\n/** @type {?} */\nImageCropperComponent.prototype.cd;\n/** @type {?} */\nImageCropperComponent.prototype.zone;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","\n/**\n * @param {?} canvas\n * @param {?} width\n * @param {?} height\n * @param {?=} resizeCanvas\n * @return {?}\n */\nexport function resizeCanvas(canvas: HTMLCanvasElement, width: number, height: number, resizeCanvas = true) {\n    const /** @type {?} */ width_source = canvas.width;\n    const /** @type {?} */ height_source = canvas.height;\n    width = Math.round(width);\n    height = Math.round(height);\n\n    const /** @type {?} */ ratio_w = width_source / width;\n    const /** @type {?} */ ratio_h = height_source / height;\n    const /** @type {?} */ ratio_w_half = Math.ceil(ratio_w / 2);\n    const /** @type {?} */ ratio_h_half = Math.ceil(ratio_h / 2);\n\n    const /** @type {?} */ ctx = canvas.getContext('2d');\n    if (ctx) {\n        const /** @type {?} */ img = ctx.getImageData(0, 0, width_source, height_source);\n        const /** @type {?} */ img2 = ctx.createImageData(width, height);\n        const /** @type {?} */ data = img.data;\n        const /** @type {?} */ data2 = img2.data;\n\n        for (let /** @type {?} */ j = 0; j < height; j++) {\n            for (let /** @type {?} */ i = 0; i < width; i++) {\n                const /** @type {?} */ x2 = (i + j * width) * 4;\n                const /** @type {?} */ center_y = j * ratio_h;\n                let /** @type {?} */ weight = 0;\n                let /** @type {?} */ weights = 0;\n                let /** @type {?} */ weights_alpha = 0;\n                let /** @type {?} */ gx_r = 0;\n                let /** @type {?} */ gx_g = 0;\n                let /** @type {?} */ gx_b = 0;\n                let /** @type {?} */ gx_a = 0;\n\n                const /** @type {?} */ xx_start = Math.floor(i * ratio_w);\n                const /** @type {?} */ yy_start = Math.floor(j * ratio_h);\n                let /** @type {?} */ xx_stop = Math.ceil((i + 1) * ratio_w);\n                let /** @type {?} */ yy_stop = Math.ceil((j + 1) * ratio_h);\n                xx_stop = Math.min(xx_stop, width_source);\n                yy_stop = Math.min(yy_stop, height_source);\n\n                for (let /** @type {?} */ yy = yy_start; yy < yy_stop; yy++) {\n                    const /** @type {?} */ dy = Math.abs(center_y - yy) / ratio_h_half;\n                    const /** @type {?} */ center_x = i * ratio_w;\n                    const /** @type {?} */ w0 = dy * dy; //pre-calc part of w\n                    for (let /** @type {?} */ xx = xx_start; xx < xx_stop; xx++) {\n                        const /** @type {?} */ dx = Math.abs(center_x - xx) / ratio_w_half;\n                        const /** @type {?} */ w = Math.sqrt(w0 + dx * dx);\n                        if (w >= 1) {\n                            //pixel too far\n                            continue;\n                        }\n                        //hermite filter\n                        weight = 2 * w * w * w - 3 * w * w + 1;\n                        const /** @type {?} */ pos_x = 4 * (xx + yy * width_source);\n                        //alpha\n                        gx_a += weight * data[pos_x + 3];\n                        weights_alpha += weight;\n                        //colors\n                        if (data[pos_x + 3] < 255)\n                            weight = weight * data[pos_x + 3] / 250;\n                        gx_r += weight * data[pos_x];\n                        gx_g += weight * data[pos_x + 1];\n                        gx_b += weight * data[pos_x + 2];\n                        weights += weight;\n                    }\n                }\n                data2[x2] = gx_r / weights;\n                data2[x2 + 1] = gx_g / weights;\n                data2[x2 + 2] = gx_b / weights;\n                data2[x2 + 3] = gx_a / weights_alpha;\n            }\n        }\n        //clear and resize canvas\n        if (resizeCanvas) {\n            canvas.width = width;\n            canvas.height = height;\n        }\n        else {\n            ctx.clearRect(0, 0, width_source, height_source);\n        }\n\n        //draw\n        ctx.putImageData(img2, 0, 0);\n    }\n}\n/**\n * @param {?} srcBase64\n * @param {?} aspectRatio\n * @return {?}\n */\nexport function fitImageToAspectRatio(srcBase64: string, aspectRatio: number): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const /** @type {?} */ img = new Image();\n        img.onload = function () {\n            const /** @type {?} */ canvas = document.createElement('canvas');\n            const /** @type {?} */ ctx = canvas.getContext('2d');\n\n            if (ctx) {\n                const /** @type {?} */ minWidthToContain = img.height * aspectRatio;\n                const /** @type {?} */ minHeightToContain = img.width / aspectRatio;\n                canvas.width = Math.max(img.width, minWidthToContain);\n                canvas.height = Math.max(img.height, minHeightToContain);\n                const /** @type {?} */ dx = (canvas.width - img.width) / 2;\n                const /** @type {?} */ dy = (canvas.height - img.height) / 2;\n                ctx.drawImage(img, dx, dy);\n                resolve(canvas.toDataURL());\n            } else {\n                reject(new Error('No context'));\n            }\n        };\n        img.src = srcBase64;\n    });\n}\n","\n/**\n * @param {?} srcBase64\n * @return {?}\n */\nexport function resetExifOrientation(srcBase64: string): Promise<string> {\n    try {\n        const /** @type {?} */ exifRotation = getExifRotation(srcBase64);\n        if (exifRotation > 1) {\n            return transformBase64BasedOnExifRotation(srcBase64, exifRotation);\n        } else {\n            return Promise.resolve(srcBase64);\n        }\n    } catch ( /** @type {?} */ex) {\n        return Promise.reject(ex);\n    }\n}\n/**\n * @param {?} srcBase64\n * @param {?} exifRotation\n * @return {?}\n */\nexport function transformBase64BasedOnExifRotation(srcBase64: string, exifRotation: number): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const /** @type {?} */ img = new Image();\n        img.onload = function () {\n            const /** @type {?} */ width = img.width;\n            const /** @type {?} */ height = img.height;\n            const /** @type {?} */ canvas = document.createElement('canvas');\n            const /** @type {?} */ ctx = canvas.getContext('2d');\n\n            if (ctx) {\n                if (4 < exifRotation && exifRotation < 9) {\n                    canvas.width = height;\n                    canvas.height = width;\n                } else {\n                    canvas.width = width;\n                    canvas.height = height;\n                }\n                transformCanvas(ctx, exifRotation, width, height);\n                ctx.drawImage(img, 0, 0);\n                resolve(canvas.toDataURL());\n            } else {\n                reject(new Error('No context'));\n            }\n        };\n        img.src = srcBase64;\n    });\n}\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nfunction getExifRotation(imageBase64: string): number {\n    const /** @type {?} */ view = new DataView(base64ToArrayBuffer(imageBase64));\n    if (view.getUint16(0, false) != 0xFFD8) {\n        return -2;\n    }\n    const /** @type {?} */ length = view.byteLength;\n    let /** @type {?} */ offset = 2;\n    while (offset < length) {\n        if (view.getUint16(offset + 2, false) <= 8) return -1;\n        const /** @type {?} */ marker = view.getUint16(offset, false);\n        offset += 2;\n        if (marker == 0xFFE1) {\n            if (view.getUint32(offset += 2, false) != 0x45786966) {\n                return -1;\n            }\n\n            const /** @type {?} */ little = view.getUint16(offset += 6, false) == 0x4949;\n            offset += view.getUint32(offset + 4, little);\n            const /** @type {?} */ tags = view.getUint16(offset, little);\n            offset += 2;\n            for (let /** @type {?} */ i = 0; i < tags; i++) {\n                if (view.getUint16(offset + (i * 12), little) == 0x0112) {\n                    return view.getUint16(offset + (i * 12) + 8, little);\n                }\n            }\n        }\n        else if ((marker & 0xFF00) != 0xFF00) {\n            break;\n        }\n        else {\n            offset += view.getUint16(offset, false);\n        }\n    }\n    return -1;\n}\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nfunction base64ToArrayBuffer(imageBase64: string) {\n    imageBase64 = imageBase64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n    const /** @type {?} */ binaryString = atob(imageBase64);\n    const /** @type {?} */ len = binaryString.length;\n    const /** @type {?} */ bytes = new Uint8Array(len);\n    for (let /** @type {?} */ i = 0; i < len; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n}\n/**\n * @param {?} ctx\n * @param {?} orientation\n * @param {?} width\n * @param {?} height\n * @return {?}\n */\nfunction transformCanvas(ctx: any, orientation: number, width: number, height: number) {\n    switch (orientation) {\n        case 2:\n            ctx.transform(-1, 0, 0, 1, width, 0);\n            break;\n        case 3:\n            ctx.transform(-1, 0, 0, -1, width, height);\n            break;\n        case 4:\n            ctx.transform(1, 0, 0, -1, 0, height);\n            break;\n        case 5:\n            ctx.transform(0, 1, 1, 0, 0, 0);\n            break;\n        case 6:\n            ctx.transform(0, 1, -1, 0, height, 0);\n            break;\n        case 7:\n            ctx.transform(0, -1, -1, 0, height, width);\n            break;\n        case 8:\n            ctx.transform(0, -1, 1, 0, 0, width);\n            break;\n    }\n}\n"],"names":[],"mappings":";;;AICA;;;;AAIA,8BALC,SAAA;IAMG,IALI,CAKR;QACQ,IAAR,gBAAA,CALc,YAAA,GAAe,eAAA,CAAgB,SAAC,CAAS,CAAC;QAMhD,EAAR,CAAA,CAAY,YALC,GAAc,CAAA,CAK3B,CAL8B,CAK9B;YACY,MAAZ,CALmB,kCAAA,CAAmC,SAAC,EAAU,YAAA,CAAa,CAAC;QAM/E,CAAS;QALT,IAAA,CAAe,CAAf;YAMY,MAAZ,CALmB,OAAA,CAAQ,OAAC,CAAO,SAAC,CAAS,CAAC;QAM9C,CAAS;IACT,CAAK;IALC,KAAN,CAAA,CAAM,EAAQ,CAAd,CAAiB,CAAjB;QAMQ,MAAR,CALe,OAAA,CAAQ,MAAC,CAAM,EAAC,CAAE,CAAC;IAMlC,CAAK;AACL,CAAC;;;;;;AAMD,4CATC,SAAA,EAAA,YAAA;IAUG,MAAJ,CATW,IAAI,OAAA,CAAQ,UAAC,OAAC,EAAQ,MAAA;QAUzB,IAAR,gBAAA,CATc,GAAA,GAAM,IAAI,KAAA,EAAM,CAAE;QAUxB,GAAG,CATC,MAAC,GAAQ;YAUT,IAAZ,gBAAA,CATkB,KAAA,GAAQ,GAAA,CAAI,KAAC,CAAK;YAUxB,IAAZ,gBAAA,CATkB,MAAA,GAAS,GAAA,CAAI,MAAC,CAAM;YAU1B,IAAZ,gBAAA,CATkB,MAAA,GAAS,QAAA,CAAS,aAAC,CAAa,QAAC,CAAQ,CAAC;YAUhD,IAAZ,gBAAA,CATkB,GAAA,GAAM,MAAA,CAAO,UAAC,CAAU,IAAC,CAAI,CAAC;YAWpC,EAAZ,CAAA,CAAgB,GATC,CASjB,CATqB,CASrB;gBACgB,EAAhB,CAAA,CAAoB,CATC,GAAG,YAAA,IAAgB,YAAA,GAAe,CAAA,CASvD,CAT0D,CAS1D;oBACoB,MAAM,CATC,KAAC,GAAO,MAAA,CAAO;oBAUtB,MAAM,CATC,MAAC,GAAQ,KAAA,CAAM;gBAU1C,CAAiB;gBATjB,IAAA,CAAuB,CAAvB;oBAUoB,MAAM,CATC,KAAC,GAAO,KAAA,CAAM;oBAUrB,MAAM,CATC,MAAC,GAAQ,MAAA,CAAO;gBAU3C,CAAiB;gBACD,eAAe,CATC,GAAC,EAAI,YAAA,EAAc,KAAA,EAAO,MAAA,CAAO,CAAC;gBAUlD,GAAG,CATC,SAAC,CAAS,GAAC,EAAI,CAAA,EAAG,CAAA,CAAE,CAAC;gBAUzB,OAAO,CATC,MAAC,CAAM,SAAC,EAAS,CAAE,CAAC;YAU5C,CAAa;YATb,IAAA,CAAmB,CAAnB;gBAUgB,MAAM,CATC,IAAI,KAAA,CAAM,YAAC,CAAY,CAAC,CAAC;YAUhD,CAAa;QACb,CAAS,CATC;QAUF,GAAG,CATC,GAAC,GAAK,SAAA,CAAU;IAU5B,CAAK,CATC,CAAC;AAUP,CAAC;;;;;AAKD,yBAZC,WAAA;IAaG,IAAJ,gBAAA,CAZU,IAAA,GAAO,IAAI,QAAA,CAAS,mBAAC,CAAmB,WAAC,CAAW,CAAC,CAAC;IAa5D,EAAJ,CAAA,CAAQ,IAZC,CAAI,SAAC,CAAS,CAAC,EAAE,KAAA,CAAM,IAAI,MAAA,CAYpC,CAZ4C,CAY5C;QACQ,MAAR,CAZe,CAAA,CAAE,CAAC;IAalB,CAAK;IACD,IAAJ,gBAAA,CAZU,MAAA,GAAS,IAAA,CAAK,UAAC,CAAU;IAa/B,IAAJ,gBAAA,CAZQ,MAAA,GAAS,CAAA,CAAE;IAaf,OAAO,MAZC,GAAQ,MAAA,EAAQ,CAY5B;QACQ,EAAR,CAAA,CAAY,IAZC,CAAI,SAAC,CAAS,MAAC,GAAQ,CAAA,EAAG,KAAA,CAAM,IAAI,CAAA,CAYjD;YAZoD,MAApD,CAA2D,CAAA,CAAE,CAAC;QAatD,IAAR,gBAAA,CAZc,MAAA,GAAS,IAAA,CAAK,SAAC,CAAS,MAAC,EAAO,KAAA,CAAM,CAAC;QAa7C,MAAM,IAZI,CAAA,CAAE;QAaZ,EAAR,CAAA,CAAY,MAZC,IAAS,MAAA,CAYtB,CAZ8B,CAY9B;YACY,EAAZ,CAAA,CAAgB,IAZC,CAAI,SAAC,CAAS,MAAC,IAAS,CAAA,EAAG,KAAA,CAAM,IAAI,UAAA,CAYtD,CAZkE,CAYlE;gBACgB,MAAhB,CAZuB,CAAA,CAAE,CAAC;YAa1B,CAAa;YAED,IAAZ,gBAAA,CAZkB,MAAA,GAAS,IAAA,CAAK,SAAC,CAAS,MAAC,IAAS,CAAA,EAAG,KAAA,CAAM,IAAI,MAAA,CAAO;YAa5D,MAAM,IAZI,IAAA,CAAK,SAAC,CAAS,MAAC,GAAQ,CAAA,EAAG,MAAA,CAAO,CAAC;YAa7C,IAAZ,gBAAA,CAZkB,IAAA,GAAO,IAAA,CAAK,SAAC,CAAS,MAAC,EAAO,MAAA,CAAO,CAAC;YAa5C,MAAM,IAZI,CAAA,CAAE;YAaZ,GAAZ,CAAA,CAAiB,IAAjB,gBAAA,CAZqB,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,IAAA,EAAM,CAAA,EAAE,EAAG,CAY3C;gBACgB,EAAhB,CAAA,CAAoB,IAZC,CAAI,SAAC,CAAS,MAAC,GAYpC,CAZ4C,CAAE,GAAG,EAAA,CAAG,EAAE,MAAA,CAAO,IAAI,MAAA,CAYjE,CAZyE,CAYzE;oBACoB,MAApB,CAZ2B,IAAA,CAAK,SAAC,CAAS,MAAC,GAY3C,CAZmD,CAAE,GAAG,EAAA,CAAG,GAAG,CAAA,EAAG,MAAA,CAAO,CAAC;gBAazE,CAAiB;YACjB,CAAa;QACb,CAAS;QAXT,IAAA,CAAa,EAAb,CAAA,CAAa,CAAK,MAAC,GAAQ,MAAA,CAA3B,IAAsC,MAAA,CAAtC,CAA8C,CAA9C;YAaY,KAAZ,CAAkB;QAClB,CAAS;QAXT,IAAA,CAAa,CAAb;YAaY,MAAM,IAZI,IAAA,CAAK,SAAC,CAAS,MAAC,EAAO,KAAA,CAAM,CAAC;QAapD,CAAS;IACT,CAAK;IACD,MAAJ,CAZW,CAAA,CAAE,CAAC;AAad,CAAC;;;;;AAKD,6BAfC,WAAA;IAgBG,WAAW,GAfG,WAAA,CAAY,OAAC,CAAO,6BAAC,EAA8B,EAAA,CAAG,CAAC;IAgBrE,IAAJ,gBAAA,CAfU,YAAA,GAAe,IAAA,CAAK,WAAC,CAAW,CAAC;IAgBvC,IAAJ,gBAAA,CAfU,GAAA,GAAM,YAAA,CAAa,MAAC,CAAM;IAgBhC,IAAJ,gBAAA,CAfU,KAAA,GAAQ,IAAI,UAAA,CAAW,GAAC,CAAG,CAAC;IAgBlC,GAAJ,CAAA,CAAS,IAAT,gBAAA,CAfa,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,GAAA,EAAK,CAAA,EAAE,EAAG,CAelC;QACQ,KAAK,CAfC,CAAC,CAAC,GAAG,YAAA,CAAa,UAAC,CAAU,CAAC,CAAC,CAAC;IAgB9C,CAAK;IACD,MAAJ,CAfW,KAAA,CAAM,MAAC,CAAM;AAgBxB,CAAC;;;;;;;;AAQD,yBArBC,GAAA,EAAA,WAAA,EAAA,KAAA,EAAA,MAAA;IAsBG,MAAJ,CAAA,CAAY,WArBC,CAqBb,CAAA,CAAA;QACQ,KArBK,CAAA;YAsBD,GAAG,CArBC,SAAC,CAAS,CAAC,CAAC,EAAE,CAAA,EAAG,CAAA,EAAG,CAAA,EAAG,KAAA,EAAO,CAAA,CAAE,CAAC;YAsBrC,KAAZ,CAAkB;QACV,KArBK,CAAA;YAsBD,GAAG,CArBC,SAAC,CAAS,CAAC,CAAC,EAAE,CAAA,EAAG,CAAA,EAAG,CAAA,CAAE,EAAE,KAAA,EAAO,MAAA,CAAO,CAAC;YAsB3C,KAAZ,CAAkB;QACV,KArBK,CAAA;YAsBD,GAAG,CArBC,SAAC,CAAS,CAAC,EAAE,CAAA,EAAG,CAAA,EAAG,CAAA,CAAE,EAAE,CAAA,EAAG,MAAA,CAAO,CAAC;YAsBtC,KAAZ,CAAkB;QACV,KArBK,CAAA;YAsBD,GAAG,CArBC,SAAC,CAAS,CAAC,EAAE,CAAA,EAAG,CAAA,EAAG,CAAA,EAAG,CAAA,EAAG,CAAA,CAAE,CAAC;YAsBhC,KAAZ,CAAkB;QACV,KArBK,CAAA;YAsBD,GAAG,CArBC,SAAC,CAAS,CAAC,EAAE,CAAA,EAAG,CAAA,CAAE,EAAE,CAAA,EAAG,MAAA,EAAQ,CAAA,CAAE,CAAC;YAsBtC,KAAZ,CAAkB;QACV,KArBK,CAAA;YAsBD,GAAG,CArBC,SAAC,CAAS,CAAC,EAAE,CAAA,CAAE,EAAE,CAAA,CAAE,EAAE,CAAA,EAAG,MAAA,EAAQ,KAAA,CAAM,CAAC;YAsB3C,KAAZ,CAAkB;QACV,KArBK,CAAA;YAsBD,GAAG,CArBC,SAAC,CAAS,CAAC,EAAE,CAAA,CAAE,EAAE,CAAA,EAAG,CAAA,EAAG,CAAA,EAAG,KAAA,CAAM,CAAC;YAsBrC,KAAZ,CAAkB;IAClB,CAAK;AACL,CAAC;ADpID;;;;;;;AAOA,sBAHC,MAAA,EAAA,KAAA,EAAA,MAAA,EAAA,YAAA;IAAA,6BAAA,EAAA,mBAAA;IAIG,IAAJ,gBAAA,CAHU,YAAA,GAAe,MAAA,CAAO,KAAC,CAAK;IAIlC,IAAJ,gBAAA,CAHU,aAAA,GAAgB,MAAA,CAAO,MAAC,CAAM;IAIpC,KAAK,GAHG,IAAA,CAAK,KAAC,CAAK,KAAC,CAAK,CAAC;IAI1B,MAAM,GAHG,IAAA,CAAK,KAAC,CAAK,MAAC,CAAM,CAAC;IAK5B,IAAJ,gBAAA,CAHU,OAAA,GAAU,YAAA,GAAe,KAAA,CAAM;IAIrC,IAAJ,gBAAA,CAHU,OAAA,GAAU,aAAA,GAAgB,MAAA,CAAO;IAIvC,IAAJ,gBAAA,CAHU,YAAA,GAAe,IAAA,CAAK,IAAC,CAAI,OAAC,GAAS,CAAA,CAAE,CAAC;IAI5C,IAAJ,gBAAA,CAHU,YAAA,GAAe,IAAA,CAAK,IAAC,CAAI,OAAC,GAAS,CAAA,CAAE,CAAC;IAK5C,IAAJ,gBAAA,CAHU,GAAA,GAAM,MAAA,CAAO,UAAC,CAAU,IAAC,CAAI,CAAC;IAIpC,EAAJ,CAAA,CAAQ,GAHC,CAGT,CAHa,CAGb;QACQ,IAAR,gBAAA,CAHc,GAAA,GAAM,GAAA,CAAI,YAAC,CAAY,CAAC,EAAE,CAAA,EAAG,YAAA,EAAc,aAAA,CAAc,CAAC;QAIhE,IAAR,gBAAA,CAHc,IAAA,GAAO,GAAA,CAAI,eAAC,CAAe,KAAC,EAAM,MAAA,CAAO,CAAC;QAIhD,IAAR,gBAAA,CAHc,IAAA,GAAO,GAAA,CAAI,IAAC,CAAI;QAItB,IAAR,gBAAA,CAHc,KAAA,GAAQ,IAAA,CAAK,IAAC,CAAI;QAKxB,GAAR,CAAA,CAAa,IAAb,gBAAA,CAHiB,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,MAAA,EAAQ,CAAA,EAAE,EAAG,CAGzC;YACY,GAAZ,CAAA,CAAiB,IAAjB,gBAAA,CAHqB,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,KAAA,EAAO,CAAA,EAAE,EAAG,CAG5C;gBACgB,IAAhB,gBAAA,CAHsB,EAAA,GAAK,CAAA,CAAE,GAAG,CAAA,GAAI,KAAA,CAGpC,GAH6C,CAAA,CAAE;gBAI/B,IAAhB,gBAAA,CAHsB,QAAA,GAAW,CAAA,GAAI,OAAA,CAAQ;gBAI7B,IAAhB,gBAAA,CAHoB,MAAA,GAAS,CAAA,CAAE;gBAIf,IAAhB,gBAAA,CAHoB,OAAA,GAAU,CAAA,CAAE;gBAIhB,IAAhB,gBAAA,CAHoB,aAAA,GAAgB,CAAA,CAAE;gBAItB,IAAhB,gBAAA,CAHoB,IAAA,GAAO,CAAA,CAAE;gBAIb,IAAhB,gBAAA,CAHoB,IAAA,GAAO,CAAA,CAAE;gBAIb,IAAhB,gBAAA,CAHoB,IAAA,GAAO,CAAA,CAAE;gBAIb,IAAhB,gBAAA,CAHoB,IAAA,GAAO,CAAA,CAAE;gBAKb,IAAhB,gBAAA,CAHsB,QAAA,GAAW,IAAA,CAAK,KAAC,CAAK,CAAC,GAAG,OAAA,CAAQ,CAAC;gBAIzC,IAAhB,gBAAA,CAHsB,QAAA,GAAW,IAAA,CAAK,KAAC,CAAK,CAAC,GAAG,OAAA,CAAQ,CAAC;gBAIzC,IAAhB,gBAAA,CAHoB,OAAA,GAAU,IAAA,CAAK,IAAC,CAAI,CAAC,CAAC,GAAG,CAAA,CAG7C,GAHkD,OAAA,CAAQ,CAAC;gBAI3C,IAAhB,gBAAA,CAHoB,OAAA,GAAU,IAAA,CAAK,IAAC,CAAI,CAAC,CAAC,GAAG,CAAA,CAG7C,GAHkD,OAAA,CAAQ,CAAC;gBAI3C,OAAO,GAHG,IAAA,CAAK,GAAC,CAAG,OAAC,EAAQ,YAAA,CAAa,CAAC;gBAI1C,OAAO,GAHG,IAAA,CAAK,GAAC,CAAG,OAAC,EAAQ,aAAA,CAAc,CAAC;gBAK3C,GAAhB,CAAA,CAAqB,IAArB,gBAAA,CAHyB,EAAA,GAAK,QAAA,EAAU,EAAA,GAAK,OAAA,EAAS,EAAA,EAAG,EAAG,CAG5D;oBACoB,IAApB,gBAAA,CAH0B,EAAA,GAAK,IAAA,CAAK,GAAC,CAAG,QAAC,GAAU,EAAA,CAAG,GAAG,YAAA,CAAa;oBAIlD,IAApB,gBAAA,CAH0B,QAAA,GAAW,CAAA,GAAI,OAAA,CAAQ;oBAI7B,IAApB,gBAAA,CAH0B,EAAA,GAAK,EAAA,GAAK,EAAA,CAAG,CAGvC,oBAAA;oBACoB,GAApB,CAAA,CAAyB,IAAzB,gBAAA,CAH6B,EAAA,GAAK,QAAA,EAAU,EAAA,GAAK,OAAA,EAAS,EAAA,EAAG,EAAG,CAGhE;wBACwB,IAAxB,gBAAA,CAH8B,EAAA,GAAK,IAAA,CAAK,GAAC,CAAG,QAAC,GAAU,EAAA,CAAG,GAAG,YAAA,CAAa;wBAIlD,IAAxB,gBAAA,CAH8B,CAAA,GAAI,IAAA,CAAK,IAAC,CAAI,EAAC,GAAI,EAAA,GAAK,EAAA,CAAG,CAAC;wBAIlC,EAAxB,CAAA,CAA4B,CAHC,IAAI,CAAA,CAGjC,CAHoC,CAGpC;;4BAE4B,QAA5B,CAAqC;wBACrC,CAAyB;;wBAED,MAAM,GAHG,CAAA,GAAI,CAAA,GAAI,CAAA,GAAI,CAAA,GAAI,CAAA,GAAI,CAAA,GAAI,CAAA,GAAI,CAAA,CAAE;wBAIvC,IAAxB,gBAAA,CAH8B,KAAA,GAAQ,CAAA,GAGtC,CAH0C,EAAE,GAAI,EAAA,GAAK,YAAA,CAAa,CAAC;;wBAK3C,IAAI,IAHI,MAAA,GAAS,IAAA,CAAK,KAAC,GAAO,CAAA,CAAE,CAAC;wBAIjC,aAAa,IAHI,MAAA,CAAO;;wBAKxB,EAAxB,CAAA,CAA4B,IAHC,CAAI,KAAC,GAAO,CAAA,CAAE,GAAG,GAAA,CAG9C;4BAC4B,MAAM,GAHG,MAAA,GAAS,IAAA,CAAK,KAAC,GAAO,CAAA,CAAE,GAAG,GAAA,CAAI;wBAI5C,IAAI,IAHI,MAAA,GAAS,IAAA,CAAK,KAAC,CAAK,CAAC;wBAI7B,IAAI,IAHI,MAAA,GAAS,IAAA,CAAK,KAAC,GAAO,CAAA,CAAE,CAAC;wBAIjC,IAAI,IAHI,MAAA,GAAS,IAAA,CAAK,KAAC,GAAO,CAAA,CAAE,CAAC;wBAIjC,OAAO,IAHI,MAAA,CAAO;oBAI1C,CAAqB;gBACrB,CAAiB;gBACD,KAAK,CAHC,EAAC,CAAE,GAAG,IAAA,GAAO,OAAA,CAAQ;gBAI3B,KAAK,CAHC,EAAC,GAAI,CAAA,CAAE,GAAG,IAAA,GAAO,OAAA,CAAQ;gBAI/B,KAAK,CAHC,EAAC,GAAI,CAAA,CAAE,GAAG,IAAA,GAAO,OAAA,CAAQ;gBAI/B,KAAK,CAHC,EAAC,GAAI,CAAA,CAAE,GAAG,IAAA,GAAO,aAAA,CAAc;YAIrD,CAAa;QACb,CAAS;;QAED,EAAR,CAAA,CAAY,YAHC,CAGb,CAH0B,CAG1B;YACY,MAAM,CAHC,KAAC,GAAO,KAAA,CAAM;YAIrB,MAAM,CAHC,MAAC,GAAQ,MAAA,CAAO;QAInC,CAAS;QAFT,IAAA,CAAa,CAAb;YAIY,GAAG,CAHC,SAAC,CAAS,CAAC,EAAE,CAAA,EAAG,YAAA,EAAc,aAAA,CAAc,CAAC;QAI7D,CAAS;;QAGD,GAAG,CAHC,YAAC,CAAY,IAAC,EAAK,CAAA,EAAG,CAAA,CAAE,CAAC;IAIrC,CAAK;AACL,CAAC;;;;;;AAMD,+BAPC,SAAA,EAAA,WAAA;IAQG,MAAJ,CAPW,IAAI,OAAA,CAAQ,UAAC,OAAC,EAAQ,MAAA;QAQzB,IAAR,gBAAA,CAPc,GAAA,GAAM,IAAI,KAAA,EAAM,CAAE;QAQxB,GAAG,CAPC,MAAC,GAAQ;YAQT,IAAZ,gBAAA,CAPkB,MAAA,GAAS,QAAA,CAAS,aAAC,CAAa,QAAC,CAAQ,CAAC;YAQhD,IAAZ,gBAAA,CAPkB,GAAA,GAAM,MAAA,CAAO,UAAC,CAAU,IAAC,CAAI,CAAC;YASpC,EAAZ,CAAA,CAAgB,GAPC,CAOjB,CAPqB,CAOrB;gBACgB,IAAhB,gBAAA,CAPsB,iBAAA,GAAoB,GAAA,CAAI,MAAC,GAAQ,WAAA,CAAY;gBAQnD,IAAhB,gBAAA,CAPsB,kBAAA,GAAqB,GAAA,CAAI,KAAC,GAAO,WAAA,CAAY;gBAQnD,MAAM,CAPC,KAAC,GAAO,IAAA,CAAK,GAAC,CAAG,GAAC,CAAG,KAAC,EAAM,iBAAA,CAAkB,CAAC;gBAQtD,MAAM,CAPC,MAAC,GAAQ,IAAA,CAAK,GAAC,CAAG,GAAC,CAAG,MAAC,EAAO,kBAAA,CAAmB,CAAC;gBAQzD,IAAhB,gBAAA,CAPsB,EAAA,GAAK,CAAA,MAAE,CAAM,KAAC,GAAO,GAAA,CAAI,KAAC,CAOhD,GAPwD,CAAA,CAAE;gBAQ1C,IAAhB,gBAAA,CAPsB,EAAA,GAAK,CAAA,MAAE,CAAM,MAAC,GAAQ,GAAA,CAAI,MAAC,CAOjD,GAP0D,CAAA,CAAE;gBAQ5C,GAAG,CAPC,SAAC,CAAS,GAAC,EAAI,EAAA,EAAI,EAAA,CAAG,CAAC;gBAQ3B,OAAO,CAPC,MAAC,CAAM,SAAC,EAAS,CAAE,CAAC;YAQ5C,CAAa;YAPb,IAAA,CAAmB,CAAnB;gBAQgB,MAAM,CAPC,IAAI,KAAA,CAAM,YAAC,CAAY,CAAC,CAAC;YAQhD,CAAa;QACb,CAAS,CAPC;QAQF,GAAG,CAPC,GAAC,GAAK,SAAA,CAAU;IAQ5B,CAAK,CAPC,CAAC;AAQP,CAAC;AD3GD;;;;;;IAgFA,+BARwB,SAAW,EACX,EAAI,EACJ,IAAM;QAFN,IAAxB,CAAA,SAAwB,GAAA,SAAA,CAAW;QACX,IAAxB,CAAA,EAAwB,GAAA,EAAA,CAAI;QACJ,IAAxB,CAAA,IAAwB,GAAA,IAAA,CAAM;QAlElB,IAAZ,CAAA,sBAAY,GAAyB,CAAA,CAAE;QAC3B,IAAZ,CAAA,qBAAY,GAAwB,EAAA,CAAG;QAC3B,IAAZ,CAAA,sBAAY,GAAyB,EAAA,CAAG;QACpC,IAAJ,CAAA,UAAc,GAEuB,KAAA,CAAM;QADvC,IAAJ,CAAA,YAAgB,GAEG,KAAA,CAAM;QA8BpB,IAAL,CAAA,MAAW,GAJ4C,KAAA,CAAM;QAKxD,IAAL,CAAA,UAAe,GAJe,MAAA,CAAO;QAKhC,IAAL,CAAA,mBAAwB,GAJG,IAAA,CAAK;QAK3B,IAAL,CAAA,WAAgB,GAJG,CAAA,CAAE;QAKhB,IAAL,CAAA,aAAkB,GAJG,CAAA,CAAE;QAKlB,IAAL,CAAA,cAAmB,GAJG,CAAA,CAAE;QAKnB,IAAL,CAAA,eAAoB,GAJG,CAAA,CAAE;QAKpB,IAAL,CAAA,gBAAqB,GAJG,CAAA,CAAE;QAKrB,IAAL,CAAA,YAAiB,GAJG,KAAA,CAAM;QAKrB,IAAL,CAAA,aAAkB,GAJG,KAAA,CAAM;QAKtB,IAAL,CAAA,YAAiB,GAJG,EAAA,CAAG;QAKlB,IAAL,CAAA,QAAa,GAJG,IAAA,CAAK;QAMhB,IAAL,CAAA,wBAA6B,GAJG,KAAA,CAAM;QAKjC,IAAL,CAAA,OAAY,GAJoB;YAKxB,EAAE,EAJE,CAAA,GAAE;YAKN,EAAE,EAJE,CAAA,GAAE;YAKN,EAAE,EAJE,KAAA;YAKJ,EAAE,EAJE,KAAA;SAKP,CAJC;QAMD,IAAL,CAAA,UAAe,GAJsB,QAAA,CAAS;QAOzC,IAAL,CAAA,cAAmB,GAJG,IAAI,YAAA,EAAkB,CAAG;QAK1C,IAAL,CAAA,YAAiB,GAJG,IAAI,YAAA,EAA+B,CAAG;QAKrD,IAAL,CAAA,kBAAuB,GAJG,IAAI,YAAA,EAAoB,CAAG;QAKhD,IAAL,CAAA,gBAAqB,GAJG,IAAI,YAAA,EAAkB,CAAG;QAK5C,IAAL,CAAA,WAAgB,GAJG,IAAI,YAAA,EAAkB,CAAG;QAKvC,IAAL,CAAA,YAAiB,GAJG,IAAI,YAAA,EAAkB,CAAG;QAKxC,IAAL,CAAA,eAAoB,GAJG,IAAI,YAAA,EAAkB,CAAG;QAaxC,IAAI,CAAC,WAAW,EAAE,CAAC;IAC3B,CAAK;IAjEL,sBAAK,mDAAA;;;;;aAAL,UAAK,IAAA;YACG,IAAI,CAAC,WAAC,EAAW,CAAE;YACnB,EAAR,CAAA,CAAY,IAAC,CAAb,CAAkB,CAAlB;gBACY,IAAI,CAAC,aAAC,CAAa,IAAC,CAAI,CAAC;YACrC,CAAS;QACT,CAAK;;;OAAA;IAKL,sBAFK,oDAAA;;;;;aAEL,UAFK,KAAA;YAGG,IAAI,CAFC,WAAC,EAAW,CAAE;YAGnB,EAAR,CAAA,CAAY,KAFC,IAAQ,KAAA,CAAM,MAAC,IAAS,KAAA,CAAM,MAAC,CAAM,KAAC,IAAQ,KAAA,CAAM,MAAC,CAAM,KAAC,CAAK,MAAC,GAAQ,CAAA,CAEvF,CAF0F,CAE1F;gBACY,IAAI,CAFC,aAAC,CAAa,KAAC,CAAK,MAAC,CAAM,KAAC,CAAK,CAAC,CAAC,CAAC,CAAC;YAGtD,CAAS;QACT,CAAK;;;OAAA;IAKL,sBAJK,8CAAA;;;;;aAIL,UAJK,WAAA;YAKG,IAAI,CAJC,WAAC,EAAW,CAAE;YAKnB,IAAI,CAJC,2BAAC,CAA2B,WAAC,CAAW,CAAC;QAKtD,CAAK;;;OAAA;;;;;IA+CL,2CAXK,GAWL,UAXK,OAAA;QAYG,EAAR,CAAA,CAAY,OAXC,CAAO,OAAC,CAWrB,CAX6B,CAW7B;YACY,IAAI,CAXC,UAAC,EAAU,CAAE;YAYlB,IAAI,CAXC,uBAAC,EAAuB,CAAE;YAY/B,IAAI,CAXC,oBAAC,CAAoB,KAAC,CAAK,CAAC;YAYjC,IAAI,CAXC,UAAC,EAAU,CAAE;YAYlB,IAAI,CAXC,EAAC,CAAE,YAAC,EAAY,CAAE;QAYnC,CAAS;QACD,EAAR,CAAA,CAAY,OAXC,CAAO,WAAC,IAAc,IAAA,CAAK,YAAC,CAWzC,CAXsD,CAWtD;YACY,IAAI,CAXC,oBAAC,EAAoB,CAAE;QAYxC,CAAS;IACT,CAAK;;;;IATA,2CAAA,GAAA;QAcG,IAAI,CAbC,YAAC,GAAc,KAAA,CAAM;QAc1B,IAAI,CAbC,aAAC,GAAe,IAAA,CAAK;QAc1B,IAAI,CAbC,cAAC,GAAgB,kCAAA;cAChB,2DAAA;cACA,2BAAA,CAA4B;QAclC,IAAI,CAbC,SAAC,GAAW;YAcb,MAAM,EAbE,KAAA;YAcR,IAAI,EAbE,IAAA;YAcN,QAAQ,EAbE,IAAA;YAcV,EAAE,EAbE,CAAA;YAcJ,EAAE,EAbE,CAAA;YAcJ,EAAE,EAbE,CAAA;YAcJ,EAAE,EAbE,CAAA;YAcJ,OAAO,EAbE,CAAA;YAcT,OAAO,EAbE,CAAA;SAcZ,CAbC;QAcF,IAAI,CAbC,OAAC,GAAS;YAcX,KAAK,EAbE,CAAA;YAcP,MAAM,EAbE,CAAA;SAcX,CAbC;QAcF,IAAI,CAbC,YAAC,GAAc;YAchB,KAAK,EAbE,CAAA;YAcP,MAAM,EAbE,CAAA;SAcX,CAbC;QAcF,IAAI,CAbC,OAAC,CAAO,EAAC,GAAI,CAAA,GAAE,CAAG;QAcvB,IAAI,CAbC,OAAC,CAAO,EAAC,GAAI,CAAA,GAAE,CAAG;QAcvB,IAAI,CAbC,OAAC,CAAO,EAAC,GAAI,KAAA,CAAM;QAcxB,IAAI,CAbC,OAAC,CAAO,EAAC,GAAI,KAAA,CAAM;IAchC,CAAK;;;;;IAXA,6CAAA,GAAA,UAAA,IAAA;QAAA,iBA2BA;QAVG,IAAR,gBAAA,CAhBc,UAAA,GAAa,IAAI,UAAA,EAAW,CAAE;QAiBpC,UAAU,CAhBC,MAAC,GAAQ,UAAA,KAAQ;YAiBxB,IAAZ,gBAAA,CAhBkB,SAAA,GAAY,IAAA,CAAK,IAAC,CAAI;YAiB5B,EAAZ,CAAA,CAAgB,KAhBC,CAAI,gBAAC,CAAgB,SAAC,CAAS,CAgBhD,CAhBkD,CAgBlD;gBACgB,KAAI,CAhBC,2BAAC,CAA2B,KAAC,CAAK,MAAC,CAAM,MAAC,CAAM,CAAC;YAiBtE,CAAa;YAhBb,IAAA,CAAmB,CAAnB;gBAiBgB,KAAI,CAhBC,eAAC,CAAe,IAAC,EAAI,CAAE;YAiB5C,CAAa;QACb,CAAS,CAhBC;QAiBF,UAAU,CAhBC,aAAC,CAAa,IAAC,CAAI,CAAC;IAiBvC,CAAK;;;;;IAdA,gDAAA,GAAA,UAAA,IAAA;QAoBG,MAAR,CAnBe,oCAAA,CAAqC,IAAC,CAAI,IAAC,CAAI,CAAC;IAoB/D,CAAK;;;;;IAjBA,2DAAA,GAAA,UAAA,WAAA;QAAA,iBA2BA;QAJG,oBAAoB,CAtBC,WAAC,CAAW;aAuB5B,IAtBC,CAAI,UAAC,YAAc,IAAW,OAAA,KAAA,CAAK,qBAAC,CAAqB,YAAC,CAAY,EAAxC,CAAwC,CAAC;aAuBxE,IAtBC,CAAI,UAAC,YAAc,IAAW,OAAA,KAAA,CAAK,eAAC,CAAe,YAAC,CAAY,EAAlC,CAAkC,CAAC;aAuBlE,KAtBC,CAAK,cAAM,OAAA,KAAA,CAAK,eAAC,CAAe,IAAC,EAAI,EAA1B,CAA0B,CAAE,CAAC;IAuBtD,CAAK;;;;;IApBA,qDAAA,GAAA,UAAA,WAAA;QA0BG,MAAR,CAzBe,IAAA,CAAK,wBAAC;cACP,qBAAA,CAAsB,WAAC,EAAY,IAAA,CAAK,WAAC,CAAW;cACpD,OAAA,CAAQ,OAAC,CAAO,WAAC,CAAW,CAAC;IA0B3C,CAAK;;;;;IAvBA,+CAAA,GAAA,UAAA,WAAA;QAAA,iBAsCA;QATG,IAAI,CA5BC,cAAC,GAAgB,WAAA,CAAY;QA6BlC,IAAI,CA5BC,cAAC,GAAgB,IAAA,CAAK,SAAC,CAAS,8BAAC,CAA8B,WAAC,CAAW,CAAC;QA6BjF,IAAI,CA5BC,aAAC,GAAe,IAAI,KAAA,EAAM,CAAE;QA6BjC,IAAI,CA5BC,aAAC,CAAa,MAAC,GAAQ;YA6BxB,KAAI,CA5BC,YAAC,CAAY,KAAC,GAAO,KAAA,CAAK,aAAC,CAAa,KAAC,CAAK;YA6BnD,KAAI,CA5BC,YAAC,CAAY,MAAC,GAAQ,KAAA,CAAK,aAAC,CAAa,MAAC,CAAM;YA6BrD,KAAI,CA5BC,EAAC,CAAE,YAAC,EAAY,CAAE;QA6BnC,CAAS,CA5BC;QA6BF,IAAI,CA5BC,aAAC,CAAa,GAAC,GAAK,WAAA,CAAY;IA6B7C,CAAK;;;;IAIL,iDA9BK,GA8BL;QAAA,iBAMK;QALG,EAAR,CAAA,CAAY,IA9BC,CAAI,aAAC,IAAgB,IAAA,CA8BlC,CA9BwC,CA8BxC;YACY,IAAI,CA9BC,WAAC,CAAW,IAAC,EAAI,CAAE;YA+BxB,IAAI,CA9BC,sBAAC,GAAwB,CAAA,CAAE;YA+BhC,UAAU,CA9BC,cAAM,OAAA,KAAA,CAAK,4BAAC,EAA4B,EAAlC,CAAkC,CAAE,CAAC;QA+BlE,CAAS;IACT,CAAK;;;;IA5BA,4DAAA,GAAA;QAAA,iBA+CA;QAdG,EAAR,CAAA,CAAY,IAhCC,CAAI,sBAAC,GAAwB,EAAA,CAgC1C,CAhC8C,CAgC9C;YACY,IAAI,CAhCC,eAAC,CAAe,IAAC,EAAI,CAAE;QAiCxC,CAAS;QAhCT,IAAA,CAAe,EAAf,CAAA,CAAe,IAAK,CAAI,WAAC,IAAc,IAAA,CAAK,WAAC,CAAW,aAAC,IAAgB,IAAA,CAAK,WAAC,CAAW,aAAC,CAAa,WAAC,GAAa,CAAA,CAAtH,CAAyH,CAAzH;YAiCY,IAAI,CAhCC,UAAC,EAAU,CAAE;YAiClB,IAAI,CAhCC,uBAAC,EAAuB,CAAE;YAiC/B,IAAI,CAhCC,oBAAC,EAAoB,CAAE;YAiC5B,IAAI,CAhCC,YAAC,CAAY,IAAC,EAAI,CAAE;YAiCzB,IAAI,CAhCC,EAAC,CAAE,YAAC,EAAY,CAAE;QAiCnC,CAAS;QAhCT,IAAA,CAAe,CAAf;YAiCY,IAAI,CAhCC,sBAAC,EAAsB,CAAE;YAiC9B,UAAU,CAhCC;gBAiCP,KAAI,CAhCC,4BAAC,EAA4B,CAAE;YAiCpD,CAAa,EAhCE,EAAA,CAAG,CAAC;QAiCnB,CAAS;IACT,CAAK;;;;IAIL,wCAjCK,GAiCL;QACQ,IAAI,CAjCC,qBAAC,EAAqB,CAAE;QAkC7B,IAAI,CAjCC,UAAC,EAAU,CAAE;QAkClB,IAAI,CAjCC,uBAAC,EAAuB,CAAE;IAkCvC,CAAK;;;;IAIL,0CAnCK,GAmCL;QACQ,IAAI,CAnCC,eAAC,CAAe,CAAC,CAAC,CAAC;IAoChC,CAAK;;;;IAIL,2CArCK,GAqCL;QACQ,IAAI,CArCC,eAAC,CAAe,CAAC,CAAC,CAAC;IAsChC,CAAK;;;;IAIL,8CAvCK,GAuCL;QACQ,IAAI,CAvCC,eAAC,CAAe,CAAC,CAAC,CAAC;IAwChC,CAAK;;;;IAIL,4CAzCK,GAyCL;QACQ,IAAI,CAzCC,eAAC,CAAe,CAAC,CAAC,CAAC;IA0ChC,CAAK;;;;;IAvCA,+CAAA,GAAA,UAAA,eAAA;QAAA,iBAkDA;QALG,EAAR,CAAA,CAAY,IA5CC,CAAI,cAAC,CA4ClB,CA5CiC,CA4CjC;YACY,kCAAkC,CA5CC,IAAC,CAAI,cAAC,EAAe,eAAA,CAAgB;iBA6CnE,IA5CC,CAAI,UAAC,YAAc,IAAW,OAAA,KAAA,CAAK,qBAAC,CAAqB,YAAC,CAAY,EAAxC,CAAwC,CAAC;iBA6CxE,IA5CC,CAAI,UAAC,aAAe,IAAW,OAAA,KAAA,CAAK,eAAC,CAAe,aAAC,CAAa,EAAnC,CAAmC,CAAC,CAAC;QA6CtF,CAAS;IACT,CAAK;;;;IA1CA,qDAAA,GAAA;QA+CG,IAAR,gBAAA,CA9Cc,kBAAA,GAAqB,IAAA,CAAK,WAAC,CAAW,aAAC,CAAa;QA+C1D,EAAR,CAAA,CAAY,IA9CC,CAAI,OAAC,CAAO,KAAC,KAAS,kBAAA,CAAmB,WAAC,IAAc,IAAA,CAAK,OAAC,CAAO,MAAC,KAAU,kBAAA,CAAmB,YAAC,CA8CjH,CA9C8H,CA8C9H;YACY,IAAI,CA9CC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,kBAAA,CAAmB,WAAC,GAAa,IAAA,CAAK,OAAC,CAAO,KAAC,CAAK;YA+CxF,IAAI,CA9CC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,kBAAA,CAAmB,WAAC,GAAa,IAAA,CAAK,OAAC,CAAO,KAAC,CAAK;YA+CxF,IAAI,CA9CC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,kBAAA,CAAmB,YAAC,GAAc,IAAA,CAAK,OAAC,CAAO,MAAC,CAAM;YA+C1F,IAAI,CA9CC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,kBAAA,CAAmB,YAAC,GAAc,IAAA,CAAK,OAAC,CAAO,MAAC,CAAM;QA+CtG,CAAS;IACT,CAAK;;;;IA5CA,oDAAA,GAAA;QAiDG,IAAR,gBAAA,CAhDc,kBAAA,GAAqB,IAAA,CAAK,WAAC,CAAW,aAAC,CAAa;QAiD1D,EAAR,CAAA,CAAY,CAhDC,IAAC,CAAI,mBAAC,CAgDnB,CAhDuC,CAgDvC;YACY,IAAI,CAhDC,OAAC,CAAO,EAAC,GAAI,CAAA,CAAE;YAiDpB,IAAI,CAhDC,OAAC,CAAO,EAAC,GAAI,kBAAA,CAAmB,WAAC,CAAW;YAiDjD,IAAI,CAhDC,OAAC,CAAO,EAAC,GAAI,CAAA,CAAE;YAiDpB,IAAI,CAhDC,OAAC,CAAO,EAAC,GAAI,kBAAA,CAAmB,YAAC,CAAY;QAiD9D,CAAS;QAhDT,IAAA,CAAe,EAAf,CAAA,CAAe,kBAAK,CAAkB,WAAC,GAAa,IAAA,CAAK,WAAC,GAAa,kBAAA,CAAmB,YAAC,CAA3F,CAAwG,CAAxG;YAiDY,IAAI,CAhDC,OAAC,CAAO,EAAC,GAAI,CAAA,CAAE;YAiDpB,IAAI,CAhDC,OAAC,CAAO,EAAC,GAAI,kBAAA,CAAmB,WAAC,CAAW;YAiDjD,IAAZ,gBAAA,CAhDkB,aAAA,GAAgB,kBAAA,CAAmB,WAAC,GAAa,IAAA,CAAK,WAAC,CAAW;YAiDxE,IAAI,CAhDC,OAAC,CAAO,EAAC,GAAI,CAAA,kBAAE,CAAkB,YAAC,GAAc,aAAA,CAgDjE,GAhDkF,CAAA,CAAE;YAiDxE,IAAI,CAhDC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,aAAA,CAAc;QAiD9D,CAAS;QAhDT,IAAA,CAAe,CAAf;YAiDY,IAAI,CAhDC,OAAC,CAAO,EAAC,GAAI,CAAA,CAAE;YAiDpB,IAAI,CAhDC,OAAC,CAAO,EAAC,GAAI,kBAAA,CAAmB,YAAC,CAAY;YAiDlD,IAAZ,gBAAA,CAhDkB,YAAA,GAAe,kBAAA,CAAmB,YAAC,GAAc,IAAA,CAAK,WAAC,CAAW;YAiDxE,IAAI,CAhDC,OAAC,CAAO,EAAC,GAAI,CAAA,kBAAE,CAAkB,WAAC,GAAa,YAAA,CAgDhE,GAhDgF,CAAA,CAAE;YAiDtE,IAAI,CAhDC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,YAAA,CAAa;QAiD7D,CAAS;QACD,IAAI,CAhDC,UAAC,EAAU,CAAE;QAiDlB,IAAI,CAhDC,YAAC,GAAc,IAAA,CAAK;IAiDjC,CAAK;;;;;;;IAOL,yCArDK,GAqDL,UArDK,KAAA,EAAA,QAAA,EAAA,QAAA;QAAA,yBAAA,EAAA,eAAA;QAsDG,KAAK,CArDC,cAAC,EAAc,CAAE;QAsDvB,IAAI,CArDC,SAAC,GAqDd,MAAA,CAAA,MAAA,CAAA,EACY,MAAM,EArDE,IAAA,EAsDR,IAAI,EArDE,QAAA,EAsDN,QAAQ,UAAA,EACR,OAAO,EArDE,IAAA,CAAK,UAAC,CAAU,KAAC,CAAK,EAsD/B,OAAO,EArDE,IAAA,CAAK,UAAC,CAAU,KAAC,CAAK,EAgD3C,EAMe,IArDC,CAAI,OAAC,CAsDZ,CArDC;IAsDV,CAAK;;;;;IAKL,uCAtDK,GAsDL,UAtDK,KAAA;QAuDG,EAAR,CAAA,CAAY,IAtDC,CAAI,SAAC,CAAS,MAAC,CAsD5B,CAtDmC,CAsDnC;YACY,KAAK,CAtDC,eAAC,EAAe,CAAE;YAuDxB,KAAK,CAtDC,cAAC,EAAc,CAAE;YAuDvB,EAAZ,CAAA,CAAgB,IAtDC,CAAI,SAAC,CAAS,IAAC,KAAQ,MAAA,CAsDxC,CAtDgD,CAsDhD;gBACgB,IAAI,CAtDC,IAAC,CAAI,KAAC,CAAK,CAAC;gBAuDjB,IAAI,CAtDC,oBAAC,CAAoB,IAAC,CAAI,CAAC;YAuDhD,CAAa;YAtDb,IAAA,CAAmB,EAAnB,CAAA,CAAmB,IAAK,CAAI,SAAC,CAAS,IAAC,KAAQ,QAAA,CAA/C,CAAyD,CAAzD;gBAuDgB,IAAI,CAtDC,MAAC,CAAM,KAAC,CAAK,CAAC;gBAuDnB,IAAI,CAtDC,oBAAC,CAAoB,KAAC,CAAK,CAAC;YAuDjD,CAAa;YACD,IAAI,CAtDC,EAAC,CAAE,aAAC,EAAa,CAAE;QAuDpC,CAAS;IACT,CAAK;;;;IApDA,0CAAA,GAAA;QAyDG,IAAR,gBAAA,CAxDc,kBAAA,GAAqB,IAAA,CAAK,WAAC,CAAW,aAAC,CAAa;QAyD1D,IAAI,CAxDC,OAAC,CAAO,KAAC,GAAO,kBAAA,CAAmB,WAAC,CAAW;QAyDpD,IAAI,CAxDC,OAAC,CAAO,MAAC,GAAQ,kBAAA,CAAmB,YAAC,CAAY;QAyDtD,IAAI,CAxDC,UAAC,GAAY,IAAA,CAAK,SAAC,CAAS,wBAAC,CAAwB,aAAC,GAAe,IAAA,CAAK,OAAC,CAAO,KAAC,GAAO,CAAA,GAAI,KAAA,CAAM,CAAC;IAyDlH,CAAK;;;;IAtDA,uDAAA,GAAA;QA2DG,EAAR,CAAA,CAAY,IA1DC,CAAI,aAAC,CA0DlB,CA1DgC,CA0DhC;YACY,IAAI,CA1DC,wBAAC,EAAwB,CAAE;YA2DhC,IAAI,CA1DC,yBAAC,EAAyB,CAAE;QA2D7C,CAAS;QA1DT,IAAA,CAAe,CAAf;YA2DY,IAAI,CA1DC,qBAAC,GAAuB,EAAA,CAAG;YA2DhC,IAAI,CA1DC,sBAAC,GAAwB,EAAA,CAAG;QA2D7C,CAAS;IACT,CAAK;;;;IAxDA,wDAAA,GAAA;QA6DG,IAAI,CA5DC,qBAAC,GAAuB,IAAA,CAAK,eAAC,GAAiB,CAAA;cAC9C,IAAA,CAAK,GAAC,CAAG,EAAC,EAAG,IAAA,CAAK,eAAC,GAAiB,IAAA,CAAK,aAAC,CAAa,KAAC,GAAO,IAAA,CAAK,OAAC,CAAO,KAAC,CAAK;cAClF,EAAA,CAAG;IA6DjB,CAAK;;;;IA1DA,yDAAA,GAAA;QA+DG,EAAR,CAAA,CAAY,IA9DC,CAAI,mBAAC,CA8DlB,CA9DsC,CA8DtC;YACY,IAAI,CA9DC,sBAAC,GAAwB,IAAA,CAAK,GAAC,CAAG,EAAC,EAAG,IAAA,CAAK,qBAAC,GAAuB,IAAA,CAAK,WAAC,CAAW,CAAC;QA+DtG,CAAS;QA9DT,IAAA,CAAe,EAAf,CAAA,CAAe,IAAK,CAAI,gBAAC,GAAkB,CAAA,CAA3C,CAA8C,CAA9C;YA+DY,IAAI,CA9DC,sBAAC,GAAwB,IAAA,CAAK,GAAC,CAAG,EAAC,EAAG,IAAA,CAAK,gBAAC,GAAkB,IAAA,CAAK,aAAC,CAAa,MAAC,GAAQ,IAAA,CAAK,OAAC,CAAO,MAAC,CAAM,CAAC;QA+DhI,CAAS;QA9DT,IAAA,CAAe,CAAf;YA+DY,IAAI,CA9DC,sBAAC,GAAwB,EAAA,CAAG;QA+D7C,CAAS;IACT,CAAK;;;;;IA5DA,oDAAA,GAAA,UAAA,YAAA;QAAA,6BAAA,EAAA,oBAAA;QAkEG,EAAR,CAAA,CAAY,IAjEC,CAAI,OAAC,CAAO,EAAC,GAAI,CAAA,CAiE9B,CAjEiC,CAiEjC;YACY,IAAI,CAjEC,OAAC,CAAO,EAAC,IAAK,YAAA,GAAe,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,CAAA,CAAE;YAkEtD,IAAI,CAjEC,OAAC,CAAO,EAAC,GAAI,CAAA,CAAE;QAkEhC,CAAS;QACD,EAAR,CAAA,CAAY,IAjEC,CAAI,OAAC,CAAO,EAAC,GAAI,CAAA,CAiE9B,CAjEiC,CAiEjC;YACY,IAAI,CAjEC,OAAC,CAAO,EAAC,IAAK,YAAA,GAAe,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,CAAA,CAAE;YAkEtD,IAAI,CAjEC,OAAC,CAAO,EAAC,GAAI,CAAA,CAAE;QAkEhC,CAAS;QACD,EAAR,CAAA,CAAY,IAjEC,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,KAAC,CAiE5C,CAjEkD,CAiElD;YACY,IAAI,CAjEC,OAAC,CAAO,EAAC,IAAK,YAAA,GAiE/B,CAjE8C,IAAE,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,KAAC,CAiE/E,GAjEuF,CAAA,CAAE;YAkE7E,IAAI,CAjEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,KAAC,CAAK;QAkEjD,CAAS;QACD,EAAR,CAAA,CAAY,IAjEC,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,MAAC,CAiE5C,CAjEmD,CAiEnD;YACY,IAAI,CAjEC,OAAC,CAAO,EAAC,IAAK,YAAA,GAiE/B,CAjE8C,IAAE,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,MAAC,CAiE/E,GAjEwF,CAAA,CAAE;YAkE9E,IAAI,CAjEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,MAAC,CAAM;QAkElD,CAAS;IACT,CAAK;;;;IAIL,wCAjEK,GAiEL;QACQ,EAAR,CAAA,CAAY,IAjEC,CAAI,SAAC,CAAS,MAAC,CAiE5B,CAjEmC,CAiEnC;YACY,IAAI,CAjEC,SAAC,CAAS,MAAC,GAAQ,KAAA,CAAM;YAkE9B,IAAI,CAjEC,UAAC,EAAU,CAAE;QAkE9B,CAAS;IACT,CAAK;;;;;IA/DA,oCAAA,GAAA,UAAA,KAAA;QAqEG,IAAR,gBAAA,CApEc,KAAA,GAAQ,IAAA,CAAK,UAAC,CAAU,KAAC,CAAK,GAAG,IAAA,CAAK,SAAC,CAAS,OAAC,CAAO;QAqE9D,IAAR,gBAAA,CApEc,KAAA,GAAQ,IAAA,CAAK,UAAC,CAAU,KAAC,CAAK,GAAG,IAAA,CAAK,SAAC,CAAS,OAAC,CAAO;QAsE9D,IAAI,CApEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,SAAC,CAAS,EAAC,GAAI,KAAA,CAAM;QAqE5C,IAAI,CApEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,SAAC,CAAS,EAAC,GAAI,KAAA,CAAM;QAqE5C,IAAI,CApEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,SAAC,CAAS,EAAC,GAAI,KAAA,CAAM;QAqE5C,IAAI,CApEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,SAAC,CAAS,EAAC,GAAI,KAAA,CAAM;IAqEpD,CAAK;;;;;IAlEA,sCAAA,GAAA,UAAA,KAAA;QAwEG,IAAR,gBAAA,CAvEc,KAAA,GAAQ,IAAA,CAAK,UAAC,CAAU,KAAC,CAAK,GAAG,IAAA,CAAK,SAAC,CAAS,OAAC,CAAO;QAwE9D,IAAR,gBAAA,CAvEc,KAAA,GAAQ,IAAA,CAAK,UAAC,CAAU,KAAC,CAAK,GAAG,IAAA,CAAK,SAAC,CAAS,OAAC,CAAO;QAwE9D,MAAR,CAAA,CAAgB,IAvEC,CAAI,SAAC,CAAS,QAAC,CAuEhC,CAAA,CAAA;YACY,KAvEK,MAAA;gBAwED,IAAI,CAvEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,SAAC,CAAS,EAAC,GAAI,KAAA,EAAO,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,qBAAC,CAAqB,CAAC;gBAwEpG,KAAhB,CAAsB;YACV,KAvEK,SAAA;gBAwED,IAAI,CAvEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,SAAC,CAAS,EAAC,GAAI,KAAA,EAAO,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,qBAAC,CAAqB,CAAC;gBAwEpG,IAAI,CAvEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,SAAC,CAAS,EAAC,GAAI,KAAA,EAAO,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,sBAAC,CAAsB,CAAC;gBAwErG,KAAhB,CAAsB;YACV,KAvEK,KAAA;gBAwED,IAAI,CAvEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,SAAC,CAAS,EAAC,GAAI,KAAA,EAAO,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,sBAAC,CAAsB,CAAC;gBAwErG,KAAhB,CAAsB;YACV,KAvEK,UAAA;gBAwED,IAAI,CAvEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,SAAC,CAAS,EAAC,GAAI,KAAA,EAAO,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,qBAAC,CAAqB,CAAC;gBAwEpG,IAAI,CAvEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,SAAC,CAAS,EAAC,GAAI,KAAA,EAAO,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,sBAAC,CAAsB,CAAC;gBAwErG,KAAhB,CAAsB;YACV,KAvEK,OAAA;gBAwED,IAAI,CAvEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,SAAC,CAAS,EAAC,GAAI,KAAA,EAAO,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,qBAAC,CAAqB,CAAC;gBAwEpG,KAAhB,CAAsB;YACV,KAvEK,aAAA;gBAwED,IAAI,CAvEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,SAAC,CAAS,EAAC,GAAI,KAAA,EAAO,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,qBAAC,CAAqB,CAAC;gBAwEpG,IAAI,CAvEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,SAAC,CAAS,EAAC,GAAI,KAAA,EAAO,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,sBAAC,CAAsB,CAAC;gBAwErG,KAAhB,CAAsB;YACV,KAvEK,QAAA;gBAwED,IAAI,CAvEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,SAAC,CAAS,EAAC,GAAI,KAAA,EAAO,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,sBAAC,CAAsB,CAAC;gBAwErG,KAAhB,CAAsB;YACV,KAvEK,YAAA;gBAwED,IAAI,CAvEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,SAAC,CAAS,EAAC,GAAI,KAAA,EAAO,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,qBAAC,CAAqB,CAAC;gBAwEpG,IAAI,CAvEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,SAAC,CAAS,EAAC,GAAI,KAAA,EAAO,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,sBAAC,CAAsB,CAAC;gBAwErG,KAAhB,CAAsB;QACtB,CAAS;QAED,EAAR,CAAA,CAAY,IAvEC,CAAI,mBAAC,CAuElB,CAvEsC,CAuEtC;YACY,IAAI,CAvEC,gBAAC,EAAgB,CAAE;QAwEpC,CAAS;IACT,CAAK;;;;IArEA,gDAAA,GAAA;QA0EG,IAAR,gBAAA,CAzEY,SAAA,GAAY,CAAA,CAAE;QA0ElB,IAAR,gBAAA,CAzEY,SAAA,GAAY,CAAA,CAAE;QA2ElB,MAAR,CAAA,CAAgB,IAzEC,CAAI,SAAC,CAAS,QAAC,CAyEhC,CAAA,CAAA;YACY,KAzEK,KAAA;gBA0ED,IAAI,CAzEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,CAAA,IAAE,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,CAyErF,GAzE0F,IAAA,CAAK,WAAC,CAAW;gBA0E3F,SAAS,GAzEG,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,KAAC,EAAM,CAAA,CAAE,CAAC;gBA0E9D,SAAS,GAzEG,IAAA,CAAK,GAAC,CAAG,CAAC,GAAG,IAAA,CAAK,OAAC,CAAO,EAAC,EAAG,CAAA,CAAE,CAAC;gBA0E7C,EAAhB,CAAA,CAAoB,SAzEC,GAAW,CAAA,IAAK,SAAA,GAAY,CAAA,CAyEjD,CAzEoD,CAyEpD;oBACoB,IAAI,CAzEC,OAAC,CAAO,EAAC,IAAK,CAAA,SAAE,GAAW,IAAA,CAAK,WAAC,CAyE1D,GAzEwE,SAAA,GAyExE,CAzEoF,SAAE,GAAW,IAAA,CAAK,WAAC,CAyEvG,GAzEqH,SAAA,CAAU;oBA0E3G,IAAI,CAzEC,OAAC,CAAO,EAAC,IAAK,CAAA,SAAE,GAAW,IAAA,CAAK,WAAC,CAyE1D,GAzEwE,SAAA,GAAY,SAAA,GAAY,SAAA,GAAY,IAAA,CAAK,WAAC,CAAW;gBA0E7H,CAAiB;gBACD,KAAhB,CAAsB;YACV,KAzEK,QAAA;gBA0ED,IAAI,CAzEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,CAAA,IAAE,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,CAyErF,GAzE0F,IAAA,CAAK,WAAC,CAAW;gBA0E3F,SAAS,GAzEG,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,KAAC,EAAM,CAAA,CAAE,CAAC;gBA0E9D,SAAS,GAzEG,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,MAAC,EAAO,CAAA,CAAE,CAAC;gBA0E/D,EAAhB,CAAA,CAAoB,SAzEC,GAAW,CAAA,IAAK,SAAA,GAAY,CAAA,CAyEjD,CAzEoD,CAyEpD;oBACoB,IAAI,CAzEC,OAAC,CAAO,EAAC,IAAK,CAAA,SAAE,GAAW,IAAA,CAAK,WAAC,CAyE1D,GAzEwE,SAAA,GAyExE,CAzEoF,SAAE,GAAW,IAAA,CAAK,WAAC,CAyEvG,GAzEqH,SAAA,CAAU;oBA0E3G,IAAI,CAzEC,OAAC,CAAO,EAAC,IAAK,CAAA,SAAE,GAAW,IAAA,CAAK,WAAC,CAyE1D,GAzEwE,SAAA,GAAY,SAAA,GAyEpF,CAzEgG,SAAE,GAAW,IAAA,CAAK,WAAC,CAAW,CAAC;gBA0E/H,CAAiB;gBACD,KAAhB,CAAsB;YACV,KAzEK,SAAA;gBA0ED,IAAI,CAzEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,CAAA,IAAE,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,CAyErF,GAzE0F,IAAA,CAAK,WAAC,CAAW;gBA0E3F,SAAS,GAzEG,IAAA,CAAK,GAAC,CAAG,CAAC,GAAG,IAAA,CAAK,OAAC,CAAO,EAAC,EAAG,CAAA,CAAE,CAAC;gBA0E7C,SAAS,GAzEG,IAAA,CAAK,GAAC,CAAG,CAAC,GAAG,IAAA,CAAK,OAAC,CAAO,EAAC,EAAG,CAAA,CAAE,CAAC;gBA0E7C,EAAhB,CAAA,CAAoB,SAzEC,GAAW,CAAA,IAAK,SAAA,GAAY,CAAA,CAyEjD,CAzEoD,CAyEpD;oBACoB,IAAI,CAzEC,OAAC,CAAO,EAAC,IAAK,CAAA,SAAE,GAAW,IAAA,CAAK,WAAC,CAyE1D,GAzEwE,SAAA,GAyExE,CAzEoF,SAAE,GAAW,IAAA,CAAK,WAAC,CAyEvG,GAzEqH,SAAA,CAAU;oBA0E3G,IAAI,CAzEC,OAAC,CAAO,EAAC,IAAK,CAAA,SAAE,GAAW,IAAA,CAAK,WAAC,CAyE1D,GAzEwE,SAAA,GAAY,SAAA,GAAY,SAAA,GAAY,IAAA,CAAK,WAAC,CAAW;gBA0E7H,CAAiB;gBACD,KAAhB,CAAsB;YACV,KAzEK,UAAA;gBA0ED,IAAI,CAzEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,CAAA,IAAE,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,CAyErF,GAzE0F,IAAA,CAAK,WAAC,CAAW;gBA0E3F,SAAS,GAzEG,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,KAAC,EAAM,CAAA,CAAE,CAAC;gBA0E9D,SAAS,GAzEG,IAAA,CAAK,GAAC,CAAG,CAAC,GAAG,IAAA,CAAK,OAAC,CAAO,EAAC,EAAG,CAAA,CAAE,CAAC;gBA0E7C,EAAhB,CAAA,CAAoB,SAzEC,GAAW,CAAA,IAAK,SAAA,GAAY,CAAA,CAyEjD,CAzEoD,CAyEpD;oBACoB,IAAI,CAzEC,OAAC,CAAO,EAAC,IAAK,CAAA,SAAE,GAAW,IAAA,CAAK,WAAC,CAyE1D,GAzEwE,SAAA,GAyExE,CAzEoF,SAAE,GAAW,IAAA,CAAK,WAAC,CAyEvG,GAzEqH,SAAA,CAAU;oBA0E3G,IAAI,CAzEC,OAAC,CAAO,EAAC,IAAK,CAAA,SAAE,GAAW,IAAA,CAAK,WAAC,CAyE1D,GAzEwE,SAAA,GAAY,SAAA,GAAY,SAAA,GAAY,IAAA,CAAK,WAAC,CAAW;gBA0E7H,CAAiB;gBACD,KAAhB,CAAsB;YACV,KAzEK,OAAA,CAAQ;YA0Eb,KAzEK,aAAA;gBA0ED,IAAI,CAzEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,CAAA,IAAE,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,CAyErF,GAzE0F,IAAA,CAAK,WAAC,CAAW;gBA0E3F,SAAS,GAzEG,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,KAAC,EAAM,CAAA,CAAE,CAAC;gBA0E9D,SAAS,GAzEG,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,MAAC,EAAO,CAAA,CAAE,CAAC;gBA0E/D,EAAhB,CAAA,CAAoB,SAzEC,GAAW,CAAA,IAAK,SAAA,GAAY,CAAA,CAyEjD,CAzEoD,CAyEpD;oBACoB,IAAI,CAzEC,OAAC,CAAO,EAAC,IAAK,CAAA,SAAE,GAAW,IAAA,CAAK,WAAC,CAyE1D,GAzEwE,SAAA,GAyExE,CAzEoF,SAAE,GAAW,IAAA,CAAK,WAAC,CAyEvG,GAzEqH,SAAA,CAAU;oBA0E3G,IAAI,CAzEC,OAAC,CAAO,EAAC,IAAK,CAAA,SAAE,GAAW,IAAA,CAAK,WAAC,CAyE1D,GAzEwE,SAAA,GAAY,SAAA,GAAY,SAAA,GAAY,IAAA,CAAK,WAAC,CAAW;gBA0E7H,CAAiB;gBACD,KAAhB,CAAsB;YACV,KAzEK,MAAA,CAAO;YA0EZ,KAzEK,YAAA;gBA0ED,IAAI,CAzEC,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,GAAI,CAAA,IAAE,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,EAAC,CAyErF,GAzE0F,IAAA,CAAK,WAAC,CAAW;gBA0E3F,SAAS,GAzEG,IAAA,CAAK,GAAC,CAAG,CAAC,GAAG,IAAA,CAAK,OAAC,CAAO,EAAC,EAAG,CAAA,CAAE,CAAC;gBA0E7C,SAAS,GAzEG,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,OAAC,CAAO,EAAC,GAAI,IAAA,CAAK,OAAC,CAAO,MAAC,EAAO,CAAA,CAAE,CAAC;gBA0E/D,EAAhB,CAAA,CAAoB,SAzEC,GAAW,CAAA,IAAK,SAAA,GAAY,CAAA,CAyEjD,CAzEoD,CAyEpD;oBACoB,IAAI,CAzEC,OAAC,CAAO,EAAC,IAAK,CAAA,SAAE,GAAW,IAAA,CAAK,WAAC,CAyE1D,GAzEwE,SAAA,GAyExE,CAzEoF,SAAE,GAAW,IAAA,CAAK,WAAC,CAyEvG,GAzEqH,SAAA,CAAU;oBA0E3G,IAAI,CAzEC,OAAC,CAAO,EAAC,IAAK,CAAA,SAAE,GAAW,IAAA,CAAK,WAAC,CAyE1D,GAzEwE,SAAA,GAAY,SAAA,GAAY,SAAA,GAAY,IAAA,CAAK,WAAC,CAAW;gBA0E7H,CAAiB;gBACD,KAAhB,CAAsB;QACtB,CAAS;IACT,CAAK;;;;IAvEA,0CAAA,GAAA;QA4EG,EAAR,CAAA,CAAY,IA3EC,CAAI,QAAC,CA2ElB,CA3E2B,CA2E3B;YACY,IAAI,CA3EC,IAAC,EAAI,CAAE;QA4ExB,CAAS;IACT,CAAK;;;;;IAKL,oCA9EK,GA8EL,UA9EK,UAAA;QAAA,2BAAA,EAAA,aAAA,IAAA,CAAA,UAAA;QA+EG,EAAR,CAAA,CAAY,IA9EC,CAAI,WAAC,CAAW,aAAC,IAAgB,IAAA,CAAK,aAAC,IAAgB,IAAA,CA8EpE,CA9E0E,CA8E1E;YACY,IAAI,CA9EC,cAAC,CAAc,IAAC,EAAI,CAAE;YA+E3B,IAAZ,gBAAA,CA9EkB,aAAA,GAAgB,IAAA,CAAK,gBAAC,EAAgB,CAAE;YA+E9C,IAAZ,gBAAA,CA9EkB,KAAA,GAAQ,aAAA,CAAc,EAAC,GAAI,aAAA,CAAc,EAAC,CAAE;YA+ElD,IAAZ,gBAAA,CA9EkB,MAAA,GAAS,aAAA,CAAc,EAAC,GAAI,aAAA,CAAc,EAAC,CAAE;YAgFnD,IAAZ,gBAAA,CA9EkB,UAAA,GA8ElB,CA9E+B,QAAA,CAAS,aAAC,CAAa,QAAC,CAAY,CAAA,CAAkB;YA+EzE,UAAU,CA9EC,KAAC,GAAO,KAAA,CAAM;YA+EzB,UAAU,CA9EC,MAAC,GAAQ,MAAA,CAAO;YAgF3B,IAAZ,gBAAA,CA9EkB,GAAA,GAAM,UAAA,CAAW,UAAC,CAAU,IAAC,CAAI,CAAC;YA+ExC,EAAZ,CAAA,CAAgB,GA9EC,CA8EjB,CA9EqB,CA8ErB;gBACgB,EAAhB,CAAA,CAAoB,IA9EC,CAAI,eAAC,IAAkB,IAAA,CA8E5C,CA9EkD,CA8ElD;oBACoB,GAAG,CA9EC,SAAC,GAAW,IAAA,CAAK,eAAC,CAAe;oBA+ErC,GAAG,CA9EC,QAAC,CAAQ,CAAC,EAAE,CAAA,EAAG,KAAA,EAAO,MAAA,CAAO,CAAC;gBA+EtD,CAAiB;gBACD,GAAG,CA9EC,SAAC,CA+ED,IAAI,CA9EC,aAAC,EA+EN,aAAa,CA9EC,EAAC,EA+Ef,aAAa,CA9EC,EAAC,EA+Ef,KAAK,EACL,MAAM,EACN,CAAC,EACD,CAAC,EACD,KAAK,EACL,MAAM,CACT,CA9EC;gBA+EF,IAAhB,gBAAA,CA9EsB,MAAA,GAAS,EAAA,KAAE,OAAA,EAAM,MAAA,QAAA,EAAQ,aAAA,eAAA,EAAe,eAAA,EA8E9D,MAAA,CAAA,MAAA,CAAA,EAAA,EA9EiF,IAAG,CAAI,OAAC,CAAO,EAAC,CAAC;gBA+ElF,IAAhB,gBAAA,CA9EsB,WAAA,GAAc,IAAA,CAAK,cAAC,CAAc,KAAC,EAAM,MAAA,CAAO,CAAC;gBA+EvD,EAAhB,CAAA,CAAoB,WA9EC,KAAe,CAAA,CA8EpC,CA9EuC,CA8EvC;oBACoB,MAAM,CA9EC,KAAC,GAAO,IAAA,CAAK,KAAC,CAAK,KAAC,GAAO,WAAA,CAAY,CAAC;oBA+E/C,MAAM,CA9EC,MAAC,GAAQ,IAAA,CAAK,mBAAC;0BAChB,IAAA,CAAK,KAAC,CAAK,MAAC,CAAM,KAAC,GAAO,IAAA,CAAK,WAAC,CAAW;0BAC3C,IAAA,CAAK,KAAC,CAAK,MAAC,GAAQ,WAAA,CAAY,CAAC;oBA+EvC,YAAY,CA9EC,UAAC,EAAW,MAAA,CAAO,KAAC,EAAM,MAAA,CAAO,MAAC,CAAM,CAAC;gBA+E1E,CAAiB;gBACD,MAAhB,CA9EuB,IAAA,CAAK,gBAAC,CAAgB,UAAC,EAAW,UAAA,EAAY,MAAA,CAAO,CAAC;YA+E7E,CAAa;QACb,CAAS;QACD,MAAR,CA9Ee,IAAA,CAAK;IA+EpB,CAAK;;;;IA5EA,gDAAA,GAAA;QAiFG,IAAR,gBAAA,CAhFc,kBAAA,GAAqB,IAAA,CAAK,WAAC,CAAW,aAAC,CAAa;QAiF1D,IAAR,gBAAA,CAhFc,KAAA,GAAQ,IAAA,CAAK,YAAC,CAAY,KAAC,GAAO,kBAAA,CAAmB,WAAC,CAAW;QAiFvE,MAAR,CAhFe;YAiFH,EAAE,EAhFE,IAAA,CAAK,KAAC,CAAK,IAAC,CAAI,OAAC,CAAO,EAAC,GAAI,KAAA,CAAM;YAiFvC,EAAE,EAhFE,IAAA,CAAK,KAAC,CAAK,IAAC,CAAI,OAAC,CAAO,EAAC,GAAI,KAAA,CAAM;YAiFvC,EAAE,EAhFE,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,KAAC,CAAK,IAAC,CAAI,OAAC,CAAO,EAAC,GAAI,KAAA,CAAM,EAAE,IAAA,CAAK,YAAC,CAAY,KAAC,CAAK;YAiF1E,EAAE,EAhFE,IAAA,CAAK,GAAC,CAAG,IAAC,CAAI,KAAC,CAAK,IAAC,CAAI,OAAC,CAAO,EAAC,GAAI,KAAA,CAAM,EAAE,IAAA,CAAK,YAAC,CAAY,MAAC,CAAM;SAiF9E,CAhFC;IAiFV,CAAK;;;;;;;IA9EA,gDAAA,GAAA,UAAA,UAAA,EAAA,UAAA,EAAA,MAAA;QAAA,iBA2GA;QArBG,MAAR,CAAA,CAAgB,UArFC,CAqFjB,CAAA,CAAA;YACY,KArFK,MAAA;gBAsFD,MAAhB,CArFuB,IAAA,CAAK,UAAC,CAAU,UAAC,CAAU;qBAsF7B,IArFC,CAAI,UAAC,MAAe;oBAsFlB,MAAM,CArFC,IAAC,GAAM,MAAA,CAAO;oBAsFrB,KAAI,CArFC,YAAC,CAAY,IAAC,CAAI,MAAC,CAAM,CAAC;oBAsF/B,MAAxB,CArF+B,MAAA,CAAO;gBAsFtC,CAAqB,CArFC,CAAC;YAsFX,KArFK,MAAA;gBAsFD,MAAM,CArFC,MAAC,GAAQ,IAAA,CAAK,YAAC,CAAY,UAAC,CAAU,CAAC;gBAsF9C,MAAhB,CArFuB,IAAA,CAAK,UAAC,CAAU,UAAC,CAAU;qBAsF7B,IArFC,CAAI,UAAC,MAAe;oBAsFlB,MAAM,CArFC,IAAC,GAAM,MAAA,CAAO;oBAsFrB,KAAI,CArFC,YAAC,CAAY,IAAC,CAAI,MAAC,CAAM,CAAC;oBAsF/B,MAAxB,CArF+B,MAAA,CAAO;gBAsFtC,CAAqB,CArFC,CAAC;YAsFX;gBACI,MAAM,CArFC,MAAC,GAAQ,IAAA,CAAK,YAAC,CAAY,UAAC,CAAU,CAAC;gBAsF9C,IAAI,CArFC,YAAC,CAAY,IAAC,CAAI,MAAC,CAAM,CAAC;gBAsF/B,MAAhB,CArFuB,MAAA,CAAO;QAsF9B,CAAS;IACT,CAAK;;;;;IAnFA,4CAAA,GAAA,UAAA,UAAA;QAyFG,IAAR,gBAAA,CAxFc,WAAA,GAAc,UAAA,CAAW,SAAC,CAAS,QAAC,GAAU,IAAA,CAAK,MAAC,EAAO,IAAA,CAAK,UAAC,EAAU,CAAE,CAAC;QAyFpF,IAAI,CAxFC,kBAAC,CAAkB,IAAC,CAAI,WAAC,CAAW,CAAC;QAyF1C,MAAR,CAxFe,WAAA,CAAY;IAyF3B,CAAK;;;;;IAtFA,0CAAA,GAAA,UAAA,UAAA;QAAA,iBAmGA;QAPG,MAAR,CA3Fe,IAAA,CAAK,aAAC,CAAa,UAAC,CAAU;aA4FhC,IA3FC,CAAI,UAAC,MAAe;YA4FlB,EAAhB,CAAA,CAAoB,MA3FC,CA2FrB,CA3F4B,CA2F5B;gBACoB,KAAI,CA3FC,gBAAC,CAAgB,IAAC,CAAI,MAAC,CAAM,CAAC;YA4FvD,CAAiB;YACD,MAAhB,CA3FuB,MAAA,CAAO;QA4F9B,CAAa,CA3FC,CAAC;IA4Ff,CAAK;;;;;IAzFA,6CAAA,GAAA,UAAA,UAAA;QAAA,iBAsGA;QAPG,MAAR,CA9Fe,IAAI,OAAA,CAAQ,UAAC,OAAC;YA+FjB,UAAU,CA9FC,MAAC,CA+FR,UAAC,MA9Fe,IAAS,OAAA,KAAA,CAAK,IAAC,CAAI,GAAC,CAAG,cAAM,OAAA,OAAA,CAAQ,MAAC,CAAM,EAAf,CAAe,CAAC,EAApC,CAAoC,EA+F7D,QAAQ,GA9FG,KAAA,CAAK,MAAC,EA+FjB,KAAI,CA9FC,UAAC,EAAU,CA+FnB,CA9FC;QA+Fd,CAAS,CA9FC,CAAC;IA+FX,CAAK;;;;IA5FA,0CAAA,GAAA;QAiGG,MAAR,CAhGe,IAAA,CAAK,GAAC,CAAG,CAAC,EAAE,IAAA,CAAK,GAAC,CAAG,CAAC,EAAE,IAAA,CAAK,YAAC,GAAc,GAAA,CAAI,CAAC,CAAC;IAiGjE,CAAK;;;;;;IA9FA,8CAAA,GAAA,UAAA,KAAA,EAAA,MAAA;QAqGG,EAAR,CAAA,CAAY,IApGC,CAAI,aAAC,GAAe,CAAA,CAoGjC,CApGoC,CAoGpC;YACY,EAAZ,CAAA,CAAgB,CApGC,IAAC,CAAI,aAAC,IAAgB,KAAA,GAAQ,IAAA,CAAK,aAAC,CAoGrD,CApGmE,CAoGnE;gBACgB,MAAhB,CApGuB,IAAA,CAAK,aAAC,GAAe,KAAA,CAAM;YAqGlD,CAAa;QACb,CAAS;QApGT,IAAA,CAAe,EAAf,CAAA,CAAe,IAAK,CAAI,cAAC,GAAgB,CAAA,CAAzC,CAA4C,CAA5C;YAqGY,EAAZ,CAAA,CAAgB,CApGC,IAAC,CAAI,aAAC,IAAgB,MAAA,GAAS,IAAA,CAAK,cAAC,CAoGtD,CApGqE,CAoGrE;gBACgB,MAAhB,CApGuB,IAAA,CAAK,cAAC,GAAgB,MAAA,CAAO;YAqGpD,CAAa;QACb,CAAS;QACD,MAAR,CApGe,CAAA,CAAE;IAsGjB,CAAK;;;;;IAlGA,0CAAA,GAAA,UAAA,KAAA;QAwGG,MAAR,CAvGe,KAAA,CAAM,OAAC,IAAU,KAAA,CAAM,OAAC,IAAU,KAAA,CAAM,OAAC,CAAO,CAAC,CAAC,IAAI,KAAA,CAAM,OAAC,CAAO,CAAC,CAAC,CAAC,OAAC,CAAO;IAwG9F,CAAK;;;;;IArGA,0CAAA,GAAA,UAAA,KAAA;QA2GG,MAAR,CA1Ge,KAAA,CAAM,OAAC,IAAU,KAAA,CAAM,OAAC,IAAU,KAAA,CAAM,OAAC,CAAO,CAAC,CAAC,IAAI,KAAA,CAAM,OAAC,CAAO,CAAC,CAAC,CAAC,OAAC,CAAO;IA2G9F,CAAK;;CAzrBL;AAglBO,qBAAP,CAAA,UAAO,GAAoC;IA2G3C,EA1GE,IAAA,EAAM,SAAA,EAAW,IAAA,EAAM,CAAA;gBA2GrB,QAAQ,EA1GE,eAAA;gBA2GV,QAAQ,EA1GE,wnHAwLT;gBACD,MAAM,EA1GE,CAAA,yxJAqPP,CA1GC;gBA2GF,eAAe,EA1GE,uBAAA,CAAwB,MAAC;aA2G7C,EA1GC,EAAG;CA2GJ,CA1GC;;;;AAED,qBAAD,CAAA,cAAC,GAAA,cAAA,OAAA;IA6GD,EAAC,IAAI,EAAE,YAAY,GAAG;IACtB,EAAC,IAAI,EAAE,iBAAiB,GAAG;IAC3B,EAAC,IAAI,EAAE,MAAM,GAAG;CACf,EAhHA,CAgHA,CAAC;AA3GK,qBAAP,CAAA,cAAO,GAAyD;IA6GhE,aAAa,EA5GE,CAAA,EAAG,IAAA,EAAM,SAAA,EAAW,IAAA,EAAM,CAAA,aAAE,EAAa,EAAG,EAAE;IA6G7D,kBAAkB,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GrC,mBAAmB,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GtC,aAAa,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GhC,QAAQ,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6G3B,YAAY,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6G/B,qBAAqB,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GxC,aAAa,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GhC,eAAe,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GlC,gBAAgB,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GnC,iBAAiB,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GpC,kBAAkB,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GrC,cAAc,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GjC,eAAe,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GlC,cAAc,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GjC,UAAU,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6G7B,iBAAiB,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GpC,0BAA0B,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6G7C,SAAS,EA5GE,CAAA,EAAG,IAAA,EAAM,KAAA,EAAM,EAAE;IA6G5B,YAAY,EA5GE,CAAA,EAAG,IAAA,EAAM,WAAA,EAAa,IAAA,EAAM,CAAA,kBAAE,EAAkB,EAAG,EAAE,EAAE,IAAA,EAAM,KAAA,EAAM,EAAE;IA6GnF,gBAAgB,EA5GE,CAAA,EAAG,IAAA,EAAM,MAAA,EAAO,EAAE;IA6GpC,cAAc,EA5GE,CAAA,EAAG,IAAA,EAAM,MAAA,EAAO,EAAE;IA6GlC,oBAAoB,EA5GE,CAAA,EAAG,IAAA,EAAM,MAAA,EAAO,EAAE;IA6GxC,kBAAkB,EA5GE,CAAA,EAAG,IAAA,EAAM,MAAA,EAAO,EAAE;IA6GtC,aAAa,EA5GE,CAAA,EAAG,IAAA,EAAM,MAAA,EAAO,EAAE;IA6GjC,cAAc,EA5GE,CAAA,EAAG,IAAA,EAAM,MAAA,EAAO,EAAE;IA6GlC,iBAAiB,EA5GE,CAAA,EAAG,IAAA,EAAM,MAAA,EAAO,EAAE;IA6GrC,UAAU,EA5GE,CAAA,EAAG,IAAA,EAAM,YAAA,EAAc,IAAA,EAAM,CAAA,eAAE,EAAe,EAAG,EAAE;IA6G/D,SAAS,EA5GE,CAAA,EAAG,IAAA,EAAM,YAAA,EAAc,IAAA,EAAM,CAAA,oBAAE,EAAqB,CAAA,QAAE,CAAQ,EAAC,EAAG,EAAE,EAAE,IAAA,EAAM,YAAA,EAAc,IAAA,EAAM,CAAA,oBAAE,EAAqB,CAAA,QAAE,CAAQ,EAAC,EAAG,EAAE;IA6GlJ,UAAU,EA5GE,CAAA,EAAG,IAAA,EAAM,YAAA,EAAc,IAAA,EAAM,CAAA,kBAAE,EAAkB,EAAG,EAAE,EAAE,IAAA,EAAM,YAAA,EAAc,IAAA,EAAM,CAAA,mBAAE,EAAmB,EAAG,EAAE;CA6GvH,CA5GC;AD71BF;IAAA;;;CAAA;AAEwC,kBAAxC,CAAA,UAAwC,GAAoC;IAD5E,EAEE,IAAA,EAAM,QAAA,EAAU,IAAA,EAAM,CAAA;gBADpB,OAAO,EAEE;oBADL,YAAY;iBACf;gBACD,YAAY,EAEE;oBADV,qBAAqB;iBACxB;gBACD,OAAO,EAEE;oBADL,qBAAqB;iBACxB;aACJ,EAEC,EAAG;CADJ,CAEC;;;;AAED,kBAAD,CAAA,cAAC,GAAA,cAAA,OAAA,EACA,EADA,CACA,CAAC;ADpBF;;GAEG;"}
