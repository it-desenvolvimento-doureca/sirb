{"version":3,"file":"report.component.js","sourceRoot":"","sources":["../../src/report/report.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,sCASuB;AAEvB,oEAA0D;AAC1D,qDAA0C;AAO1C;IAOI,yBAAY,MAAoB;QAAhC,iBAUC;QAfS,UAAK,GAAG,IAAI,mBAAY,EAAE,CAAC;QAC3B,YAAO,GAAG,IAAI,mBAAY,EAAE,CAAC;QAKnC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,UAAC,CAAC;YAC3B,CAAC,CAAC,MAAM,CAAC;gBACL,QAAQ,EAAE,KAAI,CAAC,QAAQ;gBACvB,SAAS,EAAE,KAAI,CAAC,SAAS,CAAC,aAAa;gBACvC,MAAM,EAAE,KAAI,CAAC,SAAS,EAAE;gBACxB,KAAK,EAAE,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAI,CAAC;gBAC9B,OAAO,EAAE,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAI,CAAC;aACrC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAED,mCAAS,GAAT;QACE,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAC,IAAI,EAAE,KAAK;YACpC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;YAC/D,MAAM,CAAC,IAAI,CAAC;QACd,CAAC,EAAE,EAAE,CAAC,CAAC;IACT,CAAC;IAED,iCAAO,GAAP,UAAQ,GAAG;QACP,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,KAAA,EAAE,CAAC,CAAC;IAC7B,CAAC;IAED,mCAAS,GAAT;QACI,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACxB,CAAC;IACL,sBAAC;AAAD,CAAC,AAjCD,IAiCC;AAhCY;IAAR,YAAK,EAAE;;iDAAiB;AACf;IAAT,aAAM,EAAE;;8CAA4B;AAC3B;IAAT,aAAM,EAAE;;gDAA8B;AACf;IAAvB,gBAAS,CAAC,WAAW,CAAC;8BAAW,iBAAU;kDAAC;AACrB;IAAvB,sBAAe,CAAC,uBAAK,CAAC;;+CAAgB;AAL3C;IALC,gBAAS,CAAC;QACP,QAAQ,EAAE,WAAW;QACrB,QAAQ,EAAE,wBAAwB;KACrC,CAAC;qCASqB,sCAAa;mBA0BnC;AAjCY,0BAAA,eAAe,CAAA","sourcesContent":["import {\n    Component,\n    OnInit,\n    Input,\n    Output,\n    ViewChild,\n    ContentChildren,\n    ElementRef,\n    EventEmitter\n} from '@angular/core';\n\nimport { AngularJasper } from \"../angular-jasper.service\";\nimport { Param } from './param.directive';\n\n@Component({\n    selector: 'jr-report',\n    template: '<div #container></div>'\n})\n\nexport class ReportComponent {\n    @Input() resource:string;\n    @Output() error = new EventEmitter();\n    @Output() success = new EventEmitter();\n    @ViewChild('container') container:ElementRef;\n    @ContentChildren(Param) params:Param[];\n\n    constructor(jasper:AngularJasper) {\n        jasper.visualizePromise.then((v)=>{\n            v.report({\n                resource: this.resource,\n                container: this.container.nativeElement,\n                params: this.getParams(),\n                error: this.onError.bind(this),\n                success: this.onSuccess.bind(this)\n            });\n        });\n    }\n\n    getParams() {\n      return this.params.reduce((memo, param) => {\n        memo[param.name] = JSON.parse(param.value.replace(/'/g, '\\\"'));\n        return memo;\n      }, {});\n    }\n\n    onError(err) {\n        this.error.emit({ err });\n    }\n\n    onSuccess() {\n        this.success.emit();\n    }\n}\n"]}