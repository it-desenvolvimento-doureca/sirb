<div class="col-md-12  hidden-xs">
  <div class="card-header" data-background-color="orange">
    <div class="nav-tabs-navigation">
      <div class="nav-tabs-wrapper">
        <ul class="nav nav-tabs" style="background:black">
          <li>
            <a (click)=" backClicked()">
              <i class="material-icons">arrow_back</i>Voltar
              <div class="ripple-container"></div>
            </a>
          </li>

        </ul>
      </div>
    </div>
  </div>
</div>
<div class="main-content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header" data-background-color="red">
            <h4 class="title">Análise Encomendas</h4>
          </div>
          <div class="card-content">
            <div class="btn-pref btn-group-justified btn-group-lg" role="group" aria-label="...">

              <div class="btn-group" role="group" style="border-right: 2px solid white;">
                <button s (click)="ativobt='1';" [class.ativobt]="ativobt == '1'" type="button" id="stars" class="btn "
                  href="#tab1" data-toggle="tab"><span class="glyphicon glyphicon-th" aria-hidden="true"></span>
                  <div class="hidden-xs">Análise por Referências</div>
                </button>
              </div>
              <div class="btn-group" role="group" style="border-right: 2px solid white;">
                <button (click)="ativobt='2';" [class.ativobt]="ativobt == '2'" type="button" id="favorites" class="btn"
                  href="#tab2" data-toggle="tab"><span class="glyphicon glyphicon-th" aria-hidden="true"></span>
                  <div class="hidden-xs">Análise por Encomenda</div>
                </button>
              </div>
              <div class="btn-group" role="group" style="border-right: 2px solid white;">
                <button (click)="ativobt='3';" [class.ativobt]="ativobt == '3'" type="button" id="favorites" class="btn"
                  href="#tab3" data-toggle="tab"><span class="glyphicon glyphicon-th" aria-hidden="true"></span>
                  <div class="hidden-xs">Análise de Previsões/Realizações</div>
                </button>
              </div>
            </div>
            <div class="well" style="display: flex;">
              <div class="tab-content" style="width: 100%;">
                <div class="tab-pane fade in active" id="tab1">
                  <div
                    style="padding: 1px 0px 1px 0px; border-top: 1px dashed grey; border-bottom: 1px dashed grey; margin-bottom: 15px;"
                    class="form-group col-md-12 col-lg-12 filtros_analiseencomendas_1">
                    <form #form id="formReclama" (ngSubmit)="atualizar()" ngNativeValidate>

                      <div class="table-row-column col-md-3" style="height: 64px; padding-left: 6px;"><label>Analisar
                          Encomendas
                          entre:</label><br>
                        <p-calendar [style]="{'height':'25px','width':'100px','margin-right': '29px'}"
                          dateFormat="yy-mm-dd" placeholder="yyyy-mm-dd" [monthNavigator]="true" [yearNavigator]="true"
                          yearRange="2000:2050" [(ngModel)]="data_inicio" [ngModelOptions]="{standalone: true}"
                          [showIcon]="true" [required]="true">
                        </p-calendar> e
                        <p-calendar [style]="{'height':'25px','width':'100px','margin-right': '29px'}"
                          dateFormat="yy-mm-dd" placeholder="yyyy-mm-dd" [monthNavigator]="true" [yearNavigator]="true"
                          yearRange="2000:2050" [(ngModel)]="data" [ngModelOptions]="{standalone: true}"
                          [showIcon]="true" [required]="true">
                        </p-calendar>
                      </div>
                      <div class="table-row-column col-md-1" style="height: 64px;"> <label>Código Cliente:</label><br>
                        <input type="text" class="form-control2" [(ngModel)]="codigo_cliente" style="width: 90%;"
                          [ngModelOptions]="{standalone: true}" placeholder="" />
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Nome Cliente:</label><br>
                        <input type="text" class="form-control2" [(ngModel)]="nome_cliente"
                          [ngModelOptions]="{standalone: true}" placeholder="" />
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Referência
                          (principal):</label><br>
                        <p-autoComplete [(ngModel)]="campo_ref" [suggestions]="filteredreferencias"
                          class="autocompleseguranca" [style]="{'width': '100%', 'height': '25px'}"
                          forceSelection="true" emptyMessage="Sem Resultados..." (onUnselect)="filteronUnselect($event)"
                          (onSelect)="filterSelect($event)" [ngModelOptions]="{standalone: true}"
                          (completeMethod)="filterRef($event)" field="label" placeholder="Pesquisar..." [minLength]="1">
                        </p-autoComplete>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Lista Clientes:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_clientes"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="clientes" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Lista Armazéns:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_armazens"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="armazens" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Programa:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_programas"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="programas" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Veículo:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_veiculos"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="veiculos" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>OEM:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_oem"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="oem" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Fábricas:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_fabricas"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="fabricas" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>

                      <div class="table-row-column col-md-3" style="padding-top: 12px;"> <br>
                        <p-checkbox [(ngModel)]="negativos" [ngModelOptions]="{standalone: true}"
                          label="Listar registos com disponibilidade < 0" binary="true">
                        </p-checkbox>
                      </div>
                      <div class="table-row-column col-md-1" style="height: 64px;">
                        <button type="submit" class="btn btn-success " [disabled]="false" [disabled]="loading"
                          style="margin: 23px 0 0 0px; height: 27px; padding: 0px 10px 0 10px;">Aplicar</button>
                      </div>


                    </form>
                  </div>
                  <div id="cabsize1" [class.classloading]="loading" style="display: none;">
                  </div>
                  <div class="table-row table-header cab_analiseencomendas_1"
                    style="background: #757676; color: white; font-weight: 500;">
                    <div class="table-row-column col-md-2">Cód. Referência<br>
                      <input style="font-weight: 100; height: 19px; color: black;" #myInput type="text"
                        class="form-control2" (input)="filterItem(myInput.value)" />
                    </div>
                    <div class=" table-row-column col-md-3" style="text-align: left;">Designação da Referência</div>
                    <div class="table-row-column col-md-2" style="text-align: left;">Fase</div>
                    <div class="table-row-column col-md-1" style="text-align: right;">Stock</div>
                    <div class="table-row-column col-md-1" style="text-align: right;">Total Enc</div>
                    <div class="table-row-column col-md-1" style="text-align: right; padding: 0;">Disponibilidade</div>
                    <div class="table-row-column col-md-1">Após-Venda</div>
                  </div>
                  <div id="chartcurtain" [class.classloading]="loading" style="display: none;">
                    Carregar...
                  </div>
                  <div id="chartcurtain" class="classloading" *ngIf="!loading && dados.length == 0">
                    Sem dados...
                  </div>
                  <div class="table-row col-md-12" *ngFor="let ref of dados">

                    <!--REF-->
                    <div class="table-row-column col-md-12 pointer referenciacol referenciacol_hover" data-toggle="collapse"
                      id="referencia{{ref.id}}" [attr.data-target]="'#collapseref'+ref.id"
                      (click)="getdadosreferencia(ref.id); " style="background: #d9d9d9;" #divref
                      [class.disabled]="ref.atualiza">
                      <div class="col-md-2" style="text-align: left;">
                        <span style="pointer-events: none;" *ngIf="!ref.iconplus" class="fa fa-minus"
                          aria-hidden="true"></span>
                        <span style="pointer-events: none;" *ngIf="ref.iconplus" class="fa fa-plus"
                          aria-hidden="true"></span> {{ref.cod_ref}}
                        <div *ngIf="ref.atualiza" class="fa fa-spinner fa-spin"></div>
                      </div>
                      <div class=" table-row-column col-md-3" style="text-align: left;">{{ref.design}}</div>
                      <div class="table-row-column col-md-2" style="text-align: left;">{{ref.fase}}</div>
                      <div class="table-row-column col-md-1" style="text-align: right;">
                        {{ref.stock | number: '1.'}}
                      </div>
                      <div class="table-row-column col-md-1" style="text-align: right;">
                        {{ref.total_enc | number: '1.'}}</div>
                      <div class="table-row-column col-md-1" [style.color]="( 0 > ref.diferenca)? '#fa33339c' : ''"
                        style="text-align: right; padding: 0;">
                        {{ref.diferenca | number: '1.'}}</div>
                      <div class="table-row-column col-md-1"> {{ref.pv}}</div>
                    </div>


                    <div class="table-row collapse col-md-12" id="collapseref{{ref.id}}">
                      <!-- ENCOMENDAS -->
                      <div class="table-row col-md-12">
                        <div class="table-row-column col-md-12 pointer" data-toggle="collapse"
                          id="collapseenc{{ref.id}}encomendas"
                          style="font-weight: 500; background: #ccd0d8; height:46px;"
                          [attr.data-target]="'#collapseencomendas'+ref.id+'encomendas'" #divenc
                          (click)="ref.iconplusenc = !ref.iconplusenc">

                          <div class="col-md-1" style="background: whitesmoke; height: 100%;"> &nbsp;</div>
                          <div class="col-md-1"
                            style="background: #ccd0d8; text-align: left; width: 9%; height: 100%; display: table;">
                            <span style=" pointer-events: none; vertical-align: middle; display: table-cell;"
                              *ngIf="!divenc.classList.contains('collapsed')" class="fa fa-minus"
                              aria-hidden="true"></span>
                            <span style="pointer-events: none; vertical-align: middle; display: table-cell;"
                              *ngIf="divenc.classList.contains('collapsed')" class="fa fa-plus"
                              aria-hidden="true"></span>
                            <span style="vertical-align: middle; display: table-cell">Data Enc.</span>
                            <div *ngIf="ref.atualizaenc" class="fa fa-spinner fa-spin"></div>
                          </div>
                          <div class="col-md-1"
                            style="background: #ccd0d8;  width: 5%; padding: 0; height: 100%; display: table;">
                            <span style="vertical-align: middle; display: table-cell">Semana</span>
                          </div>
                          <div class="col-md-1" style="background: #ccd0d8;  width:40.6666667%; padding: 0;">
                            <div class="col-md-12"
                              style="background: #ccd0d8; text-align: center; border: 1px solid; border-bottom: none;">
                              Quantidades Encomendadas
                            </div>
                            <div class="col-md-1"
                              style="background: #ccd0d8;  padding: 0; width: 11%; border: 1px solid;">
                              Pedido
                            </div>
                            <div class="col-md-1"
                              style="background: #ccd0d8;   padding: 0;  width: 20%; border: 1px solid;">
                              Disponibilidade
                            </div>
                            <div class="col-md-1"
                              style="background: #ccd0d8;   padding: 0; width: 20%; border: 1px solid;">
                              Mín/semana
                            </div>
                            <div class="col-md-1"
                              style="background: #ccd0d8;  padding: 0;  width: 32%; border: 1px solid; min-width: 156px;">
                              Cap. Comprada/Semana
                            </div>
                            <div class="col-md-1"
                              style="background: #ccd0d8;   padding: 0; width: 17%; border: 1px solid;">
                              Saldo Máx.
                            </div>

                          </div>
                          <div class="col-md-1"
                            style="background: #ccd0d8; width: 8%; padding: 0; height: 100%; display: table;">
                            <span style="vertical-align: middle; display: table-cell">Cód. Cliente</span>
                          </div>
                          <div class="col-md-1"
                            style="background: #ccd0d8; padding: 0; width: 4%; height: 100%; display: table;">
                            <span style="vertical-align: middle; display: table-cell">Estab.</span>
                          </div>
                          <div class="col-md-3"
                            style="background: #ccd0d8; text-align: left; width: 25%; height: 100%; display: table;">
                            <span style="vertical-align: middle; display: table-cell">Nome Cliente</span>
                          </div>

                        </div>
                      </div>

                      <div class="table-row-column collapse col-md-12" id="collapseencomendas{{ref.id}}encomendas"
                        style="padding: 0;">
                        <div class="table-row col-md-12" *ngFor="let enc of ref.encomendas" style="border-bottom:none;">
                          <!-- dados encomenda -->
                          <div class="table-row-column col-md-12 pointer" data-toggle="collapse">
                            <div class="col-md-1"></div>
                            <div class="col-md-1" style="background: aliceblue; text-align: center; width: 9%;">
                              {{enc.data}}
                            </div>
                            <div class="col-md-1"
                              style="background: aliceblue; text-align: center; width: 5%; padding: 0 ;">
                              {{enc.semana}}
                            </div>
                            <div class="col-md-1"
                              style="background: aliceblue; text-align: center;  width:40.6666667%; padding: 0 ;">
                              <div class="col-md-1"
                                style="background: aliceblue; text-align: right;  width: 11%; padding: 0 4px 0 0;"
                                [style.color]="(  enc.quantidade_encomenda < enc.quant_min_encomenda)? '#fa33339c' : ''">
                                {{enc.quantidade_encomenda | number: '1.'}}
                              </div>
                              <div class="col-md-1" style="background: aliceblue; text-align: right;  width: 20%;"
                                [style.color]="( 0  > enc.disponibilidade)? '#fa33339c' : ''">
                                {{enc.disponibilidade | number: '1.'}}
                              </div>
                              <div class="col-md-1" style="background: aliceblue; text-align: center; width: 20%;">
                                {{enc.quant_min_encomenda | number: '1.'}} &nbsp;
                              </div>
                              <div class="col-md-1"
                                style="background: aliceblue; text-align: center;  width: 32%; min-width: 156px;">
                                {{enc.quant_max_encomenda | number: '1.'}} &nbsp;
                              </div>
                              <div class="col-md-1" style="background: aliceblue; text-align: right;  width: 17%;"
                                [style.color]="(  0 > enc.quantidade_saldo)? '#fa33339c' : ''">
                                {{enc.quantidade_saldo | number: '1.'}}
                              </div>
                            </div>
                            <div class="col-md-1" style="background: aliceblue;  width: 8%;padding: 0;">
                              {{enc.cod_cliente}}
                            </div>
                            <div class="col-md-1" style="background: aliceblue; padding: 0; width: 4%;  width: 4%;">
                              {{enc.estabelecimento}}
                            </div>
                            <div class="col-md-3" style="background: aliceblue; text-align: left;  width: 25%;">
                              {{enc.nome_cliente}}
                            </div>

                          </div>
                        </div>
                      </div>
                      <!-- ENCOMENDAS  FIM -->

                      <!-- COMPONENTES -->
                      <div class="table-row col-md-12">
                        <div class="table-row-column col-md-12 pointer" data-toggle="collapse"
                          id="collapsecomp{{ref.id}}componentes" style="font-weight: 500;"
                          (click)="ref.iconpluscomp = !ref.iconpluscomp" #divcomp
                          [attr.data-target]="'#collapsecomponentes'+ref.id+'componentes'">
                          <div class="col-md-1"></div>

                          <div class="col-md-2" style="background: #ccd0d8; text-align: left;">
                            <span style="pointer-events: none;" *ngIf="!divcomp.classList.contains('collapsed')"
                              class="fa fa-minus" aria-hidden="true"></span>
                            <span style="pointer-events: none;" *ngIf="divcomp.classList.contains('collapsed')"
                              class="fa fa-plus" aria-hidden="true"></span>
                            Código Componente
                            <div *ngIf="ref.atualizacomp" class="fa fa-spinner fa-spin"></div>
                          </div>
                          <div class="col-md-3" style="background: #ccd0d8; text-align: left;">
                            Designação
                          </div>
                          <div class="col-md-1" style="background: #ccd0d8; text-align: right;">
                            Stock
                          </div>

                          <div class="col-md-1" style="background: #ccd0d8">
                            &nbsp;
                          </div>
                          <div class="col-md-4" style="background: #ccd0d8">
                            &nbsp;
                          </div>
                        </div>
                      </div>

                      <div class="table-row-column collapse col-md-12" id="collapsecomponentes{{ref.id}}componentes"
                        style="padding: 0;">
                        <div class="table-row col-md-12" *ngFor="let comp of ref.componentes"
                          style="border-bottom:none;">
                          <!-- dados componentes -->
                          <div class="table-row-column col-md-12 pointer" data-toggle="collapse">
                            <div class="col-md-1"></div>
                            <div class="col-md-2"
                              style="background: aliceblue; text-align: left; padding-left:1em; padding-right: 0;">
                              ● {{comp.cod_ref}}
                            </div>
                            <div class="col-md-3" style="background: aliceblue; text-align: left;">
                              {{comp.design}}
                            </div>
                            <div class="col-md-1" style="background: aliceblue; text-align: right;">
                              {{comp.stock | number: '1.'}}
                            </div>
                            <div class="col-md-1" style="background: aliceblue;">
                              &nbsp;
                            </div>
                            <div class="col-md-4" style="background: aliceblue;">
                              &nbsp;
                            </div>
                          </div>
                          <div class="table-row col-md-12" *ngFor="let comp2 of comp.filhos"
                            style="border-bottom:none;">
                            <div class="table-row-column col-md-12 pointer" data-toggle="collapse">
                              <div class="col-md-1"></div>
                              <div class="col-md-2"
                                style="background: aliceblue; text-align: left;padding-left: 2em; padding-right: 0;">
                                ●● {{comp2.cod_ref}}
                              </div>
                              <div class="col-md-3" style="background: aliceblue; text-align: left;">
                                {{comp2.design}}
                              </div>
                              <div class="col-md-1" style="background: aliceblue; text-align: right;">
                                {{comp2.stock | number: '1.'}}
                              </div>
                              <div class="col-md-1" style="background: aliceblue;">
                                &nbsp;
                              </div>
                              <div class="col-md-4" style="background: aliceblue;">
                                &nbsp;
                              </div>
                            </div>
                            <div class="table-row col-md-12" *ngFor="let comp3 of comp2.filhos"
                              style="border-bottom:none;">
                              <div class="table-row-column col-md-12 pointer" data-toggle="collapse">
                                <div class="col-md-1"></div>
                                <div class="col-md-2"
                                  style="background: aliceblue; text-align: left; padding-left: 3em; padding-right: 0;">
                                  ●●● {{comp3.cod_ref}}
                                </div>
                                <div class="col-md-3" style="background: aliceblue; text-align: left;">
                                  {{comp3.design}}
                                </div>
                                <div class="col-md-1" style="background: aliceblue; text-align: right;">
                                  {{comp3.stock | number: '1.'}}
                                </div>
                                <div class="col-md-1" style="background: aliceblue;">
                                  &nbsp;
                                </div>
                                <div class="col-md-4" style="background: aliceblue;">
                                  &nbsp;
                                </div>
                              </div>
                              <div class="table-row col-md-12" *ngFor="let comp4 of comp3.filhos"
                                style="border-bottom:none;">
                                <div class="table-row-column col-md-12 pointer" data-toggle="collapse">
                                  <div class="col-md-1"></div>
                                  <div class="col-md-2"
                                    style="background: aliceblue; text-align: left; padding-left: 4em; padding-right: 0;">
                                    ●●●● {{comp4.cod_ref}}
                                  </div>
                                  <div class="col-md-3" style="background: aliceblue; text-align: left;">
                                    {{comp4.design}}
                                  </div>
                                  <div class="col-md-1" style="background: aliceblue; text-align: right;">
                                    {{comp4.stock | number: '1.'}}
                                  </div>
                                  <div class="col-md-1" style="background: aliceblue;">
                                    &nbsp;
                                  </div>
                                  <div class="col-md-4" style="background: aliceblue;">
                                    &nbsp;
                                  </div>
                                </div>
                                <div class="table-row col-md-12" *ngFor="let comp5 of comp4.filhos"
                                  style="border-bottom:none;">
                                  <div class="table-row-column col-md-12 pointer" data-toggle="collapse">
                                    <div class="col-md-1"></div>
                                    <div class="col-md-2"
                                      style="background: aliceblue; text-align: left;  padding-left: 5em; padding-right: 0;">
                                      ●●●●● {{comp5.cod_ref}}
                                    </div>
                                    <div class="col-md-3" style="background: aliceblue; text-align: left;">
                                      {{comp5.design}}
                                    </div>
                                    <div class="col-md-1" style="background: aliceblue; text-align: right;">
                                      {{comp5.stock | number: '1.'}}
                                    </div>
                                    <div class="col-md-1" style="background: aliceblue;">
                                      &nbsp;
                                    </div>
                                    <div class="col-md-4" style="background: aliceblue;">
                                      &nbsp;
                                    </div>
                                  </div>
                                  <div class="table-row col-md-12" *ngFor="let comp6 of comp5.filhos"
                                    style="border-bottom:none;">
                                    <div class="table-row-column col-md-12 pointer" data-toggle="collapse">
                                      <div class="col-md-1"></div>
                                      <div class="col-md-2"
                                        style="background: aliceblue; text-align: left;  padding-left: 6em; padding-right: 0;">
                                        ●●●●●● {{comp6.cod_ref}}
                                      </div>
                                      <div class="col-md-3" style="background: aliceblue; text-align: left;">
                                        {{comp6.design}}
                                      </div>
                                      <div class="col-md-1" style="background: aliceblue;">
                                        {{comp6.stock}}
                                      </div>
                                      <div class="col-md-1" style="background: aliceblue;">
                                        &nbsp;
                                      </div>
                                      <div class="col-md-4" style="background: aliceblue;">
                                        &nbsp;
                                      </div>
                                    </div>
                                    <div class="table-row col-md-12" *ngFor="let comp7 of comp6.filhos"
                                      style="border-bottom:none;">
                                      <div class="table-row-column col-md-12 pointer" data-toggle="collapse">
                                        <div class="col-md-1"></div>
                                        <div class="col-md-2"
                                          style="background: aliceblue; text-align: left;  padding-left: 7em; padding-right: 0;">
                                          ●●●●●●● {{comp7.cod_ref}}
                                        </div>
                                        <div class="col-md-3" style="background: aliceblue; text-align: left;">
                                          {{comp7.design}}
                                        </div>
                                        <div class="col-md-1" style="background: aliceblue; text-align: right;">
                                          {{comp7.stock | number: '1.'}}
                                        </div>
                                        <div class="col-md-1" style="background: aliceblue;">
                                          &nbsp;
                                        </div>
                                        <div class="col-md-4" style="background: aliceblue;">
                                          &nbsp;
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- COMPONENTES  FIM -->

                      <!-- OEM -->
                      <div class="table-row col-md-12">
                        <div class="table-row-column col-md-12 pointer" data-toggle="collapse"
                          id="collapseoem{{ref.id}}oems" style="font-weight: 500;"
                          [attr.data-target]="'#collapseoems'+ref.id+'oems'"
                          (click)="ref.iconplusoem = !ref.iconplusoem" #divoem>
                          <div class="col-md-1"></div>

                          <div class="col-md-2" style="background: #ccd0d8; text-align: left;">
                            <span style="pointer-events: none;" *ngIf="!divoem.classList.contains('collapsed')"
                              class="fa fa-minus" aria-hidden="true"></span>
                            <span style="pointer-events: none;" *ngIf="divoem.classList.contains('collapsed')"
                              class="fa fa-plus" aria-hidden="true"></span>
                            OEM
                            <div *ngIf="ref.atualizaoem" class="fa fa-spinner fa-spin"></div>
                          </div>
                          <div class="col-md-1" style="background: #ccd0d8; text-align: left;">
                            Veículo
                          </div>
                          <div class="col-md-1" style="background: #ccd0d8;">
                            &nbsp;
                          </div>
                          <div class="col-md-3" style="background: #ccd0d8;text-align: left;">
                            Programa/Proj.
                          </div>
                          <div class="col-md-4" style="background: #ccd0d8">
                            &nbsp;
                          </div>
                        </div>
                      </div>

                      <div class="table-row-column collapse col-md-12" id="collapseoems{{ref.id}}oems"
                        style="padding: 0;">
                        <div class="table-row col-md-12" *ngFor="let oem of ref.oem" style="border-bottom:none;">
                          <!-- dados oem -->
                          <div class="table-row-column col-md-12 pointer" data-toggle="collapse">
                            <div class="col-md-1"></div>
                            <div class="col-md-2" style="background: aliceblue; text-align: left;">
                              {{oem.nome}}
                            </div>
                            <div class="col-md-2" style="background: aliceblue; text-align: left">
                              {{oem.veiculo}}
                            </div>
                            <div class="col-md-3" style="background: aliceblue;text-align: left;">
                              {{oem.programa}}
                            </div>
                            <div class="col-md-4" style="background: aliceblue;">
                              &nbsp;
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- OEM  FIM -->

                      <!-- FABRICAS -->
                      <div class="table-row col-md-12">
                        <div class="table-row-column col-md-12 pointer" data-toggle="collapse"
                          id="collapsefab{{ref.id}}fabricas" style="font-weight: 500;"
                          [attr.data-target]="'#collapsefabricas'+ref.id+'fabricas'"
                          (click)="ref.iconplusfab = !ref.iconplusfab" #divfab>
                          <div class="col-md-1"></div>

                          <div class="col-md-2" style="background: #ccd0d8; text-align: left;">
                            <span style="pointer-events: none;" *ngIf="!divfab.classList.contains('collapsed')"
                              class="fa fa-minus" aria-hidden="true"></span>
                            <span style="pointer-events: none;" *ngIf="divfab.classList.contains('collapsed')"
                              class="fa fa-plus" aria-hidden="true"></span>
                            Fábricas
                            <div *ngIf="ref.atualizafab" class="fa fa-spinner fa-spin"></div>
                          </div>
                          <div class="col-md-1" style="background: #ccd0d8">
                            %
                          </div>
                          <div class="col-md-1" style="background: #ccd0d8">
                            &nbsp;
                          </div>
                          <div class="col-md-3" style="background: #ccd0d8; text-align: left;">
                            Programa/Proj.
                          </div>
                          <div class="col-md-1" style="background: #ccd0d8">
                            &nbsp;
                          </div>
                          <div class="col-md-3" style="background: #ccd0d8">
                            &nbsp;
                          </div>
                        </div>
                      </div>

                      <div class="table-row-column collapse col-md-12" id="collapsefabricas{{ref.id}}fabricas"
                        style="padding: 0;">
                        <div class="table-row col-md-12" *ngFor="let fab of ref.fabricas" style="border-bottom:none;">
                          <!-- dados fabricas -->
                          <div class="table-row-column col-md-12 pointer" data-toggle="collapse">
                            <div class="col-md-1"></div>
                            <div class="col-md-2" style="background: aliceblue; text-align: left;">
                              {{fab.nome}}
                            </div>
                            <div class="col-md-1" style="background: aliceblue; ">
                              {{fab.percentagem}} %
                            </div>
                            <div class="col-md-1" style="background: aliceblue;">
                              &nbsp;
                            </div>
                            <div class="col-md-3" style="background: aliceblue; text-align: left;">
                              {{fab.programa}}
                            </div>
                            <div class="col-md-1" style="background: aliceblue;">
                              &nbsp;
                            </div>
                            <div class="col-md-3" style="background: aliceblue;">
                              &nbsp;
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- FABRICAS  FIM -->

                    </div>
                  </div>
                </div>



                <div class="tab-pane fade in" id="tab2">

                  <!-- ******************************* ENCOMENDA *************************-->


                  <div
                    style="padding: 1px 0px 1px 0px; border-top: 1px dashed grey; border-bottom: 1px dashed grey; margin-bottom: 15px;"
                    class="form-group col-md-12 col-lg-12 filtros_analiseencomendas_2">
                    <form #form id="formReclama1" (ngSubmit)="atualizar_enc()" ngNativeValidate>

                      <div class="table-row-column col-md-3" style="height: 64px; padding-left: 6px;"><label>Analisar
                          Encomendas
                          entre:</label><br>
                        <p-calendar [style]="{'height':'25px','width':'100px','margin-right': '29px'}"
                          dateFormat="yy-mm-dd" placeholder="yyyy-mm-dd" [monthNavigator]="true" [yearNavigator]="true"
                          yearRange="2000:2050" [(ngModel)]="data_enc_inicio" [ngModelOptions]="{standalone: true}"
                          [showIcon]="true" [required]="true">
                        </p-calendar> e
                        <p-calendar [style]="{'height':'25px','width':'100px','margin-right': '29px'}"
                          dateFormat="yy-mm-dd" placeholder="yyyy-mm-dd" [monthNavigator]="true" [yearNavigator]="true"
                          yearRange="2000:2050" [(ngModel)]="data_enc" [ngModelOptions]="{standalone: true}"
                          [showIcon]="true" [required]="true">
                        </p-calendar>
                      </div>
                      <div class="table-row-column col-md-1" style="height: 64px;"> <label>Código Cliente:</label><br>
                        <input type="text" class="form-control2" [(ngModel)]="codigo_cliente_enc" style="width: 90%;"
                          [ngModelOptions]="{standalone: true}" placeholder="" />
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Nome Cliente:</label><br>
                        <input type="text" class="form-control2" [(ngModel)]="nome_cliente_enc"
                          [ngModelOptions]="{standalone: true}" placeholder="" />
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Referência
                          (principal):</label><br>
                        <p-autoComplete [(ngModel)]="campo_ref_enc" [suggestions]="filteredreferencias_enc"
                          class="autocompleseguranca" [style]="{'width': '100%', 'height': '25px'}"
                          forceSelection="true" emptyMessage="Sem Resultados..."
                          (onUnselect)="filteronUnselect_enc($event)" (onSelect)="filterSelect_enc($event)"
                          [ngModelOptions]="{standalone: true}" (completeMethod)="filterRef_enc($event)" field="label"
                          placeholder="Pesquisar..." [minLength]="1">
                        </p-autoComplete>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Lista Clientes:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_clientes"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="clientes_enc" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Lista Armazéns:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_armazens"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="armazens_enc" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Programa:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_programas"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="programas_enc" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Veículo:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_veiculos"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="veiculos_enc" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>OEM:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_oem"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="oem_enc" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Fábricas:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_fabricas"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="fabricas_enc" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-3" style="padding-top: 12px;"><br>
                        <p-checkbox [(ngModel)]="negativos_enc" [ngModelOptions]="{standalone: true}"
                          label="Listar registos com disponibilidade < 0" binary="true">
                        </p-checkbox>
                      </div>
                      <div class="table-row-column col-md-1" style="height: 64px;">
                        <button type="submit" class="btn btn-success " [disabled]="false" [disabled]="loading"
                          style="margin: 23px 0 0 0px; height: 27px; padding: 0px 10px 0 10px;">Aplicar</button>
                      </div>

                    </form>
                  </div>
                  <div id="cabsize2" [class.classloading]="loading" style="display: none;">
                  </div>
                  <p-dataTable #tabeladados [value]="dados_tabela" [paginator]="true" [rows]="25"
                    [rowsPerPageOptions]="[25,50,100,'todos']" class="cab_analiseencomendas_2">

                    <p-column [style]="{'max-width':'20px','width':'20px','padding-left':' 2px','padding-right': '2px'}"
                      field="data" header="Data Encomenda" [filter]="true" [sortable]="true">
                    </p-column>

                    <p-column [style]="{'max-width':'23px','width':'23px','padding-left':' 2px','padding-right': '2px'}"
                      field="referencia" header="Cód. Referência" [filter]="true" [sortable]="true">
                      <ng-template let-car="rowData" pTemplate="body">
                        <span style="text-align: left; display: block;"> {{car['referencia']}}</span>
                      </ng-template>
                    </p-column>

                    <p-column [style]="{'max-width':'60px','width':'60px','padding-left':' 2px','padding-right': '2px'}"
                      field="descricao" header="Descrição" [filter]="true" [sortable]="true">
                      <ng-template let-car="rowData" pTemplate="body">
                        <span style="text-align: left; display: block;"> {{car['descricao']}}</span>
                      </ng-template>
                    </p-column>

                    <p-column [style]="{'max-width':'13px','width':'13px','padding-left':' 2px','padding-right': '2px'}"
                      field="quantidade_encomenda" header="Quant. Enc." [filter]="true" [sortable]="true">
                      <ng-template let-car="rowData" pTemplate="body">
                        <span style="text-align: right; padding-right: 4px; display: block;">
                          {{car['quantidade_encomenda'] | number: '1.'}}</span>
                      </ng-template>
                    </p-column>

                    <p-column [style]="{'max-width':'13px','width':'13px','padding-left':' 2px','padding-right': '2px'}"
                      field="quantidade" header="Disp." [filter]="true" [sortable]="true">
                      <ng-template let-car="rowData" pTemplate="body">
                        <div [style.color]="(car['quantidade'] < 0)? '#fa33339c': ''"
                          style="text-align: right; padding-right: 4px;">
                          {{car['quantidade'] | number: '1.'}}
                        </div>
                      </ng-template>
                    </p-column>

                    <!--<p-column [style]="{'max-width':'25px','padding-left':' 2px','padding-right': '2px'}" field="fabrica1"
                      header="Fábrica 1" [filter]="true" [sortable]="true">
                    </p-column>
                    <p-column [style]="{'max-width':'25px','padding-left':' 2px','padding-right': '2px'}" field="fabrica2"
                      header="Fábrica 2" [filter]="true" [sortable]="true">
                    </p-column>
                    <p-column [style]="{'max-width':'25px','padding-left':' 2px','padding-right': '2px'}" field="fabrica3"
                      header="Fábrica 3" [filter]="true" [sortable]="true">
                    </p-column>
                    <p-column [style]="{'max-width':'25px','padding-left':' 2px','padding-right': '2px'}" field="fabrica4"
                      header="Fábrica 4" [filter]="true" [sortable]="true">
                    </p-column>-->
                    <p-column [style]="{'max-width':'60px','width':'60px','padding-left':' 2px','padding-right': '2px'}"
                      field="cliente" header="Cliente" [filter]="true" [sortable]="true">
                      <ng-template let-car="rowData" pTemplate="body">
                        <span style="text-align: left; display: block;"> {{car['cliente']}}</span>
                      </ng-template>
                    </p-column>
                    <p-column [style]="{'max-width':'44px','width':'44px','padding-left':' 2px','padding-right': '2px'}"
                      field="fabricas" header="Fábricas" [filter]="true" [sortable]="true">
                    </p-column>

                    <p-column [style]="{'max-width':'20px','width':'20px','padding-left':' 2px','padding-right': '2px'}"
                      field="oem" header="OEM" [filter]="true" [sortable]="true">
                    </p-column>

                    <p-column [style]="{'max-width':'20px','width':'20px','padding-left':' 2px','padding-right': '2px'}"
                      field="projeto" header="PROJETO" [filter]="true" [sortable]="true">
                    </p-column>

                  </p-dataTable>






                </div>

                <div class="tab-pane fade in" id="tab3">
                  <div
                    style="padding: 1px 0px 1px 0px; border-top: 1px dashed grey; border-bottom: 1px dashed grey; margin-bottom: 15px;"
                    class="form-group col-md-12 col-lg-12 filtros_analiseencomendas_3">
                    <form #form id="formReclama2" (ngSubmit)="atualizar_encomendas()" ngNativeValidate>

                      <div class="table-row-column col-md-2" style="height: 64px; padding-left: 6px;">
                        <label>Semana de Análise</label><br>
                        <p-dropdown [filter]="true" [options]="anos" [style]="{'width':'50%','height': '25px'}"
                          [(ngModel)]="ano_analise" [ngModelOptions]="{standalone: true}" [required]="true"
                          appendTo="body"></p-dropdown>
                        <p-dropdown [filter]="true" [options]="semanas" [style]="{'width':'40%','height': '25px'}"
                          [(ngModel)]="semana_analise" [ngModelOptions]="{standalone: true}" [required]="true"
                          appendTo="body"></p-dropdown>
                      </div>
                      <div class="table-row-column col-md-1" style="height: 64px;"> <label>Código Cliente:</label><br>
                        <input type="text" class="form-control2" [(ngModel)]="codigo_cliente_encomendas"
                          style="width: 90%;" [ngModelOptions]="{standalone: true}" placeholder="" />
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Nome Cliente:</label><br>
                        <input type="text" class="form-control2" [(ngModel)]="nome_cliente_encomendas"
                          [ngModelOptions]="{standalone: true}" placeholder="" />
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Referência
                          (principal):</label><br>
                        <p-autoComplete [(ngModel)]="campo_ref_encomendas"
                          [suggestions]="filteredreferencias_encomendas" class="autocompleseguranca"
                          [style]="{'width': '100%', 'height': '25px'}" forceSelection="true"
                          emptyMessage="Sem Resultados..." (onUnselect)="filteronUnselect_encomendas($event)"
                          (onSelect)="filterSelect_encomendas($event)" [ngModelOptions]="{standalone: true}"
                          (completeMethod)="filterRef_encomendas($event)" field="label" placeholder="Pesquisar..."
                          [minLength]="1">
                        </p-autoComplete>
                      </div>
                      <!--div class="table-row-column col-md-2" style="height: 64px;"> <label>Lista Clientes:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_clientes"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="clientes" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div-->
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Programa:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_programas"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="programas_encomendas" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Veículo:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_veiculos"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="veiculos_encomendas" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>OEM:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_oem"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="oem_encomendas" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-2" style="height: 64px;"> <label>Fábricas:</label><br>
                        <p-multiSelect [filter]="true" appendTo="body" [options]="lista_fabricas"
                          [style]="{'width':'200px','height':'27px','background':'white','display': '-webkit-inline-box','padding-top': '1px'}"
                          [(ngModel)]="fabricas_encomendas" [ngModelOptions]="{standalone: true}">
                        </p-multiSelect>
                      </div>
                      <div class="table-row-column col-md-1" style="height: 64px;">
                        <button type="submit" class="btn btn-success " [disabled]="false"
                          [disabled]="loading_encomendas"
                          style="margin: 23px 0 0 0px; height: 27px; padding: 0px 10px 0 10px;">Aplicar</button>
                      </div>
                      <div class="table-row-column col-md-1" style="float: right;">
                        <div _ngcontent-c0="" class="scrollleft" style="display: block;"></div>
                        <div _ngcontent-c0="" class="scrollright" style="display: block;"></div>
                      </div>
                    </form>
                  </div>
                  <div id="cabsize3" [class.classloading]="loading_encomendas" style="display: none;">
                  </div>

                  <div id="analises_prev_scroll"
                    style="display: inline-block; overflow: auto; width: 100%; min-height: 200px; padding-bottom: 10px;">
                    <div style="display: block; min-width: 1550px;">
                      <div class="table-row table-header cab_analiseencomendas_3"
                        style="background: #757676; color: white; font-weight: 500;">
                        <div class="table-row-column col-md-5" style="padding: 0; width: 20%;">
                          <div class="table-row-column col-md-3 center_div cell_div">Nº Cliente
                            <!--br>
                      <input style="font-weight: 100; height: 19px; color: black;" #myInput type="text"
                        class="form-control2" (input)="filterItem(myInput.value)" /-->
                          </div>
                          <div class="table-row-column col-md-9 center_div cell_div" style="text-align: left;">Nome
                            Cliente
                          </div>
                          <div class="table-row-column col-md-12 cell_div"
                            style="text-align: right;  background: black;">TOTAIS:
                          </div>
                        </div>
                        <div class="table-row-column col-md-7" style="padding: 0; width: 80%;">
                          <div class="table-row-column col-md-12 cell_div">Week {{week}}
                          </div>
                          <div class="table-row-column col-md-12 cell_div">{{data_inicio_semana}} a {{data_fim_semana}}
                          </div>

                          <div class="table-row-column col-md-3 cell_div" style=" width: 23%;">Realização em <br>
                            {{dia_1}}</div>
                          <div class="table-row-column col-md-3 cell_div" style=" width: 20%;">Previsão em <br>
                            {{dia_2}}</div>
                          <div class="table-row-column col-md-3 cell_div" style=" width: 20%;">Previsão em <br>
                            {{dia_3}}</div>
                          <div class="table-row-column col-md-3 cell_div" style=" width: 20%;">Previsão em <br>
                            {{dia_4}}</div>
                          <div class="table-row-column col-md-3 cell_div" style=" width: 17%;">Previsão em <br>
                            {{dia_5}}</div>
                          <div class="table-row-column col-md-3" style="text-align: right; width: 23%; padding: 0;">
                            <div class="table-row-column col-md-4 cell_div" style="text-align: right;">Real</div>
                            <div class="table-row-column col-md-4 cell_div" style="text-align: right;">Atraso</div>
                            <div class="table-row-column col-md-4 cell_div" style="text-align: right;">Variação</div>
                          </div>
                          <div class="table-row-column col-md-3" style="text-align: right; width: 20%; padding: 0;">
                            <div class="table-row-column col-md-6 cell_div" style="text-align: right;">Prev</div>
                            <div class="table-row-column col-md-6 cell_div" style="text-align: right;">Variação</div>
                          </div>
                          <div class="table-row-column col-md-3" style="text-align: right; width: 20%; padding: 0;">
                            <div class="table-row-column col-md-6 cell_div" style="text-align: right;">Prev</div>
                            <div class="table-row-column col-md-6 cell_div" style="text-align: right;">Variação</div>
                          </div>
                          <div class="table-row-column col-md-3" style="text-align: right; width: 20%; padding: 0;">
                            <div class="table-row-column col-md-6 cell_div" style="text-align: right;">Prev</div>
                            <div class="table-row-column col-md-6 cell_div" style="text-align: right;">Variação</div>
                          </div>
                          <div class="table-row-column col-md-3" style="text-align: right; width: 17%; padding: 0;">
                            <div class="table-row-column col-md-12 cell_div" style="text-align: right;">Prev</div>
                            <!--div class="table-row-column col-md-6 cell_div" style="text-align: right;">Variação</div-->
                          </div>
                          <!--TOTAIS-->
                          <div class="table-row-column col-md-3" style="text-align: right; width: 23%; padding: 0;">
                            <div class="table-row-column col-md-4 cell_div"
                              style="text-align: right; font-size: 12px !important;  background: black; padding-right: 2px;">
                              {{total_real | number: '1.2-2'}} €</div>
                            <div class="table-row-column col-md-4 cell_div"
                              style="text-align: right; font-size: 12px !important;  background: black; padding-right: 2px;">
                              {{total_atraso | number: '1.2-2'}} €</div>
                            <div class="table-row-column col-md-4 cell_div"
                              style="text-align: right; font-size: 12px !important;  background: black; padding-right: 2px;">
                              {{total_variacao | number: '1.2-2'}} €</div>
                          </div>
                          <div class="table-row-column col-md-3" style="text-align: right; width: 20%; padding: 0;">
                            <div class="table-row-column col-md-6 cell_div"
                              style="text-align: right; font-size: 12px !important;  background: black; padding-right: 2px;">
                              {{total_prev_1 | number: '1.2-2'}} €</div>
                            <div class="table-row-column col-md-6 cell_div"
                              style="text-align: right; font-size: 12px !important;  background: black; padding-right: 2px;">
                              {{total_variacao_1 | number: '1.2-2'}} €</div>
                          </div>
                          <div class="table-row-column col-md-3" style="text-align: right; width: 20%; padding: 0;">
                            <div class="table-row-column col-md-6 cell_div"
                              style="text-align: right; font-size: 12px !important;  background: black; padding-right: 2px;">
                              {{total_prev_2 | number: '1.2-2'}} €</div>
                            <div class="table-row-column col-md-6 cell_div"
                              style="text-align: right; font-size: 12px !important;  background: black; padding-right: 2px;">
                              {{total_variacao_2 | number: '1.2-2'}} €</div>
                          </div>
                          <div class="table-row-column col-md-3" style="text-align: right; width: 20%; padding: 0;">
                            <div class="table-row-column col-md-6 cell_div"
                              style="text-align: right; font-size: 12px !important;  background: black; padding-right: 2px;">
                              {{total_prev_3 | number: '1.2-2'}} €</div>
                            <div class="table-row-column col-md-6 cell_div"
                              style="text-align: right; font-size: 12px !important;  background: black; padding-right: 2px;">
                              {{total_variacao_3 | number: '1.2-2'}} €</div>
                          </div>
                          <div class="table-row-column col-md-3" style="text-align: right; width: 17%; padding: 0;">
                            <div class="table-row-column col-md-12 cell_div"
                              style="text-align: right; font-size: 12px !important;  background: black; padding-right: 2px;">
                              {{total_prev_4 | number: '1.2-2'}} €</div>
                            <!--div class="table-row-column col-md-6 cell_div" style="text-align: right;">Variação</div-->
                          </div>
                          <!--FIM TOTAIS-->

                        </div>

                      </div>

                      <div id="chartcurtain" [class.classloading]="loading_encomendas" style="display: none;">
                        Carregar...
                      </div>
                      <div id="chartcurtain" class="classloading"
                        *ngIf="!loading_encomendas && analises_enc.length == 0">
                        Sem dados...
                      </div>
                      <div class="table-row col-md-12 linhas" *ngFor="let cli of analises_enc"
                        style=" border-bottom: 1px solid white;">

                        <!--CLIENTES-->
                        <div class="table-row-column col-md-12 pointer referenciacol referenciacol_hover" data-toggle="collapse"
                          id="clientes{{cli.id}}" [attr.data-target]="'#collapsecli'+cli.id"
                          (click)="getdadosclientes(cli.id); " style="background: #d9d9d9;" #divref
                          [class.disabled]="cli.atualiza">
                          <div class="col-md-4 " style="padding: 0; width: 20%;">
                            <div class="col-md-3 tab_cell"
                              style="text-align: left; padding-left: 5px; padding-right: 0px;">
                              <span style="pointer-events: none;" *ngIf="!cli.iconplus" class="fa fa-minus"
                                aria-hidden="true"></span>
                              <span style="pointer-events: none;" *ngIf="cli.iconplus" class="fa fa-plus"
                                aria-hidden="true"></span> {{cli.n_cliente}}
                              <div *ngIf="cli.atualiza" class="fa fa-spinner fa-spin"></div>
                            </div>
                            <!--div class=" table-row-column col-md-5" style="text-align: left; padding: 0;">
                              {{cli.estabelecimento}}</div-->
                            <div class="table-row-column col-md-9 tab_cell" title="{{cli.nome_cliente}}"
                              style="text-align: left; padding: 0; white-space: nowrap;">
                              {{cli.nome_cliente}}
                            </div>
                          </div>
                          <div class="col-md-8" style="padding: 0; width: 80%;">
                            <div class="table-row-column col-md-4 tab_cell"
                              style="text-align: right; width:  7.6666%; padding: 0;">
                              {{cli.real | number: '1.2-2'}} €
                            </div>
                            <div class="table-row-column col-md-4 tab_cell"
                              style="text-align: right; width:  7.6666%; padding: 0;">
                              {{cli.atraso | number: '1.2-2'}} € </div>
                            <div class="table-row-column col-md-4 tab_cell"
                              [style.color]="( 0 > cli.variacao && calcula)? 'red' : ''"
                              [style.background]="( 0 != cli.variacao && calcula)? '#ffff00c2' : ''"
                              style="text-align: right; width:  7.6666%; padding: 0;">
                              {{cli.variacao | number: '1.2-2'}} € </div>

                            <div class="table-row-column col-md-6 tab_cell"
                              style="width: 10%; padding: 0; text-align: right;">
                              {{cli.prev_1 | number: '1.2-2'}} € </div>
                            <div class="table-row-column col-md-6 tab_cell"
                              style="width: 10%; padding: 0; text-align: right;"
                              [style.color]="( 0 > cli.variacao_1 && calcula_1)? 'red' : ''">
                              {{cli.variacao_1 | number: '1.2-2'}} € </div>

                            <div class="table-row-column col-md-6 tab_cell"
                              style="width: 10%; padding: 0; text-align: right;">
                              {{cli.prev_2 | number: '1.2-2'}} € </div>
                            <div class="table-row-column col-md-6 tab_cell"
                              style="width: 10%; padding: 0; text-align: right;"
                              [style.color]="( 0 > cli.variacao_2 && calcula_2)? 'red' : ''">
                              {{cli.variacao_2 | number: '1.2-2'}} € </div>

                            <div class="table-row-column col-md-6 tab_cell"
                              style="width: 10%; padding: 0; text-align: right;">
                              {{cli.prev_3 | number: '1.2-2'}} € </div>
                            <div class="table-row-column col-md-6 tab_cell"
                              style="width: 10%; padding: 0; text-align: right;"
                              [style.color]="( 0 > cli.variacao_3 && calcula_3)? '#fa33339c' : ''">
                              {{cli.variacao_3 | number: '1.2-2'}} € </div>

                            <div class="table-row-column col-md-6 tab_cell"
                              style="width: 17%; padding: 0; text-align: right;">
                              {{cli.prev_4 | number: '1.2-2'}} € </div>
                            <!--div class="table-row-column col-md-6 tab_cell"
                              style="width: 10%; padding: 0; text-align: right;"
                              [style.color]="( 0 > cli.variacao_4)? '#fa33339c' : ''">
                              {{cli.variacao_4 | number: '1.2-2'}} € </div-->
                          </div>
                        </div>


                        <!-- ATRASOS -->
                        <div class="table-row collapse col-md-12" id="collapsecli{{cli.id}}">
                          <div class="table-row col-md-12" style="background: white;">
                            <div class="table-row-column col-md-12 pointer" data-toggle="collapse"
                              id="collapseatraso{{cli.id}}" style="font-weight: 500;"
                              [attr.data-target]="'#collapseatrasos'+cli.id+'atrasos'"
                              (click)="cli.iconplusatrasos = !cli.iconplusatrasos" #divatraso>
                              <div class="col-md-12 " style="padding: 0 0 0 5%; text-align: left; background: white;">
                                ATRASOS
                              </div>
                              <div class="col-md-4" style="padding: 0; width: 20%;">
                                <div class="col-md-3">&nbsp;</div>
                                <div class="col-md-4 tab_cell" style="background: #ccd0d8; text-align: left;">
                                  <span style="pointer-events: none;" *ngIf="!divatraso.classList.contains('collapsed')"
                                    class="fa fa-minus" aria-hidden="true"></span>
                                  <span style="pointer-events: none;" *ngIf="divatraso.classList.contains('collapsed')"
                                    class="fa fa-plus" aria-hidden="true"></span>
                                  Cód Referência
                                  <div *ngIf="cli.atualizaatrasos" class="fa fa-spinner fa-spin"></div>
                                </div>
                                <div class="col-md-5 tab_cell" style="background: #ccd0d8; text-align: left;">
                                  Desig. Referência
                                </div>
                              </div>
                              <div class="col-md-8" style="padding: 0; width: 80%;">
                                <div class="col-md-1 tab_cell" style="background: #ccd0d8; width:  6%;">
                                  Estado
                                </div>
                                <div class="col-md-1 tab_cell"
                                  style="background: #ccd0d8;text-align: center; width:  5%;">
                                  Quant.
                                </div>
                                <div class="col-md-1 tab_cell"
                                  style="background: #ccd0d8;text-align: center; width:  6%;">
                                  Stock
                                </div>
                                <div class="col-md-4 tab_cell" style="background: #ccd0d8; width: 6%;">
                                  Valor
                                </div>
                                <div class="col-md-4" style="background: #ccd0d8; width:  77%;">
                                  &nbsp;
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="table-row-column collapse col-md-12" id="collapseatrasos{{cli.id}}atrasos"
                            style="padding: 0; background: white;">
                            <div class="table-row col-md-12" *ngFor="let atraso of cli.atrasos"
                              style="border-bottom:none;">
                              <!-- dados ATRASOS -->
                              <div class="table-row-column col-md-12 pointer" data-toggle="collapse">
                                <div class="col-md-4" style="padding: 0; width: 20%;">
                                  <div class="col-md-3"></div>
                                  <div class="col-md-4 tab_cell" style="background: aliceblue; text-align: left; ">
                                    {{atraso.referencia}}
                                  </div>
                                  <div title="{{atraso.design}}" class="col-md-5 tab_cell"
                                    style="background: aliceblue; text-align: left;  white-space: nowrap;">
                                    {{atraso.design}}
                                  </div>
                                </div>
                                <div class="col-md-8" style="padding: 0; width: 80%;">
                                  <div class="col-md-3 tab_cell" title=" {{atraso.estado}}"
                                    style="background: aliceblue;text-align: center;  width: 6%;  white-space: nowrap;">
                                    {{atraso.estado}}
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 5%;">
                                    {{atraso.quant | number: '1.0-0'}}
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 6%;">
                                    {{atraso.stock | number: '1.2-2'}}€
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width:6%;">
                                    {{atraso.valor | number: '1.2-2'}}€
                                  </div>
                                  <div class="col-md-4" style="background: aliceblue; width:  77%;">
                                    &nbsp;
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>


                          <!-- ATRASOS  FIM -->

                          <!-- referenciaS -->

                          <div class="table-row col-md-12" style="border-top: 8px solid white; background: white;">
                            <div class="table-row-column col-md-12 pointer" data-toggle="collapse"
                              id="collapsereferencia{{cli.id}}" style="font-weight: 500;"
                              [attr.data-target]="'#collapsereferencias'+cli.id+'referencias'"
                              (click)="cli.iconplusreferencias = !cli.iconplusreferencias" #divreferencia>
                              <div class="col-md-4" style="padding: 0; width: 20%;">
                                <div class="col-md-3">&nbsp;</div>
                                <div class="col-md-4 tab_cell" style="background: #ccd0d8; text-align: left; ">
                                  <span style="pointer-events: none;"
                                    *ngIf="!divreferencia.classList.contains('collapsed')" class="fa fa-minus"
                                    aria-hidden="true"></span>
                                  <span style="pointer-events: none;"
                                    *ngIf="divreferencia.classList.contains('collapsed')" class="fa fa-plus"
                                    aria-hidden="true"></span>
                                  Cód Referência
                                  <div *ngIf="cli.atualizareferencias" class="fa fa-spinner fa-spin"></div>
                                </div>
                                <div class="col-md-5 tab_cell"
                                  style="background: #ccd0d8; text-align: left; border-right: none;">
                                  Desig. Referência
                                </div>
                              </div>
                              <div class="col-md-8" style="padding: 0; width: 80%;">
                                <div class="col-md-1 tab_cell"
                                  style="background: #ccd0d8; width: 5%; border-left: none;">
                                  &nbsp;
                                </div>
                                <div class="col-md-1 tab_cell" style="background: #ccd0d8;width: 5%;">
                                  Quant.
                                </div>
                                <div class="col-md-1 tab_cell" style="background: #ccd0d8;width: 6%;">
                                  Stock
                                </div>
                                <div class="col-md-4 tab_cell" style="background: #ccd0d8; width: 7%;">
                                  Valor
                                </div>

                                <div class="col-md-1 tab_cell" style="background: #ccd0d8; width: 5%;">
                                  Estado
                                </div>
                                <div class="col-md-1 tab_cell" style="background: #ccd0d8;width: 4%;">
                                  Quant.
                                </div>
                                <div class="col-md-1 tab_cell" style="background: #ccd0d8;width: 5%;">
                                  Stock
                                </div>
                                <div class="col-md-4 tab_cell" style="background: #ccd0d8; width: 6%;">
                                  Valor
                                </div>

                                <div class="col-md-1 tab_cell" style="background: #ccd0d8; width: 5%;">
                                  Estado
                                </div>
                                <div class="col-md-1 tab_cell" style="background: #ccd0d8;width: 4%;">
                                  Quant.
                                </div>
                                <div class="col-md-1 tab_cell" style="background: #ccd0d8;width: 5%;">
                                  Stock
                                </div>
                                <div class="col-md-4 tab_cell" style="background: #ccd0d8; width: 6%;">
                                  Valor
                                </div>

                                <div class="col-md-1 tab_cell" style="background: #ccd0d8; width: 5%;">
                                  Estado
                                </div>
                                <div class="col-md-1 tab_cell" style="background: #ccd0d8;width: 4%;">
                                  Quant.
                                </div>
                                <div class="col-md-1 tab_cell" style="background: #ccd0d8;width: 5%;">
                                  Stock
                                </div>
                                <div class="col-md-4 tab_cell" style="background: #ccd0d8; width: 6%;">
                                  Valor
                                </div>

                                <div class="col-md-1 tab_cell" style="background: #ccd0d8; width: 4%;">
                                  Estado
                                </div>
                                <div class="col-md-1 tab_cell" style="background: #ccd0d8;width: 4%;">
                                  Quant.
                                </div>
                                <div class="col-md-1 tab_cell" style="background: #ccd0d8;width: 4%;">
                                  Stock
                                </div>
                                <div class="col-md-4 tab_cell" style="background: #ccd0d8; width: 5%;">
                                  Valor
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="table-row-column collapse pointer col-md-12"
                            id="collapsereferencias{{cli.id}}referencias" style="padding: 0; background: white;">
                            <div class="table-row col-md-12" *ngFor="let referencia of cli.referencias"
                              style="border-bottom:none;">
                              <!-- dados referenciaS -->
                              <div class="table-row-column col-md-12 pointer collapsed" data-toggle="collapse"
                                (click)="getdadosreferencias(cli.id,referencia.id); "
                                [attr.data-target]="'#collapsereferencias'+cli.id+'_'+referencia.id"
                                [class.disabled]="referencia.atualiza" #divreferencias>
                                <div class="col-md-4" style="padding: 0; width: 11.66%;">
                                  <div class="col-md-3" style="width: 43%;">
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue; text-align: left;  white-space: nowrap; width: 57%;"
                                    title="{{referencia.referencia}}">
                                    <span style="pointer-events: none; margin-right: 3px;"
                                      *ngIf="!divreferencias.classList.contains('collapsed')" class="fa fa-minus"
                                      aria-hidden="true"></span>
                                    <span style="pointer-events: none; margin-right: 3px;"
                                      *ngIf="divreferencias.classList.contains('collapsed')" class="fa fa-plus"
                                      aria-hidden="true"></span>{{referencia.referencia}}
                                    <div *ngIf="referencia.atualiza" class="fa fa-spinner fa-spin"></div>

                                  </div>

                                </div>
                                <div class="col-md-8" style="padding: 0; width: 88.34%;">
                                  <div class="col-md-5 tab_cell" title="{{referencia.design}}"
                                    style="background: aliceblue; text-align: left; white-space: nowrap; width: 13.98%;">
                                    {{referencia.design}}
                                  </div>
                                  <!--div class="col-md-3 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 5%;">
                                    &nbsp;
                                  </div-->
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 4.55%;">
                                    {{referencia.quant | number: '1.0-0'}}
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 5.4%;">
                                    {{referencia.stock | number: '1.2-2'}}€
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 6.3%;">
                                    {{referencia.valor | number: '1.2-2'}}€
                                  </div>


                                  <div class="col-md-3 tab_cell" title="{{referencia.estado_1}}"
                                    style="background: aliceblue;text-align: center;  width: 4.57%; white-space: nowrap;">
                                    {{referencia.estado_1 }} &nbsp;
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 3.66%;">
                                    {{referencia.quant_1 | number: '1.0-0'}}
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 4.5%;">
                                    {{referencia.stock_1 | number: '1.2-2'}}€
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 5.4%;">
                                    {{referencia.valor_1 | number: '1.2-2'}}€
                                  </div>

                                  <div class="col-md-3 tab_cell" title="{{referencia.estado_2}}"
                                    style="background: aliceblue;text-align: center;  width: 4.5999%; white-space: nowrap;">
                                    {{referencia.estado_2}} &nbsp;
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 3.57%;">
                                    {{referencia.quant_2 | number: '1.0-0'}}
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 4.527%;">
                                    {{referencia.stock_2 | number: '1.2-2'}}€
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 5.45%;">
                                    {{referencia.valor_2 | number: '1.2-2'}}€
                                  </div>

                                  <div class="col-md-3 tab_cell" title="{{referencia.estado_3}}"
                                    style="background: aliceblue;text-align: center;  width: 4.527%; white-space: nowrap;">
                                    {{referencia.estado_3}} &nbsp;
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 3.62%;">
                                    {{referencia.quant_3 | number: '1.0-0'}}
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 4.527%;">
                                    {{referencia.stock_3 | number: '1.2-2'}}€
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 5.4%;">
                                    {{referencia.valor_3 | number: '1.2-2'}}€
                                  </div>

                                  <div class="col-md-3 tab_cell" title="{{referencia.estado_4}}"
                                    style="background: aliceblue;text-align: center;  width: 3.66%; white-space: nowrap;">
                                    {{referencia.estado_4}} &nbsp;
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 3.6%;">
                                    {{referencia.quant_4 | number: '1.0-0'}}
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 3.6%;">
                                    {{referencia.stock_4 | number: '1.2-2'}}€
                                  </div>
                                  <div class="col-md-4 tab_cell"
                                    style="background: aliceblue;text-align: right;  width: 4.56%;">
                                    {{referencia.valor_4 | number: '1.2-2'}}€
                                  </div>
                                </div>
                              </div>
                              <div class="table-row collapse col-md-12"
                                id="collapsereferencias{{cli.id}}_{{referencia.id}}">
                                <!-- OEM -->
                                <div class="table-row col-md-12">
                                  <div class="table-row-column col-md-12 pointer collapsed" data-toggle="collapse"
                                    id="collapseoem{{cli.id}}_{{referencia.id}}oems1"
                                    style="font-weight: 500; border-bottom: 4px solid white;"
                                    [attr.data-target]="'#collapseoems'+cli.id+'_'+referencia.id+'oems1'"
                                    (click)="referencia.iconplusoem = !referencia.iconplusoem" #divoem2>
                                    <div class="col-md-1" style="width: 11.6%;"></div>

                                    <div class="col-md-2 tab_cell"
                                      style="background: #ccd0d8; text-align: left; width: 16.4%;">
                                      <span style="pointer-events: none;"
                                        *ngIf="!divoem2.classList.contains('collapsed')" class="fa fa-minus"
                                        aria-hidden="true"></span>
                                      <span style="pointer-events: none;"
                                        *ngIf="divoem2.classList.contains('collapsed')" class="fa fa-plus"
                                        aria-hidden="true"></span>
                                      OEM
                                      <div *ngIf="referencia.atualizaoem" class="fa fa-spinner fa-spin"></div>
                                    </div>
                                    <div class="col-md-1 tab_cell"
                                      style="background: #ccd0d8; text-align: left; border-right: none;">
                                      Veículo
                                    </div>
                                    <div class="col-md-1 tab_cell"
                                      style="background: #ccd0d8; border-left: none; width: 7.66%;">
                                      &nbsp;
                                    </div>
                                    <div class="col-md-3 tab_cell"
                                      style="background: #ccd0d8;text-align: left; width: 20%;">
                                      Programa/Proj.
                                    </div>
                                    <div class="col-md-4"
                                      style="background: #ccd0d8;  width: 36%; border-left: solid 1px white;">
                                      &nbsp;
                                    </div>
                                  </div>
                                </div>

                                <div class="table-row-column collapse col-md-12"
                                  id="collapseoems{{cli.id}}_{{referencia.id}}oems1" style="padding: 0;">
                                  <div class="table-row col-md-12" *ngFor="let oem of referencia.oem"
                                    style="border-bottom:none;">
                                    <!-- dados oem -->
                                    <div class="table-row-column col-md-12 pointer" data-toggle="collapse">
                                      <div class="col-md-1" style="width: 11.6%;"></div>
                                      <div class="col-md-2 tab_cell"
                                        style="background: aliceblue; text-align: left; width: 16.4%;">
                                        {{oem.nome}}
                                      </div>
                                      <div class="col-md-2 tab_cell"
                                        style="background: aliceblue; text-align: left; width: 16%;">
                                        {{oem.veiculo}}
                                      </div>
                                      <div class="col-md-3 tab_cell"
                                        style="background: aliceblue;text-align: left; width: 20%;">
                                        {{oem.programa}}
                                      </div>
                                      <div class="col-md-4"
                                        style="background: aliceblue; width: 36%; border-left: solid 1px white;">
                                        &nbsp;
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <!-- OEM  FIM -->

                                <!-- FABRICAS -->
                                <div class="table-row col-md-12">
                                  <div class="table-row-column col-md-12 pointer collapsed" data-toggle="collapse"
                                    id="collapsefab{{cli.id}}_{{referencia.id}}fabricas1" style="font-weight: 500;"
                                    [attr.data-target]="'#collapsefabricas'+cli.id+'_'+referencia.id+'fabricas1'"
                                    (click)="referencia.iconplusfab = !referencia.iconplusfab" #divfab2>
                                    <div class="col-md-1" style="width: 11.6%;"></div>

                                    <div class="col-md-2 tab_cell"
                                      style="background: #ccd0d8; text-align: left; width: 16.4%;">
                                      <span style="pointer-events: none;"
                                        *ngIf="!divfab2.classList.contains('collapsed')" class="fa fa-minus"
                                        aria-hidden="true"></span>
                                      <span style="pointer-events: none;"
                                        *ngIf="divfab2.classList.contains('collapsed')" class="fa fa-plus"
                                        aria-hidden="true"></span>
                                      Fábricas
                                      <div *ngIf="referencia.atualizafab" class="fa fa-spinner fa-spin"></div>
                                    </div>
                                    <div class="col-md-1 tab_cell" style="background: #ccd0d8">
                                      %
                                    </div>
                                    <div class="col-md-1 tab_cell" style="background: #ccd0d8; width: 7.65%;">
                                      &nbsp;
                                    </div>
                                    <div class="col-md-3 tab_cell"
                                      style="background: #ccd0d8; text-align: left;     width: 20%;">
                                      Programa/Proj.
                                    </div>
                                    <div class="col-md-1" style="background: #ccd0d8">
                                      &nbsp;
                                    </div>
                                    <div class="col-md-3" style="background: #ccd0d8; width: 27.66666%;">
                                      &nbsp;
                                    </div>
                                  </div>
                                </div>

                                <div class="table-row-column collapse col-md-12"
                                  id="collapsefabricas{{cli.id}}_{{referencia.id}}fabricas1" style="padding: 0;">
                                  <div class="table-row col-md-12" *ngFor="let fab of referencia.fabricas"
                                    style="border-bottom:none;">
                                    <!-- dados fabricas -->
                                    <div class="table-row-column col-md-12 pointer" data-toggle="collapse">
                                      <div class="col-md-1" style="width: 11.6%;"></div>
                                      <div class="col-md-2 tab_cell"
                                        style="background: aliceblue; text-align: left; width: 16.4%;">
                                        {{fab.nome}}
                                      </div>
                                      <div class="col-md-1 tab_cell" style="background: aliceblue; ">
                                        {{fab.percentagem}} %
                                      </div>
                                      <div class="col-md-1" style="background: aliceblue;     width: 7.65%;">
                                        &nbsp;
                                      </div>
                                      <div class="col-md-3 tab_cell"
                                        style="background: aliceblue; text-align: left;     width: 20%;">
                                        {{fab.programa}}
                                      </div>
                                      <div class="col-md-1" style="background: aliceblue;">
                                        &nbsp;
                                      </div>
                                      <div class="col-md-3" style="background: aliceblue; width: 27.66666%;">
                                        &nbsp;
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <!-- FABRICAS  FIM -->
                              </div>
                            </div>

                          </div>
                        </div>
                      </div>
                      <!-- referencias  FIM -->
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>